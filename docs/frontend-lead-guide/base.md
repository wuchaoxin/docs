# 基础指引

> 本文档的内容都是与配置相关。

## node 版本的选择

笔者当前的 node 版本为：`v16.16.0`（截止到 2022/08 这是一个最新的长期维护版本）。

> 如果你的控制台显示 node-sass 不适用于你的版本，请不用犹豫，你的 node 版本过高了，使用 `nvm` 或者 `volta` 降低版本即可。

> 如果你的控制台显示 需要安装 python 环境，或许是你当前是 apple 芯片的 mac 安装了低于 `node 15` 的 node，因为 `node 15` 版本以下的并不支持 arm。

## 选取正确的包管理器

一般线上 `jenkins` 使用的是 `npm`，但是项目中不难免的会使用 `npm`、`yarn`、`pnpm`，所以我们为了防止 `lock` 文件冲突或者不同步的现象发生，这里我们更加推荐在安装 `npm`、`yarn`、`pnpm` 后再安装一个 `ni`，去自动选取当前目录正确的包管理器。

[ni github 地址](https://github.com/antfu/ni)

你也可以通过我写的文章去更多了解 `ni` 的实际场景。

[ni 优雅使用包管理器](https://juejin.cn/post/7128276128648658974)

## 压缩方案的选择

关于压缩这一点，其实很重要，它关乎了页面的速度以及打包的大小。一般来说有这么几种方案：

### 通过压缩网站进行压缩

压缩网站有大名鼎鼎的[tinify](https://tinify.cn/)，但是网站在线压缩的时候，图片多了会时常不稳定，而且图片移动来移动去也挺麻烦。

### 通过 webpack 打包处理

通过某些`loader` 或者 `plugins` 进行处理。`trust me`，它们是有一些很好用，但是它们的依赖都大部分从`github`上拉取的，这会有一个致命问题，偶尔下载依赖会很慢或者直接失败。

### tinify api 压缩

1. 去[Tiny developers](https://tinify.cn/developers)申请开发者 `apiKey`
2. `vscode` 下载 `TinyPNG` 插件（当前其他编辑器也有这个插件）；配置好`apiKey`以及`forceOverwrite`（插件界面有操作说明）。
3. `vscode` 下通过右键图片或者文件夹，可对图片或者文件夹下的图片进行压缩；每个月有免费的`500`次压缩次数，十分稳定。