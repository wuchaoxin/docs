import{z as j,d as K,Y as ka,r as _,e as Ta,i as Va,B as Ba,x as La,Z as X,A as Z,_ as G,o as q,c as H,p as ca,l as pa,f as E,m as Ra,D as L,b as c,j as Ia,q as Oa,u as p,y as Ua,k as Ma,w as b,a as va,$ as aa,U as $a,a0 as N,a1 as I,s as T,a2 as Pa,a3 as M,a4 as $,V as za,t as ta,S as ea,W as na,X as la}from"./app.17fb9f66.js";import{D as ja}from"./chunks/design.9b51d1ba.js";import"./chunks/index.4ed993c7.js";import{I as sa}from"./chunks/Iframe.ea466b6a.js";var qa=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],Ha=function(a){return qa.map(function(l){return l.toLowerCase()}).indexOf(a.toLowerCase())!==-1},Na=function(a,l,e){Object.keys(l).filter(Ha).forEach(function(n){var o=l[n];typeof o=="function"&&(n==="onInit"?o(a,e):e.on(n.substring(2),function(r){return o(r,e)}))})},Wa=function(a,l,e,n){var o=a.modelEvents?a.modelEvents:null,r=Array.isArray(o)?o.join(" "):o;j(n,function(f,d){e&&typeof f=="string"&&f!==d&&f!==e.getContent({format:a.outputFormat})&&e.setContent(f)}),e.on(r||"change input undo redo",function(){l.emit("update:modelValue",e.getContent({format:a.outputFormat}))})},Ka=function(a,l,e,n,o,r){n.setContent(r()),e.attrs["onUpdate:modelValue"]&&Wa(l,e,n,o),Na(a,e.attrs,n)},da=0,ua=function(a){var l=Date.now(),e=Math.floor(Math.random()*1e9);return da++,a+"_"+e+da+String(l)},Ga=function(a){return a!==null&&a.tagName.toLowerCase()==="textarea"},oa=function(a){return typeof a>"u"||a===""?[]:Array.isArray(a)?a:a.split(" ")},Ya=function(a,l){return oa(a).concat(oa(l))},Ja=function(a){return a==null},fa=function(){return{listeners:[],scriptId:ua("tiny-script"),scriptLoaded:!1}},Qa=function(){var a=fa(),l=function(o,r,f,d){var t=r.createElement("script");t.referrerPolicy="origin",t.type="application/javascript",t.id=o,t.src=f;var h=function(){t.removeEventListener("load",h),d()};t.addEventListener("load",h),r.head&&r.head.appendChild(t)},e=function(o,r,f){a.scriptLoaded?f():(a.listeners.push(f),o.getElementById(a.scriptId)||l(a.scriptId,o,r,function(){a.listeners.forEach(function(d){return d()}),a.scriptLoaded=!0}))},n=function(){a=fa()};return{load:e,reinitialize:n}},Xa=Qa(),Za=function(){return typeof window<"u"?window:global},V=function(){var a=Za();return a&&a.tinymce?a.tinymce:null},at={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(a){return a==="html"||a==="text"}}},B=globalThis&&globalThis.__assign||function(){return B=Object.assign||function(a){for(var l,e=1,n=arguments.length;e<n;e++){l=arguments[e];for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&(a[o]=l[o])}return a},B.apply(this,arguments)},tt=function(a,l,e,n){return a(n||"div",{id:l,ref:e})},et=function(a,l,e){return a("textarea",{id:l,visibility:"hidden",ref:e})},nt=K({props:at,setup:function(a,l){var e=a.init?B({},a.init):{},n=ka(a),o=n.disabled,r=n.modelValue,f=n.tagName,d=_(null),t=null,h=a.id||ua("tiny-vue"),D=a.init&&a.init.inline||a.inline,F=!!l.attrs["onUpdate:modelValue"],S=!0,u=a.initialValue?a.initialValue:"",g="",C=function(m){return F?function(){return r!=null&&r.value?r.value:""}:function(){return m?u:g}},x=function(){var m=C(S),y=B(B({},e),{readonly:a.disabled,selector:"#"+h,plugins:Ya(e.plugins,a.plugins),toolbar:a.toolbar||e.toolbar,inline:D,setup:function(w){t=w,w.on("init",function(U){return Ka(U,a,l,w,r,m)}),typeof e.setup=="function"&&e.setup(w)}});Ga(d.value)&&(d.value.style.visibility=""),V().init(y),S=!1};j(o,function(m){var y;t!==null&&(typeof((y=t.mode)===null||y===void 0?void 0:y.set)=="function"?t.mode.set(m?"readonly":"design"):t.setMode(m?"readonly":"design"))}),j(f,function(m){var y;F||(g=t.getContent()),(y=V())===null||y===void 0||y.remove(t),Z(function(){return x()})}),Ta(function(){if(V()!==null)x();else if(d.value&&d.value.ownerDocument){var m=a.cloudChannel?a.cloudChannel:"6",y=a.apiKey?a.apiKey:"no-api-key",w=Ja(a.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/"+y+"/tinymce/"+m+"/tinymce.min.js":a.tinymceScriptSrc;Xa.load(d.value.ownerDocument,w,x)}}),Va(function(){V()!==null&&V().remove(t)}),D||(Ba(function(){S||x()}),La(function(){var m;F||(g=t.getContent()),(m=V())===null||m===void 0||m.remove(t)}));var A=function(m){var y;g=t.getContent(),(y=V())===null||y===void 0||y.remove(t),e=B(B({},e),m),Z(function(){return x()})};return l.expose({rerender:A}),function(){return D?tt(X,h,d,a.tagName):et(X,h,d)}}});const lt={"*":{"font-size":"17px","line-height":1.6,color:"#333"},p:{"margin-top":0,"margin-bottom":"24px"},"h1,h2,h3,h4,h5":{margin:"20px 0"},blockquote:{"padding-left":"10px","border-left":"3px solid #dbdbdb",color:"#9a9a9a","line-height":1.6,"font-size":"15px","padding-top":"4px",margin:"1em 0"},img:{"min-height":"20px","min-width":"20px","max-width":"100%",height:"auto","vertical-align":"bottom"},"ul,ol":{"padding-inline-start":"1.2em"}},ya={weChat:lt},Y="ym_editor_style",P=16,ia=578,st={WECHAT:"weChat"},z={REMOTE:"remote",LOCAL:"local",TEMPLATE:"template"},W={REMOTE:"remote",LOCAL:"local"};function ma(a){let l="";for(const[e,n]of Object.entries(a)){let o=`.${Y} ${e} {`,r="";for(const[f,d]of Object.entries(n))r+=`${f}: ${d};`;o+=r+"} ",l+=o}return l}function dt(a,l,e=[]){const n=/([\'\";])(.{1,}?):(.{1,}?)px/g,o=new ja(l);return a.replace(n,(f,d,t,h)=>e.includes(t)?f:d+t+": "+o.px2viewport(Number.parseFloat(h)))}const ot="vva4u5ofa4835zwr0nwptl400dczpvlm03zzrzuisabgonf3";function ra(a,l){const e={width:ia+P*2,height:700,content_css:["default"],content_style:"",paste_merge_formats:!1,paste_remove_styles_if_webkit:!1,paste_webkit_styles:"all",language:"zh_CN",block_formats:"正文=p; H1=h1; H2=h2; H3=h3; H4=h4; H5=h5",font_family_formats:"系统字体=system-ui; 黑体=黑体; 仿宋=仿宋; 楷体=楷体; 标楷体=标楷体; 华文仿宋=华文仿宋; 华文楷体=华文楷体; 宋体=宋体; 微软雅黑=微软雅黑; Arial=Arial; Tahoma=Tahoma; Verdana=Verdana; Times New Roman=Times New Roman; Courier New=Courier New;",font_size_formats:"12px 14px 15px 16px 17px 18px 19px 20px 24px",line_height_formats:"1 1.5 1.6 1.75 2 3 4 5",indentation:"2em"};if(l.styleType||l.extraStyle){const n=l.styleType,o=Object.assign({},ya[n],l.extraStyle);e.content_style=ma(o)}if(a){const{openImage:n,openMedia:o,toReady:r}=a;e.setup=f=>{f.ui.registry.addSplitButton("imageSelf",{icon:"image",tooltip:"上传图片",onAction:d=>{n(z.REMOTE,f)},onItemAction:(d,t)=>{n(t,f)},fetch:d=>{const t=[{type:"choiceitem",text:"上传远程图片",value:z.REMOTE},{type:"choiceitem",text:"上传本地图片",value:z.LOCAL},{type:"choiceitem",text:"上传模板图片",value:z.TEMPLATE}];d(t)}}),f.ui.registry.addSplitButton("mediaSelf",{icon:"embed",tooltip:"上传视频",onAction:d=>{o(W.REMOTE,f)},onItemAction:(d,t)=>{o(t,f)},fetch:d=>{const t=[{type:"choiceitem",text:"上传远程视频",value:W.REMOTE},{type:"choiceitem",text:"上传本地视频",value:W.LOCAL}];d(t)}}),f.on("init",function(d){r();const{target:t}=d;t.iframeElement.contentDocument.body.classList.add(Y)}),f.on("FullscreenStateChanged",d=>{const{state:t,target:h}=d,F=h.iframeElement.contentDocument,S=F.documentElement,u=F.body;g(t);function g(C){C?(S.style.cssText="height:100%;background-color:#F7F7F7;overflow:hidden;",u.style.cssText=`width:${ia+P*2+"px"};height:100%;margin: 0 auto;padding: ${P}px ${P}px 0 ${P}px;overflow:hidden;background-color:#fff`):(S.style.cssText="height:auto;background-color:#fff;",u.style.cssText="width:auto;height:auto;padding:0;background-color:#fff")}})}}return l!=null&&l.convertWeChatImg&&(e.paste_preprocess=(n,o)=>{ha(n,o)}),e}function ha(a,l){const e=l.content,n=/<img.{1,}data-src="(https:\/\/mmbiz.qpic.cn.{1,}?)".{1,}src="(https:\/\/mmbiz.qpic.cn.{1,}?)".{0,}>/g;e.replace(n,(o,r,f)=>{const d=r.replace("?","\\?"),t=f.replace("?","\\?");let h=o;const D="https://ym-jump.com?url=",F=D+window.encodeURIComponent(r),S=D+window.encodeURIComponent(f);return h=h.replace(new RegExp(`"${d}"`,"g"),`"${F}"`),h=h.replace(new RegExp(`"${t}"`,"g"),`"${S}"`),h})}const ft=["blocks fontfamily fontsize","bold italic underline strikethrough forecolor backcolor blockquote Superscript Subscript alignleft aligncenter alignright outdent indent lineheight","insertdatetime bullist numlist link emoticons imageSelf mediaSelf table hr","preview wordcount code searchreplace undo redo remove removeformat fullscreen"],it="lists advlist autosave fullscreen insertdatetime link media preview searchreplace wordcount code emoticons image table";const rt={},ct=a=>(ca("data-v-acf386f1"),a=a(),pa(),a),pt=ct(()=>E("div",{class:"sword"},[E("span"),E("span"),E("span")],-1)),vt=[pt];function ut(a,l){return q(),H("div",null,vt)}const yt=G(rt,[["render",ut],["__scopeId","data-v-acf386f1"]]),mt={key:0,class:"loading-container"},ht=K({__name:"index",props:{apiKey:{default:ot},cloudChannel:null,disabled:{type:Boolean},id:null,init:null,initialValue:null,inline:{type:Boolean},modelEvents:{default:"change keydown blur focus paste"},outputFormat:null,plugins:{default:()=>it},tagName:null,toolbar:{default:()=>ft},tinymceScriptSrc:null,styleType:{default:st.WECHAT},extraStyle:null,convertWeChatImg:{type:Boolean,default:!0},modelValue:{default:""}},emits:["openImage","openMedia","update:modelValue"],setup(a,{expose:l,emit:e}){const n=a,o=Ra(),r=_(!1),f=L({get(){return n.modelValue},set(u){e("update:modelValue",u)}}),d=L(()=>{const u=n.init,g=ra({openImage:h,openMedia:D,toReady:F},n),C=(()=>{const x={};return u!=null&&u.setup&&(x.setup=A=>{var m,y;(m=g.setup)==null||m.call(g,A),(y=u.setup)==null||y.call(u,A)}),u!=null&&u.paste_preprocess&&(x.paste_preprocess=(A,m)=>{u.paste_preprocess(A,m),ha(A,m)}),x})();return Object.assign({},ra({openImage:h,openMedia:D,toReady:F},n),n.init,C)}),t=L(()=>({width:d.value.width+"px",height:d.value.height+"px",borderRadius:"10px"}));function h(u,g){e("openImage",u,g)}function D(u,g){e("openMedia",u,g)}function F(){r.value=!0}function S(){return(()=>{const g=(()=>{if(n.styleType||n.extraStyle){const x=Object.assign({},ya[n.styleType],n==null?void 0:n.extraStyle);return`<style>${ma(x)}</style>`}else return""})();return`<div class="${Y}">${g}${f.value}</div>`})()}return l({getHTMLWithStyle:S}),(u,g)=>(q(),H("div",{class:"editor-container",style:Ma(p(t))},[r.value?Ia("",!0):(q(),H("div",mt,[c(yt)])),c(p(nt),Oa({modelValue:p(f),"onUpdate:modelValue":g[0]||(g[0]=C=>Ua(f)?f.value=C:null)},Object.assign({},p(o),n),{init:p(d)}),null,16,["modelValue","init"])],4))}});const gt=G(ht,[["__scopeId","data-v-034f5a49"]]),O=a=>(ca("data-v-ada5faf0"),a=a(),pa(),a),bt=va('<h1 id="editor-组件" tabindex="-1" data-v-ada5faf0>Editor 组件 <a class="header-anchor" href="#editor-组件" aria-hidden="true" data-v-ada5faf0>#</a></h1><p data-v-ada5faf0>Editor 组件为后台管理系统中经常会使用到的富文本组件。详细的细节内容请见注释以及文档，配置项过多完全理解确实需要一定时间。</p><p data-v-ada5faf0><a href="https://www.tiny.cloud/docs/tinymce/6/" target="_blank" rel="noreferrer" data-v-ada5faf0>tinymce6 文档</a></p><p data-v-ada5faf0><a href="https://www.tiny.cloud/docs/tinymce/6/vue-ref/" target="_blank" rel="noreferrer" data-v-ada5faf0>tinymce-vue 文档</a></p><h2 id="基础构思" tabindex="-1" data-v-ada5faf0>基础构思 <a class="header-anchor" href="#基础构思" aria-hidden="true" data-v-ada5faf0>#</a></h2><h3 id="如何响应式" tabindex="-1" data-v-ada5faf0>如何响应式 <a class="header-anchor" href="#如何响应式" aria-hidden="true" data-v-ada5faf0>#</a></h3><p data-v-ada5faf0>编辑器会向富文本中输出一段不可见的编辑器信息富文本，用于下游去得到这段富文本设置时编辑器相关的信息。</p><blockquote data-v-ada5faf0><p data-v-ada5faf0>一切富文本操作将尽可能提供暴露函数，方便下游使用。</p></blockquote><h3 id="下游如何修改样式" tabindex="-1" data-v-ada5faf0>下游如何修改样式 <a class="header-anchor" href="#下游如何修改样式" aria-hidden="true" data-v-ada5faf0>#</a></h3><p data-v-ada5faf0>下游可以通过辅助函数去移除所有的 <code data-v-ada5faf0>style</code> 样式来得到干净的样式。</p><blockquote data-v-ada5faf0><p data-v-ada5faf0>一切富文本操作将尽可能提供暴露函数，方便下游使用。</p></blockquote><h3 id="上传图片以及视频" tabindex="-1" data-v-ada5faf0>上传图片以及视频 <a class="header-anchor" href="#上传图片以及视频" aria-hidden="true" data-v-ada5faf0>#</a></h3><p data-v-ada5faf0>由于当前使用的是 <code data-v-ada5faf0>tinymce6</code>，目前国内插件还不够丰富，所以放弃使用 <code data-v-ada5faf0>tinymce6</code> 插件。采用外部上传的形式，并且并不想将当前组件和其他组件库绑定过深，所以采用 <code data-v-ada5faf0>emits</code> 的形式暴露出去事件。</p><h3 id="全屏模式" tabindex="-1" data-v-ada5faf0>全屏模式 <a class="header-anchor" href="#全屏模式" aria-hidden="true" data-v-ada5faf0>#</a></h3><p data-v-ada5faf0>使用方希望在全屏时，设置版本。故监听了全屏模式，在开启或关闭全屏模式时，会对编辑器操作空间进行样式修改。</p><h3 id="层级排列规则" tabindex="-1" data-v-ada5faf0>层级排列规则 <a class="header-anchor" href="#层级排列规则" aria-hidden="true" data-v-ada5faf0>#</a></h3><ol data-v-ada5faf0><li data-v-ada5faf0>下拉框设置</li><li data-v-ada5faf0>文本相关设置</li><li data-v-ada5faf0>插入内容设置</li><li data-v-ada5faf0>非修改设置</li></ol><h2 id="展示" tabindex="-1" data-v-ada5faf0>展示 <a class="header-anchor" href="#展示" aria-hidden="true" data-v-ada5faf0>#</a></h2><h3 id="基础示例" tabindex="-1" data-v-ada5faf0>基础示例 <a class="header-anchor" href="#基础示例" aria-hidden="true" data-v-ada5faf0>#</a></h3><p data-v-ada5faf0>一个全功能的基础编辑器</p><blockquote data-v-ada5faf0><p data-v-ada5faf0>基础样式尽可能去对齐微信编辑器的样式。</p></blockquote>',21),Et={class:"dialog-footer"},Ft={class:"dialog-footer"},Dt={class:"copper-container"},_t={class:"preview"},Ct=["src"],xt={class:"dialog-footer"},At=O(()=>E("br",null,null,-1)),St=O(()=>E("h4",{id:"输出网页",tabindex:"-1"},[T("输出网页 "),E("a",{class:"header-anchor",href:"#输出网页","aria-hidden":"true"},"#")],-1)),wt=O(()=>E("br",null,null,-1)),kt=O(()=>E("br",null,null,-1)),Tt=O(()=>E("h4",{id:"输出网页-动态响应式",tabindex:"-1"},[T("输出网页（动态响应式） "),E("a",{class:"header-anchor",href:"#输出网页-动态响应式","aria-hidden":"true"},"#")],-1)),Vt=O(()=>E("br",null,null,-1)),Bt=va(`<br data-v-ada5faf0><h3 id="修改默认样式" tabindex="-1" data-v-ada5faf0>修改默认样式 <a class="header-anchor" href="#修改默认样式" aria-hidden="true" data-v-ada5faf0>#</a></h3><p data-v-ada5faf0>有时候我们需要去修改默认的编辑器设置，但是修改会和我们想的不太一样。编辑器作者推荐使用 <code data-v-ada5faf0>content_style</code> 或者 <code data-v-ada5faf0>content_css</code> 去修改操作区域的样式，然后在富文本输出的时候新增一个顶层 div，在这个新增的 html 上进行设置默认的样式。当然这样比较麻烦，简单封装了一下，我们只需 props 中 传递 <code data-v-ada5faf0>extraStyle</code> 即可。</p><blockquote data-v-ada5faf0><p data-v-ada5faf0>PS：也许你通过阅读文档看见了可以通过初始化后命令去控制编辑器默认设置，但是在执行命令的时候，会自动聚焦并且滚动至编辑器区域，这并不是我们想要的效果而且作者也不推荐这么进行使用。</p></blockquote><h2 id="props" tabindex="-1" data-v-ada5faf0>Props <a class="header-anchor" href="#props" aria-hidden="true" data-v-ada5faf0>#</a></h2><blockquote data-v-ada5faf0><p data-v-ada5faf0>这里只会标注我个人认为有用的 props，详细 props 请见 文档。</p></blockquote><blockquote data-v-ada5faf0><p data-v-ada5faf0>默认值请见注释（PS：如果你真的想了解设置相关注释一定是需要阅读的）。</p></blockquote><table data-v-ada5faf0><thead data-v-ada5faf0><tr data-v-ada5faf0><th style="text-align:center;" data-v-ada5faf0>属性</th><th data-v-ada5faf0>描述</th><th style="text-align:center;" data-v-ada5faf0>默认值</th><th data-v-ada5faf0>可能的值</th><th data-v-ada5faf0>备注</th></tr></thead><tbody data-v-ada5faf0><tr data-v-ada5faf0><td style="text-align:center;" data-v-ada5faf0>disabled</td><td data-v-ada5faf0>是否禁用</td><td style="text-align:center;" data-v-ada5faf0>false</td><td data-v-ada5faf0>true | false</td><td data-v-ada5faf0>-</td></tr><tr data-v-ada5faf0><td style="text-align:center;" data-v-ada5faf0>init</td><td data-v-ada5faf0>初始化内容</td><td style="text-align:center;" data-v-ada5faf0>getDefaultInit()</td><td data-v-ada5faf0>Object</td><td data-v-ada5faf0>-</td></tr><tr data-v-ada5faf0><td style="text-align:center;" data-v-ada5faf0>commandFn</td><td data-v-ada5faf0>需要执行的命令</td><td style="text-align:center;" data-v-ada5faf0>undefined</td><td data-v-ada5faf0>Function</td><td data-v-ada5faf0>-</td></tr><tr data-v-ada5faf0><td style="text-align:center;" data-v-ada5faf0>initialValue</td><td data-v-ada5faf0>初始化编辑器的值</td><td style="text-align:center;" data-v-ada5faf0>undefined</td><td data-v-ada5faf0>string</td><td data-v-ada5faf0>-</td></tr><tr data-v-ada5faf0><td style="text-align:center;" data-v-ada5faf0>modelEvents</td><td data-v-ada5faf0>设置需要触发的事件</td><td style="text-align:center;" data-v-ada5faf0>&#39;change keydown blur focus paste&#39;</td><td data-v-ada5faf0>string</td><td data-v-ada5faf0>-</td></tr><tr data-v-ada5faf0><td style="text-align:center;" data-v-ada5faf0>plugins</td><td data-v-ada5faf0>插件</td><td style="text-align:center;" data-v-ada5faf0>DEFAULT_PLUGINS</td><td data-v-ada5faf0>string</td><td data-v-ada5faf0>-</td></tr><tr data-v-ada5faf0><td style="text-align:center;" data-v-ada5faf0>toolbar</td><td data-v-ada5faf0>工具栏</td><td style="text-align:center;" data-v-ada5faf0>DEFAULT_TOOLBAR</td><td data-v-ada5faf0>string</td><td data-v-ada5faf0>-</td></tr><tr data-v-ada5faf0><td style="text-align:center;" data-v-ada5faf0>styleType</td><td data-v-ada5faf0>使用的样式类型</td><td style="text-align:center;" data-v-ada5faf0>&#39;weChat&#39;</td><td data-v-ada5faf0>详情见 <code data-v-ada5faf0>Style</code> 数据模型</td><td data-v-ada5faf0>-</td></tr><tr data-v-ada5faf0><td style="text-align:center;" data-v-ada5faf0>extraStyle</td><td data-v-ada5faf0>额外加入的样式</td><td style="text-align:center;" data-v-ada5faf0>undefined</td><td data-v-ada5faf0>详情见 <code data-v-ada5faf0>ExtraStyle</code> 数据模型</td><td data-v-ada5faf0>在你修改默认样式时将十分有用</td></tr></tbody></table><h2 id="event" tabindex="-1" data-v-ada5faf0>Event <a class="header-anchor" href="#event" aria-hidden="true" data-v-ada5faf0>#</a></h2><p data-v-ada5faf0>相关事件请见：<a href="https://www.tiny.cloud/docs/tinymce/6/events/#editor-core-events" target="_blank" rel="noreferrer" data-v-ada5faf0>Event</a></p><p data-v-ada5faf0>但是你需要注意的是事件分为核心事件和插件事件</p><h2 id="辅助函数" tabindex="-1" data-v-ada5faf0>辅助函数 <a class="header-anchor" href="#辅助函数" aria-hidden="true" data-v-ada5faf0>#</a></h2><blockquote data-v-ada5faf0><p data-v-ada5faf0>富文本中包含大量的字符串操作，这里提供一些常见的富文本操作函数方便使用者的使用。</p></blockquote><blockquote data-v-ada5faf0><p data-v-ada5faf0>路径：<code data-v-ada5faf0>frontend-common/vue3/components/Editor/utils.ts</code></p></blockquote><h3 id="cleanstyle" tabindex="-1" data-v-ada5faf0>cleanStyle <a class="header-anchor" href="#cleanstyle" aria-hidden="true" data-v-ada5faf0>#</a></h3><div class="language-ts line-numbers-mode" data-v-ada5faf0><button title="Copy Code" class="copy" data-v-ada5faf0></button><span class="lang" data-v-ada5faf0>ts</span><pre class="shiki material-theme-palenight" data-v-ada5faf0><code data-v-ada5faf0><span class="line" data-v-ada5faf0><span style="color:#676E95;font-style:italic;" data-v-ada5faf0>/**</span></span>
<span class="line" data-v-ada5faf0><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> * </span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>@</span><span style="color:#C792EA;font-style:italic;" data-v-ada5faf0>description</span><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> 去除富文本所有的 style 样式</span></span>
<span class="line" data-v-ada5faf0><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> * </span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>@</span><span style="color:#C792EA;font-style:italic;" data-v-ada5faf0>param</span><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> </span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>{</span><span style="color:#FFCB6B;font-style:italic;" data-v-ada5faf0>string</span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>}</span><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> </span><span style="color:#A6ACCD;font-style:italic;" data-v-ada5faf0>html</span><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> 富文本</span></span>
<span class="line" data-v-ada5faf0><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> * </span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>@</span><span style="color:#C792EA;font-style:italic;" data-v-ada5faf0>returns</span><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> </span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>{</span><span style="color:#FFCB6B;font-style:italic;" data-v-ada5faf0>string</span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>}</span></span>
<span class="line" data-v-ada5faf0><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> * </span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>@</span><span style="color:#C792EA;font-style:italic;" data-v-ada5faf0>example</span></span>
<span class="line" data-v-ada5faf0><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> */</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true" data-v-ada5faf0><span class="line-number" data-v-ada5faf0>1</span><br data-v-ada5faf0><span class="line-number" data-v-ada5faf0>2</span><br data-v-ada5faf0><span class="line-number" data-v-ada5faf0>3</span><br data-v-ada5faf0><span class="line-number" data-v-ada5faf0>4</span><br data-v-ada5faf0><span class="line-number" data-v-ada5faf0>5</span><br data-v-ada5faf0></div></div><h3 id="addeditorinfo" tabindex="-1" data-v-ada5faf0>addEditorInfo <a class="header-anchor" href="#addeditorinfo" aria-hidden="true" data-v-ada5faf0>#</a></h3><div class="language-ts line-numbers-mode" data-v-ada5faf0><button title="Copy Code" class="copy" data-v-ada5faf0></button><span class="lang" data-v-ada5faf0>ts</span><pre class="shiki material-theme-palenight" data-v-ada5faf0><code data-v-ada5faf0><span class="line" data-v-ada5faf0><span style="color:#676E95;font-style:italic;" data-v-ada5faf0>/**</span></span>
<span class="line" data-v-ada5faf0><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> * </span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>@</span><span style="color:#C792EA;font-style:italic;" data-v-ada5faf0>description</span><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> 向富文本中添加编辑器信息</span></span>
<span class="line" data-v-ada5faf0><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> * </span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>@</span><span style="color:#C792EA;font-style:italic;" data-v-ada5faf0>param</span><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> </span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>{</span><span style="color:#FFCB6B;font-style:italic;" data-v-ada5faf0>string</span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>}</span><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> </span><span style="color:#A6ACCD;font-style:italic;" data-v-ada5faf0>html</span><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> 富文本</span></span>
<span class="line" data-v-ada5faf0><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> * </span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>@</span><span style="color:#C792EA;font-style:italic;" data-v-ada5faf0>param</span><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> </span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>{</span><span style="color:#FFCB6B;font-style:italic;" data-v-ada5faf0>Object</span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>}</span><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> </span><span style="color:#A6ACCD;font-style:italic;" data-v-ada5faf0>info</span><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> 编辑器信息</span></span>
<span class="line" data-v-ada5faf0><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> * </span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>@</span><span style="color:#C792EA;font-style:italic;" data-v-ada5faf0>returns</span><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> </span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>{</span><span style="color:#FFCB6B;font-style:italic;" data-v-ada5faf0>string</span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>}</span></span>
<span class="line" data-v-ada5faf0><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> * </span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>@</span><span style="color:#C792EA;font-style:italic;" data-v-ada5faf0>example</span></span>
<span class="line" data-v-ada5faf0><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> */</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true" data-v-ada5faf0><span class="line-number" data-v-ada5faf0>1</span><br data-v-ada5faf0><span class="line-number" data-v-ada5faf0>2</span><br data-v-ada5faf0><span class="line-number" data-v-ada5faf0>3</span><br data-v-ada5faf0><span class="line-number" data-v-ada5faf0>4</span><br data-v-ada5faf0><span class="line-number" data-v-ada5faf0>5</span><br data-v-ada5faf0><span class="line-number" data-v-ada5faf0>6</span><br data-v-ada5faf0></div></div><h3 id="geteditorinfo" tabindex="-1" data-v-ada5faf0>getEditorInfo <a class="header-anchor" href="#geteditorinfo" aria-hidden="true" data-v-ada5faf0>#</a></h3><div class="language-ts line-numbers-mode" data-v-ada5faf0><button title="Copy Code" class="copy" data-v-ada5faf0></button><span class="lang" data-v-ada5faf0>ts</span><pre class="shiki material-theme-palenight" data-v-ada5faf0><code data-v-ada5faf0><span class="line" data-v-ada5faf0><span style="color:#676E95;font-style:italic;" data-v-ada5faf0>/**</span></span>
<span class="line" data-v-ada5faf0><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> * </span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>@</span><span style="color:#C792EA;font-style:italic;" data-v-ada5faf0>description</span><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> 从富文本中取出编辑器信息</span></span>
<span class="line" data-v-ada5faf0><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> * </span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>@</span><span style="color:#C792EA;font-style:italic;" data-v-ada5faf0>param</span><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> </span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>{</span><span style="color:#FFCB6B;font-style:italic;" data-v-ada5faf0>string</span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>}</span><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> </span><span style="color:#A6ACCD;font-style:italic;" data-v-ada5faf0>html</span><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> 富文本</span></span>
<span class="line" data-v-ada5faf0><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> * </span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>@</span><span style="color:#C792EA;font-style:italic;" data-v-ada5faf0>returns</span><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> </span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>{</span><span style="color:#FFCB6B;font-style:italic;" data-v-ada5faf0>string</span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>}</span></span>
<span class="line" data-v-ada5faf0><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> * </span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>@</span><span style="color:#C792EA;font-style:italic;" data-v-ada5faf0>example</span></span>
<span class="line" data-v-ada5faf0><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> */</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true" data-v-ada5faf0><span class="line-number" data-v-ada5faf0>1</span><br data-v-ada5faf0><span class="line-number" data-v-ada5faf0>2</span><br data-v-ada5faf0><span class="line-number" data-v-ada5faf0>3</span><br data-v-ada5faf0><span class="line-number" data-v-ada5faf0>4</span><br data-v-ada5faf0><span class="line-number" data-v-ada5faf0>5</span><br data-v-ada5faf0></div></div><h3 id="adddefaultstyle" tabindex="-1" data-v-ada5faf0>addDefaultStyle <a class="header-anchor" href="#adddefaultstyle" aria-hidden="true" data-v-ada5faf0>#</a></h3><div class="language-ts line-numbers-mode" data-v-ada5faf0><button title="Copy Code" class="copy" data-v-ada5faf0></button><span class="lang" data-v-ada5faf0>ts</span><pre class="shiki material-theme-palenight" data-v-ada5faf0><code data-v-ada5faf0><span class="line" data-v-ada5faf0><span style="color:#676E95;font-style:italic;" data-v-ada5faf0>/**</span></span>
<span class="line" data-v-ada5faf0><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> * </span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>@</span><span style="color:#C792EA;font-style:italic;" data-v-ada5faf0>description</span><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> 在富文本顶层 html 进行添加默认样式设置</span></span>
<span class="line" data-v-ada5faf0><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> * </span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>@</span><span style="color:#C792EA;font-style:italic;" data-v-ada5faf0>param</span><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> </span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>{</span><span style="color:#FFCB6B;font-style:italic;" data-v-ada5faf0>string | AnyObject</span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>}</span><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> </span><span style="color:#A6ACCD;font-style:italic;" data-v-ada5faf0>styles</span><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> 样式（PS：这是直接的样式）</span></span>
<span class="line" data-v-ada5faf0><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> * </span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>@</span><span style="color:#C792EA;font-style:italic;" data-v-ada5faf0>param</span><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> </span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>{</span><span style="color:#FFCB6B;font-style:italic;" data-v-ada5faf0>string</span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>}</span><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> </span><span style="color:#A6ACCD;font-style:italic;" data-v-ada5faf0>html</span><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> 富文本</span></span>
<span class="line" data-v-ada5faf0><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> * </span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>@</span><span style="color:#C792EA;font-style:italic;" data-v-ada5faf0>returns</span><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> </span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>{</span><span style="color:#FFCB6B;font-style:italic;" data-v-ada5faf0>string</span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>}</span></span>
<span class="line" data-v-ada5faf0><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> */</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true" data-v-ada5faf0><span class="line-number" data-v-ada5faf0>1</span><br data-v-ada5faf0><span class="line-number" data-v-ada5faf0>2</span><br data-v-ada5faf0><span class="line-number" data-v-ada5faf0>3</span><br data-v-ada5faf0><span class="line-number" data-v-ada5faf0>4</span><br data-v-ada5faf0><span class="line-number" data-v-ada5faf0>5</span><br data-v-ada5faf0></div></div><h3 id="getstyle" tabindex="-1" data-v-ada5faf0>getStyle <a class="header-anchor" href="#getstyle" aria-hidden="true" data-v-ada5faf0>#</a></h3><div class="language-ts line-numbers-mode" data-v-ada5faf0><button title="Copy Code" class="copy" data-v-ada5faf0></button><span class="lang" data-v-ada5faf0>ts</span><pre class="shiki material-theme-palenight" data-v-ada5faf0><code data-v-ada5faf0><span class="line" data-v-ada5faf0><span style="color:#676E95;font-style:italic;" data-v-ada5faf0>/**</span></span>
<span class="line" data-v-ada5faf0><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> * </span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>@</span><span style="color:#C792EA;font-style:italic;" data-v-ada5faf0>description</span><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> 根据传入的对象来组合成 css</span></span>
<span class="line" data-v-ada5faf0><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> * </span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>@</span><span style="color:#C792EA;font-style:italic;" data-v-ada5faf0>param</span><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> </span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>{</span><span style="color:#FFCB6B;font-style:italic;" data-v-ada5faf0>AnyObject</span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>}</span><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> </span><span style="color:#A6ACCD;font-style:italic;" data-v-ada5faf0>styles</span><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> 样式（PS：这里是标签对象）</span></span>
<span class="line" data-v-ada5faf0><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> * </span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>@</span><span style="color:#C792EA;font-style:italic;" data-v-ada5faf0>returns</span><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> </span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>{</span><span style="color:#FFCB6B;font-style:italic;" data-v-ada5faf0>string</span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>}</span></span>
<span class="line" data-v-ada5faf0><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> */</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true" data-v-ada5faf0><span class="line-number" data-v-ada5faf0>1</span><br data-v-ada5faf0><span class="line-number" data-v-ada5faf0>2</span><br data-v-ada5faf0><span class="line-number" data-v-ada5faf0>3</span><br data-v-ada5faf0><span class="line-number" data-v-ada5faf0>4</span><br data-v-ada5faf0></div></div><h3 id="convertunits" tabindex="-1" data-v-ada5faf0>convertUnits <a class="header-anchor" href="#convertunits" aria-hidden="true" data-v-ada5faf0>#</a></h3><div class="language-ts line-numbers-mode" data-v-ada5faf0><button title="Copy Code" class="copy" data-v-ada5faf0></button><span class="lang" data-v-ada5faf0>ts</span><pre class="shiki material-theme-palenight" data-v-ada5faf0><code data-v-ada5faf0><span class="line" data-v-ada5faf0><span style="color:#676E95;font-style:italic;" data-v-ada5faf0>/**</span></span>
<span class="line" data-v-ada5faf0><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> * </span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>@</span><span style="color:#C792EA;font-style:italic;" data-v-ada5faf0>description</span><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> 转换 css 单位</span></span>
<span class="line" data-v-ada5faf0><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> * </span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>@</span><span style="color:#C792EA;font-style:italic;" data-v-ada5faf0>param</span><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> </span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>{</span><span style="color:#FFCB6B;font-style:italic;" data-v-ada5faf0>string</span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>}</span><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> </span><span style="color:#A6ACCD;font-style:italic;" data-v-ada5faf0>str</span><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> 需要转换的 style 或者 html</span></span>
<span class="line" data-v-ada5faf0><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> * </span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>@</span><span style="color:#C792EA;font-style:italic;" data-v-ada5faf0>param</span><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> </span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>{</span><span style="color:#FFCB6B;font-style:italic;" data-v-ada5faf0>number</span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>}</span><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> </span><span style="color:#A6ACCD;font-style:italic;" data-v-ada5faf0>designBase</span><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> 转换的基数</span></span>
<span class="line" data-v-ada5faf0><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> * </span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>@</span><span style="color:#C792EA;font-style:italic;" data-v-ada5faf0>param</span><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> </span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>{</span><span style="color:#FFCB6B;font-style:italic;" data-v-ada5faf0>Array&lt;string&gt;</span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>}</span><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> </span><span style="color:#A6ACCD;font-style:italic;" data-v-ada5faf0>blackList</span><span style="color:#676E95;font-style:italic;" data-v-ada5faf0>  css 属性黑名单，识别到将不会进行转换</span></span>
<span class="line" data-v-ada5faf0><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> * </span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>@</span><span style="color:#C792EA;font-style:italic;" data-v-ada5faf0>returns</span><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> </span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>{</span><span style="color:#FFCB6B;font-style:italic;" data-v-ada5faf0>string</span><span style="color:#89DDFF;font-style:italic;" data-v-ada5faf0>}</span></span>
<span class="line" data-v-ada5faf0><span style="color:#676E95;font-style:italic;" data-v-ada5faf0> */</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true" data-v-ada5faf0><span class="line-number" data-v-ada5faf0>1</span><br data-v-ada5faf0><span class="line-number" data-v-ada5faf0>2</span><br data-v-ada5faf0><span class="line-number" data-v-ada5faf0>3</span><br data-v-ada5faf0><span class="line-number" data-v-ada5faf0>4</span><br data-v-ada5faf0><span class="line-number" data-v-ada5faf0>5</span><br data-v-ada5faf0><span class="line-number" data-v-ada5faf0>6</span><br data-v-ada5faf0></div></div>`,26),$t=JSON.parse('{"title":"Editor 组件","description":"","frontmatter":{},"headers":[{"level":2,"title":"基础构思","slug":"基础构思","link":"#基础构思","children":[{"level":3,"title":"如何响应式","slug":"如何响应式","link":"#如何响应式","children":[]},{"level":3,"title":"下游如何修改样式","slug":"下游如何修改样式","link":"#下游如何修改样式","children":[]},{"level":3,"title":"上传图片以及视频","slug":"上传图片以及视频","link":"#上传图片以及视频","children":[]},{"level":3,"title":"全屏模式","slug":"全屏模式","link":"#全屏模式","children":[]},{"level":3,"title":"层级排列规则","slug":"层级排列规则","link":"#层级排列规则","children":[]}]},{"level":2,"title":"展示","slug":"展示","link":"#展示","children":[{"level":3,"title":"基础示例","slug":"基础示例","link":"#基础示例","children":[]},{"level":3,"title":"修改默认样式","slug":"修改默认样式","link":"#修改默认样式","children":[]}]},{"level":2,"title":"Props","slug":"props","link":"#props","children":[]},{"level":2,"title":"Event","slug":"event","link":"#event","children":[]},{"level":2,"title":"辅助函数","slug":"辅助函数","link":"#辅助函数","children":[{"level":3,"title":"cleanStyle","slug":"cleanstyle","link":"#cleanstyle","children":[]},{"level":3,"title":"addEditorInfo","slug":"addeditorinfo","link":"#addeditorinfo","children":[]},{"level":3,"title":"getEditorInfo","slug":"geteditorinfo","link":"#geteditorinfo","children":[]},{"level":3,"title":"addDefaultStyle","slug":"adddefaultstyle","link":"#adddefaultstyle","children":[]},{"level":3,"title":"getStyle","slug":"getstyle","link":"#getstyle","children":[]},{"level":3,"title":"convertUnits","slug":"convertunits","link":"#convertunits","children":[]}]}],"relativePath":"frontend-common-guide/vue3/components/Web/Editor.md","lastUpdated":1675835613000}'),Lt={name:"frontend-common-guide/vue3/components/Web/Editor.md"},Rt=K({...Lt,setup(a){const l="100px",e=_(""),n=_(null),o=L(()=>n.value?n.value.getHTMLWithStyle():null),r=L(()=>dt(o.value||"",574)),f=_(null),d=_(!1),t=_({}),h={url:[{required:!0,message:"请输入图片 URL",trigger:"change"}],describe:[{required:!0,message:"请输入图片描述",trigger:"change"}],imgTitle:[{required:!0,message:"请输入图片标题",trigger:"change"}],imgWidth:[{required:!0,message:"请输入图片宽度",trigger:"change"}],imgHeight:[{required:!0,message:"请输入图片高度",trigger:"change"}]},D=_(!1),F=_(null),S="local",u={url:"https://httpbin.org/post",headers:{"My-Awesome-Header":"header value"}},g=L(()=>ea?na(()=>la(()=>import("./chunks/index.6ecda345.js"),["assets/chunks/index.6ecda345.js","assets/app.17fb9f66.js","assets/chunks/request.8ec2588f.js","assets/chunks/url.bf17ea7d.js","assets/chunks/progressBar.ffec08eb.js"])):null),C=_(!1),x=_(null),A=_(null),m=_({}),y=_(.9),w=_(null),U=_(""),ga=L(()=>ea?na(()=>la(()=>import("./chunks/vue-cropper.7c3341fd.js"),["assets/chunks/vue-cropper.7c3341fd.js","assets/app.17fb9f66.js"])):null);j(y,()=>{J()});function ba(v,s){v==="remote"?d.value=!0:v==="local"?D.value=!0:aa("模板根据需求定义，插入对应的 html 即可，这里不再提供示例。")}function Ea(){aa("与图片上传类似，这里不再提供示例。")}function Fa(){t.value={},f.value.resetFields()}function Da(){f.value.validate().then(()=>{d.value=!1;const v=`<img src=${t.value.url} alt=${t.value.describe} title=${t.value.imgTitle} width=${t.value.imgWidth} height=${t.value.imgHeight} />`;e.value=e.value+v})}function _a(){var v,s;(s=(v=F.value)==null?void 0:v.removeAllFiles)==null||s.call(v,!0)}function Ca(){var s,k;let v=(k=(s=F.value)==null?void 0:s.getAcceptedFiles)==null?void 0:k.call(s,!0);if(v)for(const i of v){const R=`<img src=${i.dataURL} alt=${i.name} title=${i.name} width=${i.width} height=${i.height} />`;e.value=e.value+R}D.value=!1}function xa(v){C.value=!0,A.value=v}function Aa(){C.value=!1,Q()}function Sa(){var s,k,i,R;(k=(s=F.value)==null?void 0:s.removeFile)==null||k.call(s,A.value);const v=new File([w.value],A.value.name,{type:"image/jpeg"});(R=(i=F.value)==null?void 0:i.manuallyAddFile)==null||R.call(i,v,URL.createObjectURL(w.value)),C.value=!1,Q()}function wa(v){m.value=v,J()}function J(){var v,s;(s=(v=x.value)==null?void 0:v.getCropBlob)==null||s.call(v,k=>{w.value=k,U.value=URL.createObjectURL(k)})}function Q(){var v,s;(s=(v=x.value)==null?void 0:v.goAutoCrop)==null||s.call(v),y.value=.9,w.value=null,U.value=""}return(v,s)=>{const k=$a("ClientOnly");return q(),H("div",null,[bt,c(k,null,{default:b(()=>[c(p(N),{modelValue:d.value,"onUpdate:modelValue":s[6]||(s[6]=i=>d.value=i),title:"上传远程图片",width:"30%",onClose:Fa},{footer:b(()=>[E("span",Et,[c(p(I),{onClick:s[5]||(s[5]=i=>d.value=!1)},{default:b(()=>[T("关闭")]),_:1}),c(p(I),{type:"primary",onClick:Da},{default:b(()=>[T("上传")]),_:1})])]),default:b(()=>[c(p(Pa),{ref_key:"remoteFormRef",ref:f,model:t.value,"label-width":l,rules:h},{default:b(()=>[c(p(M),{label:"URL 链接",prop:"url"},{default:b(()=>[c(p($),{modelValue:t.value.url,"onUpdate:modelValue":s[0]||(s[0]=i=>t.value.url=i)},null,8,["modelValue"])]),_:1}),c(p(M),{label:"描述",prop:"describe"},{default:b(()=>[c(p($),{modelValue:t.value.describe,"onUpdate:modelValue":s[1]||(s[1]=i=>t.value.describe=i)},null,8,["modelValue"])]),_:1}),c(p(M),{label:"图片标题",prop:"imgTitle"},{default:b(()=>[c(p($),{modelValue:t.value.imgTitle,"onUpdate:modelValue":s[2]||(s[2]=i=>t.value.imgTitle=i)},null,8,["modelValue"])]),_:1}),c(p(M),{label:"图片宽度",prop:"imgWidth"},{default:b(()=>[c(p($),{modelValue:t.value.imgWidth,"onUpdate:modelValue":s[3]||(s[3]=i=>t.value.imgWidth=i)},null,8,["modelValue"])]),_:1}),c(p(M),{label:"图片高度",prop:"imgHeight"},{default:b(()=>[c(p($),{modelValue:t.value.imgHeight,"onUpdate:modelValue":s[4]||(s[4]=i=>t.value.imgHeight=i)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1}),c(k,null,{default:b(()=>[c(p(N),{modelValue:D.value,"onUpdate:modelValue":s[8]||(s[8]=i=>D.value=i),title:"上传本地图片",width:"30%",onClose:_a},{footer:b(()=>[E("span",Ft,[c(p(I),{onClick:s[7]||(s[7]=i=>D.value=!1)},{default:b(()=>[T("关闭")]),_:1}),c(p(I),{type:"primary",onClick:Ca},{default:b(()=>[T("上传")]),_:1})])]),default:b(()=>[c(p(g),{ref_key:"dropzoneRef",ref:F,id:S,options:u,cos:!1,extraButton:"裁剪图片",onVdropzoneExtraButton:xa},null,512)]),_:1},8,["modelValue"])]),_:1}),c(k,null,{default:b(()=>[c(p(N),{modelValue:C.value,"onUpdate:modelValue":s[11]||(s[11]=i=>C.value=i),title:"裁剪图片",width:"50%",onClose:Aa},{footer:b(()=>[E("span",xt,[c(p(I),{onClick:s[10]||(s[10]=i=>C.value=!1)},{default:b(()=>[T("关闭")]),_:1}),c(p(I),{type:"primary",onClick:Sa},{default:b(()=>[T("确认")]),_:1})])]),default:b(()=>{var i;return[E("div",Dt,[c(p(ga),{class:"cropper",ref_key:"cropperRef",ref:x,img:A.value.dataURL,autoCrop:!0,canMove:!1,canScale:!1,outputSize:y.value,onRealTime:wa},null,8,["img","outputSize"]),E("div",_t,[E("img",{src:U.value},null,8,Ct)]),E("div",null,[T(" 输出质量 "),c(p(za),{modelValue:y.value,"onUpdate:modelValue":s[9]||(s[9]=R=>y.value=R),min:.1,max:1,step:.1},null,8,["modelValue","min","step"]),E("div",null,"文件原本大小："+ta((A.value.size/1024).toFixed(1))+" kb",1),E("div",null,"文件输出大小："+ta(((((i=w.value)==null?void 0:i.size)||0)/1024).toFixed(1))+" kb",1)])])]}),_:1},8,["modelValue"])]),_:1}),c(gt,{modelValue:e.value,"onUpdate:modelValue":s[12]||(s[12]=i=>e.value=i),ref_key:"editorRef",ref:n,onOpenImage:ba,onOpenMedia:Ea},null,8,["modelValue"]),At,St,wt,c(sa,{type:"mobile",srcdoc:p(o)},null,8,["srcdoc"]),kt,Tt,Vt,c(sa,{type:"mobile",srcdoc:p(r)},null,8,["srcdoc"]),Bt])}}});const Pt=G(Rt,[["__scopeId","data-v-ada5faf0"]]);export{$t as __pageData,Pt as default};
