import{af as getDefaultExportFromCjs,d as defineComponent,r as ref,D as computed,e as onMounted,i as onBeforeUnmount,o as openBlock,c as createElementBlock,f as createBaseVNode,Q as renderSlot,s as createTextVNode,j as createCommentVNode,n as normalizeClass,t as toDisplayString,a as createStaticVNode,_ as _export_sfc}from"../app.17fb9f66.js";import{g as getCookie,U as USER_TOKEN_KEY,s as service}from"./request.8ec2588f.js";import"./url.bf17ea7d.js";import"./progressBar.ffec08eb.js";const dropzone="";var objectExtend=extend;function extend(){var o=[].slice.call(arguments),i=!1;typeof o[0]=="boolean"&&(i=o.shift());var t=o[0];if(isUnextendable(t))throw new Error("extendee must be an object");for(var r=o.slice(1),e=r.length,T=0;T<e;T++){var m=r[T];for(var w in m)if(Object.prototype.hasOwnProperty.call(m,w)){var B=m[w];if(i&&isCloneable(B)){var k=Array.isArray(B)?[]:{};t[w]=extend(!0,Object.prototype.hasOwnProperty.call(t,w)&&!isUnextendable(t[w])?t[w]:k,B)}else t[w]=B}}return t}function isCloneable(o){return Array.isArray(o)||{}.toString.call(o)=="[object Object]"}function isUnextendable(o){return!o||typeof o!="object"&&typeof o!="function"}function $parcel$interopDefault(o){return o&&o.__esModule?o.default:o}class $4040acfd8584338d$export$2e2bcd8739ae039{on(i,t){return this._callbacks=this._callbacks||{},this._callbacks[i]||(this._callbacks[i]=[]),this._callbacks[i].push(t),this}emit(i,...t){this._callbacks=this._callbacks||{};let r=this._callbacks[i];if(r)for(let e of r)e.apply(this,t);return this.element&&this.element.dispatchEvent(this.makeEvent("dropzone:"+i,{args:t})),this}makeEvent(i,t){let r={bubbles:!0,cancelable:!0,detail:t};if(typeof window.CustomEvent=="function")return new CustomEvent(i,r);var e=document.createEvent("CustomEvent");return e.initCustomEvent(i,r.bubbles,r.cancelable,r.detail),e}off(i,t){if(!this._callbacks||arguments.length===0)return this._callbacks={},this;let r=this._callbacks[i];if(!r)return this;if(arguments.length===1)return delete this._callbacks[i],this;for(let e=0;e<r.length;e++)if(r[e]===t){r.splice(e,1);break}return this}}var $fd6031f88dce2e32$exports={};$fd6031f88dce2e32$exports=`<div class="dz-preview dz-file-preview">
  <div class="dz-image"><img data-dz-thumbnail=""></div>
  <div class="dz-details">
    <div class="dz-size"><span data-dz-size=""></span></div>
    <div class="dz-filename"><span data-dz-name=""></span></div>
  </div>
  <div class="dz-progress">
    <span class="dz-upload" data-dz-uploadprogress=""></span>
  </div>
  <div class="dz-error-message"><span data-dz-errormessage=""></span></div>
  <div class="dz-success-mark">
    <svg width="54" height="54" viewBox="0 0 54 54" fill="white" xmlns="http://www.w3.org/2000/svg">
      <path d="M10.2071 29.7929L14.2929 25.7071C14.6834 25.3166 15.3166 25.3166 15.7071 25.7071L21.2929 31.2929C21.6834 31.6834 22.3166 31.6834 22.7071 31.2929L38.2929 15.7071C38.6834 15.3166 39.3166 15.3166 39.7071 15.7071L43.7929 19.7929C44.1834 20.1834 44.1834 20.8166 43.7929 21.2071L22.7071 42.2929C22.3166 42.6834 21.6834 42.6834 21.2929 42.2929L10.2071 31.2071C9.81658 30.8166 9.81658 30.1834 10.2071 29.7929Z"></path>
    </svg>
  </div>
  <div class="dz-error-mark">
    <svg width="54" height="54" viewBox="0 0 54 54" fill="white" xmlns="http://www.w3.org/2000/svg">
      <path d="M26.2929 20.2929L19.2071 13.2071C18.8166 12.8166 18.1834 12.8166 17.7929 13.2071L13.2071 17.7929C12.8166 18.1834 12.8166 18.8166 13.2071 19.2071L20.2929 26.2929C20.6834 26.6834 20.6834 27.3166 20.2929 27.7071L13.2071 34.7929C12.8166 35.1834 12.8166 35.8166 13.2071 36.2071L17.7929 40.7929C18.1834 41.1834 18.8166 41.1834 19.2071 40.7929L26.2929 33.7071C26.6834 33.3166 27.3166 33.3166 27.7071 33.7071L34.7929 40.7929C35.1834 41.1834 35.8166 41.1834 36.2071 40.7929L40.7929 36.2071C41.1834 35.8166 41.1834 35.1834 40.7929 34.7929L33.7071 27.7071C33.3166 27.3166 33.3166 26.6834 33.7071 26.2929L40.7929 19.2071C41.1834 18.8166 41.1834 18.1834 40.7929 17.7929L36.2071 13.2071C35.8166 12.8166 35.1834 12.8166 34.7929 13.2071L27.7071 20.2929C27.3166 20.6834 26.6834 20.6834 26.2929 20.2929Z"></path>
    </svg>
  </div>
</div>
`;let $4ca367182776f80b$var$defaultOptions={url:null,method:"post",withCredentials:!1,timeout:null,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2097152,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,defaultHeaders:!0,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,disablePreviews:!1,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init(){},params(o,i,t){if(t)return{dzuuid:t.file.upload.uuid,dzchunkindex:t.index,dztotalfilesize:t.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:t.file.upload.totalChunkCount,dzchunkbyteoffset:t.index*this.options.chunkSize}},accept(o,i){return i()},chunksUploaded:function(o,i){i()},binaryBody:!1,fallback(){let o;this.element.className=`${this.element.className} dz-browser-not-supported`;for(let t of this.element.getElementsByTagName("div"))if(/(^| )dz-message($| )/.test(t.className)){o=t,t.className="dz-message";break}o||(o=$3ed269f2f0fb224b$export$2e2bcd8739ae039.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(o));let i=o.getElementsByTagName("span")[0];return i&&(i.textContent!=null?i.textContent=this.options.dictFallbackMessage:i.innerText!=null&&(i.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize(o,i,t,r){let e={srcX:0,srcY:0,srcWidth:o.width,srcHeight:o.height},T=o.width/o.height;i==null&&t==null?(i=e.srcWidth,t=e.srcHeight):i==null?i=t*T:t==null&&(t=i/T),i=Math.min(i,e.srcWidth),t=Math.min(t,e.srcHeight);let m=i/t;if(e.srcWidth>i||e.srcHeight>t)if(r==="crop")T>m?(e.srcHeight=o.height,e.srcWidth=e.srcHeight*m):(e.srcWidth=o.width,e.srcHeight=e.srcWidth/m);else if(r==="contain")T>m?t=i/T:i=t*T;else throw new Error(`Unknown resizeMethod '${r}'`);return e.srcX=(o.width-e.srcWidth)/2,e.srcY=(o.height-e.srcHeight)/2,e.trgWidth=i,e.trgHeight=t,e},transformFile(o,i){return(this.options.resizeWidth||this.options.resizeHeight)&&o.type.match(/image.*/)?this.resizeImage(o,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,i):i(o)},previewTemplate:$parcel$interopDefault($fd6031f88dce2e32$exports),drop(o){return this.element.classList.remove("dz-drag-hover")},dragstart(o){},dragend(o){return this.element.classList.remove("dz-drag-hover")},dragenter(o){return this.element.classList.add("dz-drag-hover")},dragover(o){return this.element.classList.add("dz-drag-hover")},dragleave(o){return this.element.classList.remove("dz-drag-hover")},paste(o){},reset(){return this.element.classList.remove("dz-started")},addedfile(o){if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer&&!this.options.disablePreviews){o.previewElement=$3ed269f2f0fb224b$export$2e2bcd8739ae039.createElement(this.options.previewTemplate.trim()),o.previewTemplate=o.previewElement,this.previewsContainer.appendChild(o.previewElement);for(var i of o.previewElement.querySelectorAll("[data-dz-name]"))i.textContent=o.name;for(i of o.previewElement.querySelectorAll("[data-dz-size]"))i.innerHTML=this.filesize(o.size);this.options.addRemoveLinks&&(o._removeLink=$3ed269f2f0fb224b$export$2e2bcd8739ae039.createElement(`<a class="dz-remove" href="javascript:undefined;" data-dz-remove>${this.options.dictRemoveFile}</a>`),o.previewElement.appendChild(o._removeLink));let t=r=>(r.preventDefault(),r.stopPropagation(),o.status===$3ed269f2f0fb224b$export$2e2bcd8739ae039.UPLOADING?$3ed269f2f0fb224b$export$2e2bcd8739ae039.confirm(this.options.dictCancelUploadConfirmation,()=>this.removeFile(o)):this.options.dictRemoveFileConfirmation?$3ed269f2f0fb224b$export$2e2bcd8739ae039.confirm(this.options.dictRemoveFileConfirmation,()=>this.removeFile(o)):this.removeFile(o));for(let r of o.previewElement.querySelectorAll("[data-dz-remove]"))r.addEventListener("click",t)}},removedfile(o){return o.previewElement!=null&&o.previewElement.parentNode!=null&&o.previewElement.parentNode.removeChild(o.previewElement),this._updateMaxFilesReachedClass()},thumbnail(o,i){if(o.previewElement){o.previewElement.classList.remove("dz-file-preview");for(let t of o.previewElement.querySelectorAll("[data-dz-thumbnail]"))t.alt=o.name,t.src=i;return setTimeout(()=>o.previewElement.classList.add("dz-image-preview"),1)}},error(o,i){if(o.previewElement){o.previewElement.classList.add("dz-error"),typeof i!="string"&&i.error&&(i=i.error);for(let t of o.previewElement.querySelectorAll("[data-dz-errormessage]"))t.textContent=i}},errormultiple(){},processing(o){if(o.previewElement&&(o.previewElement.classList.add("dz-processing"),o._removeLink))return o._removeLink.innerHTML=this.options.dictCancelUpload},processingmultiple(){},uploadprogress(o,i,t){if(o.previewElement)for(let r of o.previewElement.querySelectorAll("[data-dz-uploadprogress]"))r.nodeName==="PROGRESS"?r.value=i:r.style.width=`${i}%`},totaluploadprogress(){},sending(){},sendingmultiple(){},success(o){if(o.previewElement)return o.previewElement.classList.add("dz-success")},successmultiple(){},canceled(o){return this.emit("error",o,this.options.dictUploadCanceled)},canceledmultiple(){},complete(o){if(o._removeLink&&(o._removeLink.innerHTML=this.options.dictRemoveFile),o.previewElement)return o.previewElement.classList.add("dz-complete")},completemultiple(){},maxfilesexceeded(){},maxfilesreached(){},queuecomplete(){},addedfiles(){}};var $4ca367182776f80b$export$2e2bcd8739ae039=$4ca367182776f80b$var$defaultOptions;class $3ed269f2f0fb224b$export$2e2bcd8739ae039 extends $4040acfd8584338d$export$2e2bcd8739ae039{static initClass(){this.prototype.Emitter=$4040acfd8584338d$export$2e2bcd8739ae039,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}getAcceptedFiles(){return this.files.filter(i=>i.accepted).map(i=>i)}getRejectedFiles(){return this.files.filter(i=>!i.accepted).map(i=>i)}getFilesWithStatus(i){return this.files.filter(t=>t.status===i).map(t=>t)}getQueuedFiles(){return this.getFilesWithStatus($3ed269f2f0fb224b$export$2e2bcd8739ae039.QUEUED)}getUploadingFiles(){return this.getFilesWithStatus($3ed269f2f0fb224b$export$2e2bcd8739ae039.UPLOADING)}getAddedFiles(){return this.getFilesWithStatus($3ed269f2f0fb224b$export$2e2bcd8739ae039.ADDED)}getActiveFiles(){return this.files.filter(i=>i.status===$3ed269f2f0fb224b$export$2e2bcd8739ae039.UPLOADING||i.status===$3ed269f2f0fb224b$export$2e2bcd8739ae039.QUEUED).map(i=>i)}init(){if(this.element.tagName==="form"&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild($3ed269f2f0fb224b$export$2e2bcd8739ae039.createElement(`<div class="dz-default dz-message"><button class="dz-button" type="button">${this.options.dictDefaultMessage}</button></div>`)),this.clickableElements.length){let r=()=>{this.hiddenFileInput&&this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=document.createElement("input"),this.hiddenFileInput.setAttribute("type","file"),(this.options.maxFiles===null||this.options.maxFiles>1)&&this.hiddenFileInput.setAttribute("multiple","multiple"),this.hiddenFileInput.className="dz-hidden-input",this.options.acceptedFiles!==null&&this.hiddenFileInput.setAttribute("accept",this.options.acceptedFiles),this.options.capture!==null&&this.hiddenFileInput.setAttribute("capture",this.options.capture),this.hiddenFileInput.setAttribute("tabindex","-1"),this.hiddenFileInput.style.visibility="hidden",this.hiddenFileInput.style.position="absolute",this.hiddenFileInput.style.top="0",this.hiddenFileInput.style.left="0",this.hiddenFileInput.style.height="0",this.hiddenFileInput.style.width="0",$3ed269f2f0fb224b$export$2e2bcd8739ae039.getElement(this.options.hiddenInputContainer,"hiddenInputContainer").appendChild(this.hiddenFileInput),this.hiddenFileInput.addEventListener("change",()=>{let{files:e}=this.hiddenFileInput;if(e.length)for(let T of e)this.addFile(T);this.emit("addedfiles",e),r()})};r()}this.URL=window.URL!==null?window.URL:window.webkitURL;for(let r of this.events)this.on(r,this.options[r]);this.on("uploadprogress",()=>this.updateTotalUploadProgress()),this.on("removedfile",()=>this.updateTotalUploadProgress()),this.on("canceled",r=>this.emit("complete",r)),this.on("complete",r=>{if(this.getAddedFiles().length===0&&this.getUploadingFiles().length===0&&this.getQueuedFiles().length===0)return setTimeout(()=>this.emit("queuecomplete"),0)});const i=function(r){if(r.dataTransfer.types){for(var e=0;e<r.dataTransfer.types.length;e++)if(r.dataTransfer.types[e]==="Files")return!0}return!1};let t=function(r){if(i(r))return r.stopPropagation(),r.preventDefault?r.preventDefault():r.returnValue=!1};return this.listeners=[{element:this.element,events:{dragstart:r=>this.emit("dragstart",r),dragenter:r=>(t(r),this.emit("dragenter",r)),dragover:r=>{let e;try{e=r.dataTransfer.effectAllowed}catch{}return r.dataTransfer.dropEffect=e==="move"||e==="linkMove"?"move":"copy",t(r),this.emit("dragover",r)},dragleave:r=>this.emit("dragleave",r),drop:r=>(t(r),this.drop(r)),dragend:r=>this.emit("dragend",r)}}],this.clickableElements.forEach(r=>this.listeners.push({element:r,events:{click:e=>((r!==this.element||e.target===this.element||$3ed269f2f0fb224b$export$2e2bcd8739ae039.elementInside(e.target,this.element.querySelector(".dz-message")))&&this.hiddenFileInput.click(),!0)}})),this.enable(),this.options.init.call(this)}destroy(){return this.disable(),this.removeAllFiles(!0),this.hiddenFileInput!=null&&this.hiddenFileInput.parentNode&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,$3ed269f2f0fb224b$export$2e2bcd8739ae039.instances.splice($3ed269f2f0fb224b$export$2e2bcd8739ae039.instances.indexOf(this),1)}updateTotalUploadProgress(){let i,t=0,r=0;if(this.getActiveFiles().length){for(let T of this.getActiveFiles())t+=T.upload.bytesSent,r+=T.upload.total;i=100*t/r}else i=100;return this.emit("totaluploadprogress",i,r,t)}_getParamName(i){return typeof this.options.paramName=="function"?this.options.paramName(i):`${this.options.paramName}${this.options.uploadMultiple?`[${i}]`:""}`}_renameFile(i){return typeof this.options.renameFile!="function"?i.name:this.options.renameFile(i)}getFallbackForm(){let i,t;if(i=this.getExistingFallback())return i;let r='<div class="dz-fallback">';this.options.dictFallbackText&&(r+=`<p>${this.options.dictFallbackText}</p>`),r+=`<input type="file" name="${this._getParamName(0)}" ${this.options.uploadMultiple?'multiple="multiple"':void 0} /><input type="submit" value="Upload!"></div>`;let e=$3ed269f2f0fb224b$export$2e2bcd8739ae039.createElement(r);return this.element.tagName!=="FORM"?(t=$3ed269f2f0fb224b$export$2e2bcd8739ae039.createElement(`<form action="${this.options.url}" enctype="multipart/form-data" method="${this.options.method}"></form>`),t.appendChild(e)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),t??e}getExistingFallback(){let i=function(r){for(let e of r)if(/(^| )fallback($| )/.test(e.className))return e};for(let r of["div","form"]){var t;if(t=i(this.element.getElementsByTagName(r)))return t}}setupEventListeners(){return this.listeners.map(i=>(()=>{let t=[];for(let r in i.events){let e=i.events[r];t.push(i.element.addEventListener(r,e,!1))}return t})())}removeEventListeners(){return this.listeners.map(i=>(()=>{let t=[];for(let r in i.events){let e=i.events[r];t.push(i.element.removeEventListener(r,e,!1))}return t})())}disable(){return this.clickableElements.forEach(i=>i.classList.remove("dz-clickable")),this.removeEventListeners(),this.disabled=!0,this.files.map(i=>this.cancelUpload(i))}enable(){return delete this.disabled,this.clickableElements.forEach(i=>i.classList.add("dz-clickable")),this.setupEventListeners()}filesize(i){let t=0,r="b";if(i>0){let e=["tb","gb","mb","kb","b"];for(let T=0;T<e.length;T++){let m=e[T],w=Math.pow(this.options.filesizeBase,4-T)/10;if(i>=w){t=i/Math.pow(this.options.filesizeBase,4-T),r=m;break}}t=Math.round(10*t)/10}return`<strong>${t}</strong> ${this.options.dictFileSizeUnits[r]}`}_updateMaxFilesReachedClass(){return this.options.maxFiles!=null&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}drop(i){if(!i.dataTransfer)return;this.emit("drop",i);let t=[];for(let r=0;r<i.dataTransfer.files.length;r++)t[r]=i.dataTransfer.files[r];if(t.length){let{items:r}=i.dataTransfer;r&&r.length&&r[0].webkitGetAsEntry!=null?this._addFilesFromItems(r):this.handleFiles(t)}this.emit("addedfiles",t)}paste(i){if($3ed269f2f0fb224b$var$__guard__(i!=null?i.clipboardData:void 0,r=>r.items)==null)return;this.emit("paste",i);let{items:t}=i.clipboardData;if(t.length)return this._addFilesFromItems(t)}handleFiles(i){for(let t of i)this.addFile(t)}_addFilesFromItems(i){return(()=>{let t=[];for(let e of i){var r;e.webkitGetAsEntry!=null&&(r=e.webkitGetAsEntry())?r.isFile?t.push(this.addFile(e.getAsFile())):r.isDirectory?t.push(this._addFilesFromDirectory(r,r.name)):t.push(void 0):e.getAsFile!=null&&(e.kind==null||e.kind==="file")?t.push(this.addFile(e.getAsFile())):t.push(void 0)}return t})()}_addFilesFromDirectory(i,t){let r=i.createReader(),e=m=>$3ed269f2f0fb224b$var$__guardMethod__(console,"log",w=>w.log(m));var T=()=>r.readEntries(m=>{if(m.length>0){for(let w of m)w.isFile?w.file(B=>{if(!(this.options.ignoreHiddenFiles&&B.name.substring(0,1)==="."))return B.fullPath=`${t}/${B.name}`,this.addFile(B)}):w.isDirectory&&this._addFilesFromDirectory(w,`${t}/${w.name}`);T()}return null},e);return T()}accept(i,t){this.options.maxFilesize&&i.size>this.options.maxFilesize*1048576?t(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(i.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):$3ed269f2f0fb224b$export$2e2bcd8739ae039.isValidFile(i,this.options.acceptedFiles)?this.options.maxFiles!=null&&this.getAcceptedFiles().length>=this.options.maxFiles?(t(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",i)):this.options.accept.call(this,i,t):t(this.options.dictInvalidFileType)}addFile(i){i.upload={uuid:$3ed269f2f0fb224b$export$2e2bcd8739ae039.uuidv4(),progress:0,total:i.size,bytesSent:0,filename:this._renameFile(i)},this.files.push(i),i.status=$3ed269f2f0fb224b$export$2e2bcd8739ae039.ADDED,this.emit("addedfile",i),this._enqueueThumbnail(i),this.accept(i,t=>{t?(i.accepted=!1,this._errorProcessing([i],t)):(i.accepted=!0,this.options.autoQueue&&this.enqueueFile(i)),this._updateMaxFilesReachedClass()})}enqueueFiles(i){for(let t of i)this.enqueueFile(t);return null}enqueueFile(i){if(i.status===$3ed269f2f0fb224b$export$2e2bcd8739ae039.ADDED&&i.accepted===!0){if(i.status=$3ed269f2f0fb224b$export$2e2bcd8739ae039.QUEUED,this.options.autoProcessQueue)return setTimeout(()=>this.processQueue(),0)}else throw new Error("This file can't be queued because it has already been processed or was rejected.")}_enqueueThumbnail(i){if(this.options.createImageThumbnails&&i.type.match(/image.*/)&&i.size<=this.options.maxThumbnailFilesize*1048576)return this._thumbnailQueue.push(i),setTimeout(()=>this._processThumbnailQueue(),0)}_processThumbnailQueue(){if(this._processingThumbnail||this._thumbnailQueue.length===0)return;this._processingThumbnail=!0;let i=this._thumbnailQueue.shift();return this.createThumbnail(i,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,t=>(this.emit("thumbnail",i,t),this._processingThumbnail=!1,this._processThumbnailQueue()))}removeFile(i){if(i.status===$3ed269f2f0fb224b$export$2e2bcd8739ae039.UPLOADING&&this.cancelUpload(i),this.files=$3ed269f2f0fb224b$var$without(this.files,i),this.emit("removedfile",i),this.files.length===0)return this.emit("reset")}removeAllFiles(i){i==null&&(i=!1);for(let t of this.files.slice())(t.status!==$3ed269f2f0fb224b$export$2e2bcd8739ae039.UPLOADING||i)&&this.removeFile(t);return null}resizeImage(i,t,r,e,T){return this.createThumbnail(i,t,r,e,!0,(m,w)=>{if(w==null)return T(i);{let{resizeMimeType:B}=this.options;B==null&&(B=i.type);let k=w.toDataURL(B,this.options.resizeQuality);return(B==="image/jpeg"||B==="image/jpg")&&(k=$3ed269f2f0fb224b$var$ExifRestore.restore(i.dataURL,k)),T($3ed269f2f0fb224b$export$2e2bcd8739ae039.dataURItoBlob(k))}})}createThumbnail(i,t,r,e,T,m){let w=new FileReader;w.onload=()=>{if(i.dataURL=w.result,i.type==="image/svg+xml"){m!=null&&m(w.result);return}this.createThumbnailFromUrl(i,t,r,e,T,m)},w.readAsDataURL(i)}displayExistingFile(i,t,r,e,T=!0){if(this.emit("addedfile",i),this.emit("complete",i),!T)this.emit("thumbnail",i,t),r&&r();else{let m=w=>{this.emit("thumbnail",i,w),r&&r()};i.dataURL=t,this.createThumbnailFromUrl(i,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,this.options.fixOrientation,m,e)}}createThumbnailFromUrl(i,t,r,e,T,m,w){let B=document.createElement("img");return w&&(B.crossOrigin=w),T=getComputedStyle(document.body).imageOrientation=="from-image"?!1:T,B.onload=()=>{let k=R=>R(1);return typeof EXIF<"u"&&EXIF!==null&&T&&(k=R=>EXIF.getData(B,function(){return R(EXIF.getTag(this,"Orientation"))})),k(R=>{i.width=B.width,i.height=B.height;let D=this.options.resize.call(this,i,t,r,e),L=document.createElement("canvas"),z=L.getContext("2d");switch(L.width=D.trgWidth,L.height=D.trgHeight,R>4&&(L.width=D.trgHeight,L.height=D.trgWidth),R){case 2:z.translate(L.width,0),z.scale(-1,1);break;case 3:z.translate(L.width,L.height),z.rotate(Math.PI);break;case 4:z.translate(0,L.height),z.scale(1,-1);break;case 5:z.rotate(.5*Math.PI),z.scale(1,-1);break;case 6:z.rotate(.5*Math.PI),z.translate(0,-L.width);break;case 7:z.rotate(.5*Math.PI),z.translate(L.height,-L.width),z.scale(-1,1);break;case 8:z.rotate(-.5*Math.PI),z.translate(-L.height,0);break}$3ed269f2f0fb224b$var$drawImageIOSFix(z,B,D.srcX!=null?D.srcX:0,D.srcY!=null?D.srcY:0,D.srcWidth,D.srcHeight,D.trgX!=null?D.trgX:0,D.trgY!=null?D.trgY:0,D.trgWidth,D.trgHeight);let j=L.toDataURL("image/png");if(m!=null)return m(j,L)})},m!=null&&(B.onerror=m),B.src=i.dataURL}processQueue(){let{parallelUploads:i}=this.options,t=this.getUploadingFiles().length,r=t;if(t>=i)return;let e=this.getQueuedFiles();if(e.length>0){if(this.options.uploadMultiple)return this.processFiles(e.slice(0,i-t));for(;r<i;){if(!e.length)return;this.processFile(e.shift()),r++}}}processFile(i){return this.processFiles([i])}processFiles(i){for(let t of i)t.processing=!0,t.status=$3ed269f2f0fb224b$export$2e2bcd8739ae039.UPLOADING,this.emit("processing",t);return this.options.uploadMultiple&&this.emit("processingmultiple",i),this.uploadFiles(i)}_getFilesWithXhr(i){return this.files.filter(t=>t.xhr===i).map(t=>t)}cancelUpload(i){if(i.status===$3ed269f2f0fb224b$export$2e2bcd8739ae039.UPLOADING){let t=this._getFilesWithXhr(i.xhr);for(let r of t)r.status=$3ed269f2f0fb224b$export$2e2bcd8739ae039.CANCELED;typeof i.xhr<"u"&&i.xhr.abort();for(let r of t)this.emit("canceled",r);this.options.uploadMultiple&&this.emit("canceledmultiple",t)}else(i.status===$3ed269f2f0fb224b$export$2e2bcd8739ae039.ADDED||i.status===$3ed269f2f0fb224b$export$2e2bcd8739ae039.QUEUED)&&(i.status=$3ed269f2f0fb224b$export$2e2bcd8739ae039.CANCELED,this.emit("canceled",i),this.options.uploadMultiple&&this.emit("canceledmultiple",[i]));if(this.options.autoProcessQueue)return this.processQueue()}resolveOption(i,...t){return typeof i=="function"?i.apply(this,t):i}uploadFile(i){return this.uploadFiles([i])}uploadFiles(i){this._transformFiles(i,t=>{if(this.options.chunking){let r=t[0];i[0].upload.chunked=this.options.chunking&&(this.options.forceChunking||r.size>this.options.chunkSize),i[0].upload.totalChunkCount=Math.ceil(r.size/this.options.chunkSize)}if(i[0].upload.chunked){let r=i[0],e=t[0];r.upload.chunks=[];let T=()=>{let m=0;for(;r.upload.chunks[m]!==void 0;)m++;if(m>=r.upload.totalChunkCount)return;let w=m*this.options.chunkSize,B=Math.min(w+this.options.chunkSize,e.size),k={name:this._getParamName(0),data:e.webkitSlice?e.webkitSlice(w,B):e.slice(w,B),filename:r.upload.filename,chunkIndex:m};r.upload.chunks[m]={file:r,index:m,dataBlock:k,status:$3ed269f2f0fb224b$export$2e2bcd8739ae039.UPLOADING,progress:0,retries:0},this._uploadData(i,[k])};if(r.upload.finishedChunkUpload=(m,w)=>{let B=!0;m.status=$3ed269f2f0fb224b$export$2e2bcd8739ae039.SUCCESS,m.dataBlock=null,m.response=m.xhr.responseText,m.responseHeaders=m.xhr.getAllResponseHeaders(),m.xhr=null;for(let k=0;k<r.upload.totalChunkCount;k++){if(r.upload.chunks[k]===void 0)return T();r.upload.chunks[k].status!==$3ed269f2f0fb224b$export$2e2bcd8739ae039.SUCCESS&&(B=!1)}B&&this.options.chunksUploaded(r,()=>{this._finished(i,w,null)})},this.options.parallelChunkUploads)for(let m=0;m<r.upload.totalChunkCount;m++)T();else T()}else{let r=[];for(let e=0;e<i.length;e++)r[e]={name:this._getParamName(e),data:t[e],filename:i[e].upload.filename};this._uploadData(i,r)}})}_getChunk(i,t){for(let r=0;r<i.upload.totalChunkCount;r++)if(i.upload.chunks[r]!==void 0&&i.upload.chunks[r].xhr===t)return i.upload.chunks[r]}_uploadData(i,t){let r=new XMLHttpRequest;for(let k of i)k.xhr=r;i[0].upload.chunked&&(i[0].upload.chunks[t[0].chunkIndex].xhr=r);let e=this.resolveOption(this.options.method,i,t),T=this.resolveOption(this.options.url,i,t);r.open(e,T,!0),this.resolveOption(this.options.timeout,i)&&(r.timeout=this.resolveOption(this.options.timeout,i)),r.withCredentials=!!this.options.withCredentials,r.onload=k=>{this._finishedUploading(i,r,k)},r.ontimeout=()=>{this._handleUploadError(i,r,`Request timedout after ${this.options.timeout/1e3} seconds`)},r.onerror=()=>{this._handleUploadError(i,r)};let w=r.upload!=null?r.upload:r;w.onprogress=k=>this._updateFilesUploadProgress(i,r,k);let B=this.options.defaultHeaders?{Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"}:{};this.options.binaryBody&&(B["Content-Type"]=i[0].type),this.options.headers&&objectExtend(B,this.options.headers);for(let k in B){let R=B[k];R&&r.setRequestHeader(k,R)}if(this.options.binaryBody){for(let k of i)this.emit("sending",k,r);this.options.uploadMultiple&&this.emit("sendingmultiple",i,r),this.submitRequest(r,null,i)}else{let k=new FormData;if(this.options.params){let R=this.options.params;typeof R=="function"&&(R=R.call(this,i,r,i[0].upload.chunked?this._getChunk(i[0],r):null));for(let D in R){let L=R[D];if(Array.isArray(L))for(let z=0;z<L.length;z++)k.append(D,L[z]);else k.append(D,L)}}for(let R of i)this.emit("sending",R,r,k);this.options.uploadMultiple&&this.emit("sendingmultiple",i,r,k),this._addFormElementData(k);for(let R=0;R<t.length;R++){let D=t[R];k.append(D.name,D.data,D.filename)}this.submitRequest(r,k,i)}}_transformFiles(i,t){let r=[],e=0;for(let T=0;T<i.length;T++)this.options.transformFile.call(this,i[T],m=>{r[T]=m,++e===i.length&&t(r)})}_addFormElementData(i){if(this.element.tagName==="FORM")for(let t of this.element.querySelectorAll("input, textarea, select, button")){let r=t.getAttribute("name"),e=t.getAttribute("type");if(e&&(e=e.toLowerCase()),!(typeof r>"u"||r===null))if(t.tagName==="SELECT"&&t.hasAttribute("multiple"))for(let T of t.options)T.selected&&i.append(r,T.value);else(!e||e!=="checkbox"&&e!=="radio"||t.checked)&&i.append(r,t.value)}}_updateFilesUploadProgress(i,t,r){if(i[0].upload.chunked){let e=i[0],T=this._getChunk(e,t);r?(T.progress=100*r.loaded/r.total,T.total=r.total,T.bytesSent=r.loaded):(T.progress=100,T.bytesSent=T.total),e.upload.progress=0,e.upload.total=0,e.upload.bytesSent=0;for(let m=0;m<e.upload.totalChunkCount;m++)e.upload.chunks[m]&&typeof e.upload.chunks[m].progress<"u"&&(e.upload.progress+=e.upload.chunks[m].progress,e.upload.total+=e.upload.chunks[m].total,e.upload.bytesSent+=e.upload.chunks[m].bytesSent);e.upload.progress=e.upload.progress/e.upload.totalChunkCount,this.emit("uploadprogress",e,e.upload.progress,e.upload.bytesSent)}else for(let e of i)e.upload.total&&e.upload.bytesSent&&e.upload.bytesSent==e.upload.total||(r?(e.upload.progress=100*r.loaded/r.total,e.upload.total=r.total,e.upload.bytesSent=r.loaded):(e.upload.progress=100,e.upload.bytesSent=e.upload.total),this.emit("uploadprogress",e,e.upload.progress,e.upload.bytesSent))}_finishedUploading(i,t,r){let e;if(i[0].status!==$3ed269f2f0fb224b$export$2e2bcd8739ae039.CANCELED&&t.readyState===4){if(t.responseType!=="arraybuffer"&&t.responseType!=="blob"&&(e=t.responseText,t.getResponseHeader("content-type")&&~t.getResponseHeader("content-type").indexOf("application/json")))try{e=JSON.parse(e)}catch(T){r=T,e="Invalid JSON response from server."}this._updateFilesUploadProgress(i,t),200<=t.status&&t.status<300?i[0].upload.chunked?i[0].upload.finishedChunkUpload(this._getChunk(i[0],t),e):this._finished(i,e,r):this._handleUploadError(i,t,e)}}_handleUploadError(i,t,r){if(i[0].status!==$3ed269f2f0fb224b$export$2e2bcd8739ae039.CANCELED){if(i[0].upload.chunked&&this.options.retryChunks){let e=this._getChunk(i[0],t);if(e.retries++<this.options.retryChunksLimit){this._uploadData(i,[e.dataBlock]);return}else console.warn("Retried this chunk too often. Giving up.")}this._errorProcessing(i,r||this.options.dictResponseError.replace("{{statusCode}}",t.status),t)}}submitRequest(i,t,r){if(i.readyState!=1){console.warn("Cannot send this request because the XMLHttpRequest.readyState is not OPENED.");return}if(this.options.binaryBody)if(r[0].upload.chunked){const e=this._getChunk(r[0],i);i.send(e.dataBlock.data)}else i.send(r[0]);else i.send(t)}_finished(i,t,r){for(let e of i)e.status=$3ed269f2f0fb224b$export$2e2bcd8739ae039.SUCCESS,this.emit("success",e,t,r),this.emit("complete",e);if(this.options.uploadMultiple&&(this.emit("successmultiple",i,t,r),this.emit("completemultiple",i)),this.options.autoProcessQueue)return this.processQueue()}_errorProcessing(i,t,r){for(let e of i)e.status=$3ed269f2f0fb224b$export$2e2bcd8739ae039.ERROR,this.emit("error",e,t,r),this.emit("complete",e);if(this.options.uploadMultiple&&(this.emit("errormultiple",i,t,r),this.emit("completemultiple",i)),this.options.autoProcessQueue)return this.processQueue()}static uuidv4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){let t=Math.random()*16|0;return(i==="x"?t:t&3|8).toString(16)})}constructor(i,t){super();let r,e;if(this.element=i,this.clickableElements=[],this.listeners=[],this.files=[],typeof this.element=="string"&&(this.element=document.querySelector(this.element)),!this.element||this.element.nodeType==null)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");$3ed269f2f0fb224b$export$2e2bcd8739ae039.instances.push(this),this.element.dropzone=this;let T=(e=$3ed269f2f0fb224b$export$2e2bcd8739ae039.optionsForElement(this.element))!=null?e:{};if(this.options=objectExtend(!0,{},$4ca367182776f80b$export$2e2bcd8739ae039,T,t??{}),this.options.previewTemplate=this.options.previewTemplate.replace(/\n*/g,""),this.options.forceFallback||!$3ed269f2f0fb224b$export$2e2bcd8739ae039.isBrowserSupported())return this.options.fallback.call(this);if(this.options.url==null&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(this.options.uploadMultiple&&this.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");if(this.options.binaryBody&&this.options.uploadMultiple)throw new Error("You cannot set both: binaryBody and uploadMultiple.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.renameFilename!=null&&(this.options.renameFile=m=>this.options.renameFilename.call(this,m.name,m)),typeof this.options.method=="string"&&(this.options.method=this.options.method.toUpperCase()),(r=this.getExistingFallback())&&r.parentNode&&r.parentNode.removeChild(r),this.options.previewsContainer!==!1&&(this.options.previewsContainer?this.previewsContainer=$3ed269f2f0fb224b$export$2e2bcd8739ae039.getElement(this.options.previewsContainer,"previewsContainer"):this.previewsContainer=this.element),this.options.clickable&&(this.options.clickable===!0?this.clickableElements=[this.element]:this.clickableElements=$3ed269f2f0fb224b$export$2e2bcd8739ae039.getElements(this.options.clickable,"clickable")),this.init()}}$3ed269f2f0fb224b$export$2e2bcd8739ae039.initClass();$3ed269f2f0fb224b$export$2e2bcd8739ae039.options={};$3ed269f2f0fb224b$export$2e2bcd8739ae039.optionsForElement=function(o){if(o.getAttribute("id"))return $3ed269f2f0fb224b$export$2e2bcd8739ae039.options[$3ed269f2f0fb224b$var$camelize(o.getAttribute("id"))]};$3ed269f2f0fb224b$export$2e2bcd8739ae039.instances=[];$3ed269f2f0fb224b$export$2e2bcd8739ae039.forElement=function(o){if(typeof o=="string"&&(o=document.querySelector(o)),(o!=null?o.dropzone:void 0)==null)throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return o.dropzone};$3ed269f2f0fb224b$export$2e2bcd8739ae039.discover=function(){let o;if(document.querySelectorAll)o=document.querySelectorAll(".dropzone");else{o=[];let i=t=>(()=>{let r=[];for(let e of t)/(^| )dropzone($| )/.test(e.className)?r.push(o.push(e)):r.push(void 0);return r})();i(document.getElementsByTagName("div")),i(document.getElementsByTagName("form"))}return(()=>{let i=[];for(let t of o)$3ed269f2f0fb224b$export$2e2bcd8739ae039.optionsForElement(t)!==!1?i.push(new $3ed269f2f0fb224b$export$2e2bcd8739ae039(t)):i.push(void 0);return i})()};$3ed269f2f0fb224b$export$2e2bcd8739ae039.blockedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i];$3ed269f2f0fb224b$export$2e2bcd8739ae039.isBrowserSupported=function(){let o=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if(!("classList"in document.createElement("a")))o=!1;else{$3ed269f2f0fb224b$export$2e2bcd8739ae039.blacklistedBrowsers!==void 0&&($3ed269f2f0fb224b$export$2e2bcd8739ae039.blockedBrowsers=$3ed269f2f0fb224b$export$2e2bcd8739ae039.blacklistedBrowsers);for(let i of $3ed269f2f0fb224b$export$2e2bcd8739ae039.blockedBrowsers)if(i.test(navigator.userAgent)){o=!1;continue}}else o=!1;return o};$3ed269f2f0fb224b$export$2e2bcd8739ae039.dataURItoBlob=function(o){let i=atob(o.split(",")[1]),t=o.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(i.length),e=new Uint8Array(r);for(let T=0,m=i.length,w=0<=m;w?T<=m:T>=m;w?T++:T--)e[T]=i.charCodeAt(T);return new Blob([r],{type:t})};const $3ed269f2f0fb224b$var$without=(o,i)=>o.filter(t=>t!==i).map(t=>t),$3ed269f2f0fb224b$var$camelize=o=>o.replace(/[\-_](\w)/g,i=>i.charAt(1).toUpperCase());$3ed269f2f0fb224b$export$2e2bcd8739ae039.createElement=function(o){let i=document.createElement("div");return i.innerHTML=o,i.childNodes[0]};$3ed269f2f0fb224b$export$2e2bcd8739ae039.elementInside=function(o,i){if(o===i)return!0;for(;o=o.parentNode;)if(o===i)return!0;return!1};$3ed269f2f0fb224b$export$2e2bcd8739ae039.getElement=function(o,i){let t;if(typeof o=="string"?t=document.querySelector(o):o.nodeType!=null&&(t=o),t==null)throw new Error(`Invalid \`${i}\` option provided. Please provide a CSS selector or a plain HTML element.`);return t};$3ed269f2f0fb224b$export$2e2bcd8739ae039.getElements=function(o,i){let t,r;if(o instanceof Array){r=[];try{for(t of o)r.push(this.getElement(t,i))}catch{r=null}}else if(typeof o=="string"){r=[];for(t of document.querySelectorAll(o))r.push(t)}else o.nodeType!=null&&(r=[o]);if(r==null||!r.length)throw new Error(`Invalid \`${i}\` option provided. Please provide a CSS selector, a plain HTML element or a list of those.`);return r};$3ed269f2f0fb224b$export$2e2bcd8739ae039.confirm=function(o,i,t){if(window.confirm(o))return i();if(t!=null)return t()};$3ed269f2f0fb224b$export$2e2bcd8739ae039.isValidFile=function(o,i){if(!i)return!0;i=i.split(",");let t=o.type,r=t.replace(/\/.*$/,"");for(let e of i)if(e=e.trim(),e.charAt(0)==="."){if(o.name.toLowerCase().indexOf(e.toLowerCase(),o.name.length-e.length)!==-1)return!0}else if(/\/\*$/.test(e)){if(r===e.replace(/\/.*$/,""))return!0}else if(t===e)return!0;return!1};typeof jQuery<"u"&&jQuery!==null&&(jQuery.fn.dropzone=function(o){return this.each(function(){return new $3ed269f2f0fb224b$export$2e2bcd8739ae039(this,o)})});$3ed269f2f0fb224b$export$2e2bcd8739ae039.ADDED="added";$3ed269f2f0fb224b$export$2e2bcd8739ae039.QUEUED="queued";$3ed269f2f0fb224b$export$2e2bcd8739ae039.ACCEPTED=$3ed269f2f0fb224b$export$2e2bcd8739ae039.QUEUED;$3ed269f2f0fb224b$export$2e2bcd8739ae039.UPLOADING="uploading";$3ed269f2f0fb224b$export$2e2bcd8739ae039.PROCESSING=$3ed269f2f0fb224b$export$2e2bcd8739ae039.UPLOADING;$3ed269f2f0fb224b$export$2e2bcd8739ae039.CANCELED="canceled";$3ed269f2f0fb224b$export$2e2bcd8739ae039.ERROR="error";$3ed269f2f0fb224b$export$2e2bcd8739ae039.SUCCESS="success";let $3ed269f2f0fb224b$var$detectVerticalSquash=function(o){o.naturalWidth;let i=o.naturalHeight,t=document.createElement("canvas");t.width=1,t.height=i;let r=t.getContext("2d");r.drawImage(o,0,0);let{data:e}=r.getImageData(1,0,1,i),T=0,m=i,w=i;for(;w>T;)e[(w-1)*4+3]===0?m=w:T=w,w=m+T>>1;let B=w/i;return B===0?1:B};var $3ed269f2f0fb224b$var$drawImageIOSFix=function(o,i,t,r,e,T,m,w,B,k){let R=$3ed269f2f0fb224b$var$detectVerticalSquash(i);return o.drawImage(i,t,r,e,T,m,w,B,k/R)};class $3ed269f2f0fb224b$var$ExifRestore{static initClass(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}static encode64(i){let t="",r,e,T="",m,w,B,k="",R=0;for(;r=i[R++],e=i[R++],T=i[R++],m=r>>2,w=(r&3)<<4|e>>4,B=(e&15)<<2|T>>6,k=T&63,isNaN(e)?B=k=64:isNaN(T)&&(k=64),t=t+this.KEY_STR.charAt(m)+this.KEY_STR.charAt(w)+this.KEY_STR.charAt(B)+this.KEY_STR.charAt(k),r=e=T="",m=w=B=k="",R<i.length;);return t}static restore(i,t){if(!i.match("data:image/jpeg;base64,"))return t;let r=this.decode64(i.replace("data:image/jpeg;base64,","")),e=this.slice2Segments(r),T=this.exifManipulation(t,e);return`data:image/jpeg;base64,${this.encode64(T)}`}static exifManipulation(i,t){let r=this.getExifArray(t),e=this.insertExif(i,r);return new Uint8Array(e)}static getExifArray(i){let t,r=0;for(;r<i.length;){if(t=i[r],t[0]===255&t[1]===225)return t;r++}return[]}static insertExif(i,t){let r=i.replace("data:image/jpeg;base64,",""),e=this.decode64(r),T=e.indexOf(255,3),m=e.slice(0,T),w=e.slice(T),B=m;return B=B.concat(t),B=B.concat(w),B}static slice2Segments(i){let t=0,r=[];for(;;){var e;if(i[t]===255&i[t+1]===218)break;if(i[t]===255&i[t+1]===216)t+=2;else{e=i[t+2]*256+i[t+3];let T=t+e+2,m=i.slice(t,T);r.push(m),t=T}if(t>i.length)break}return r}static decode64(i){let t,r,e="",T,m,w,B="",k=0,R=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(i)&&console.warn(`There were invalid base64 characters in the input text.
Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='
Expect errors in decoding.`),i=i.replace(/[^A-Za-z0-9\+\/\=]/g,"");T=this.KEY_STR.indexOf(i.charAt(k++)),m=this.KEY_STR.indexOf(i.charAt(k++)),w=this.KEY_STR.indexOf(i.charAt(k++)),B=this.KEY_STR.indexOf(i.charAt(k++)),t=T<<2|m>>4,r=(m&15)<<4|w>>2,e=(w&3)<<6|B,R.push(t),w!==64&&R.push(r),B!==64&&R.push(e),t=r=e="",T=m=w=B="",k<i.length;);return R}}$3ed269f2f0fb224b$var$ExifRestore.initClass();function $3ed269f2f0fb224b$var$__guard__(o,i){return typeof o<"u"&&o!==null?i(o):void 0}function $3ed269f2f0fb224b$var$__guardMethod__(o,i,t){if(typeof o<"u"&&o!==null&&typeof o[i]=="function")return t(o,i)}var cosJsSdkV5Exports={},cosJsSdkV5={get exports(){return cosJsSdkV5Exports},set exports(o){cosJsSdkV5Exports=o}};(function(module,exports){(function(i,t){module.exports=t()})(self,function(){return function(o){var i={};function t(r){if(i[r])return i[r].exports;var e=i[r]={i:r,l:!1,exports:{}};return o[r].call(e.exports,e,e.exports,t),e.l=!0,e.exports}return t.m=o,t.c=i,t.d=function(r,e,T){t.o(r,e)||Object.defineProperty(r,e,{enumerable:!0,get:T})},t.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},t.t=function(r,e){if(e&1&&(r=t(r)),e&8||e&4&&typeof r=="object"&&r&&r.__esModule)return r;var T=Object.create(null);if(t.r(T),Object.defineProperty(T,"default",{enumerable:!0,value:r}),e&2&&typeof r!="string")for(var m in r)t.d(T,m,function(w){return r[w]}.bind(null,m));return T},t.n=function(r){var e=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(e,"a",e),e},t.o=function(r,e){return Object.prototype.hasOwnProperty.call(r,e)},t.p="/dist/",t(t.s="./index.js")}({"./index.js":function(o,i,t){var r=t("./src/cos.js");o.exports=r},"./lib/beacon.min.js":function(o,i,t){var r,e,T=t("./node_modules/@babel/runtime/helpers/typeof.js");(function(m,w){T(i)=="object"&&typeof o<"u"?o.exports=w():(r=w,e=typeof r=="function"?r.call(i,t,i,o):r,e!==void 0&&(o.exports=e))})(this,function(){var m=function(l,d){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,y){c.__proto__=y}||function(c,y){for(var A in y)Object.prototype.hasOwnProperty.call(y,A)&&(c[A]=y[A])},m(l,d)},w=function(){return w=Object.assign||function(l){for(var d,c=1,y=arguments.length;c<y;c++)for(var A in d=arguments[c])Object.prototype.hasOwnProperty.call(d,A)&&(l[A]=d[A]);return l},w.apply(this,arguments)};function B(g,l,d,c){return new(d||(d=Promise))(function(y,A){function F(ve){try{he(c.next(ve))}catch(ie){A(ie)}}function ee(ve){try{he(c.throw(ve))}catch(ie){A(ie)}}function he(ve){var ie;ve.done?y(ve.value):(ie=ve.value,ie instanceof d?ie:new d(function(Pe){Pe(ie)})).then(F,ee)}he((c=c.apply(g,l||[])).next())})}function k(g,l){var d,c,y,A,F={label:0,sent:function(){if(1&y[0])throw y[1];return y[1]},trys:[],ops:[]};return A={next:ee(0),throw:ee(1),return:ee(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function ee(he){return function(ve){return function(ie){if(d)throw new TypeError("Generator is already executing.");for(;F;)try{if(d=1,c&&(y=2&ie[0]?c.return:ie[0]?c.throw||((y=c.return)&&y.call(c),0):c.next)&&!(y=y.call(c,ie[1])).done)return y;switch(c=0,y&&(ie=[2&ie[0],y.value]),ie[0]){case 0:case 1:y=ie;break;case 4:return F.label++,{value:ie[1],done:!1};case 5:F.label++,c=ie[1],ie=[0];continue;case 7:ie=F.ops.pop(),F.trys.pop();continue;default:if(y=F.trys,!((y=y.length>0&&y[y.length-1])||ie[0]!==6&&ie[0]!==2)){F=0;continue}if(ie[0]===3&&(!y||ie[1]>y[0]&&ie[1]<y[3])){F.label=ie[1];break}if(ie[0]===6&&F.label<y[1]){F.label=y[1],y=ie;break}if(y&&F.label<y[2]){F.label=y[2],F.ops.push(ie);break}y[2]&&F.ops.pop(),F.trys.pop();continue}ie=l.call(g,F)}catch(Pe){ie=[6,Pe],c=0}finally{d=y=0}if(5&ie[0])throw ie[1];return{value:ie[0]?ie[1]:void 0,done:!0}}([he,ve])}}}var R="__BEACON_",D="__BEACON_deviceId",L="last_report_time",z="sending_event_ids",j="beacon_config",q="beacon_config_request_time",te=function(){function g(){var l=this;this.emit=function(d,c){if(l){var y,A=l.__EventsList[d];if(A!=null&&A.length){A=A.slice();for(var F=0;F<A.length;F++){y=A[F];try{var ee=y.callback.apply(l,[c]);if(y.type===1&&l.remove(d,y.callback),ee===!1)break}catch(he){throw he}}}return l}},this.__EventsList={}}return g.prototype.indexOf=function(l,d){for(var c=0;c<l.length;c++)if(l[c].callback===d)return c;return-1},g.prototype.on=function(l,d,c){if(c===void 0&&(c=0),this){var y=this.__EventsList[l];if(y||(y=this.__EventsList[l]=[]),this.indexOf(y,d)===-1){var A={name:l,type:c||0,callback:d};return y.push(A),this}return this}},g.prototype.one=function(l,d){this.on(l,d,1)},g.prototype.remove=function(l,d){if(this){var c=this.__EventsList[l];if(!c)return null;if(!d){try{delete this.__EventsList[l]}catch{}return null}if(c.length){var y=this.indexOf(c,d);c.splice(y,1)}return this}},g}();function X(g,l){for(var d={},c=0,y=Object.keys(g);c<y.length;c++){var A=y[c],F=g[A];if(typeof F=="string")d[de(A)]=de(F);else{if(l)throw new Error("value mast be string  !!!!");d[de(String(A))]=de(String(F))}}return d}function de(g){if(typeof g!="string")return g;try{return g.replace(new RegExp("\\|","g"),"%7C").replace(new RegExp("\\&","g"),"%26").replace(new RegExp("\\=","g"),"%3D").replace(new RegExp("\\+","g"),"%2B")}catch{return""}}function U(g){return String(g.A99)+String(g.A100)}var S=function(){},u=function(){function g(l){var d=this;this.lifeCycle=new te,this.uploadJobQueue=[],this.additionalParams={},this.delayTime=0,this._normalLogPipeline=function(c){if(!c||!c.reduce||!c.length)throw new TypeError("createPipeline 方法需要传入至少有一个 pipe 的数组");return c.length===1?function(y,A){c[0](y,A||S)}:c.reduce(function(y,A){return function(F,ee){return ee===void 0&&(ee=S),y(F,function(he){return A==null?void 0:A(he,ee)})}})}([function(c){d.send({url:d.strategy.getUploadUrl(),data:c,method:"post",contentType:"application/json;charset=UTF-8"},function(){var y=d.config.onReportSuccess;typeof y=="function"&&y(JSON.stringify(c.events))},function(){var y=d.config.onReportFail;typeof y=="function"&&y(JSON.stringify(c.events))})}]),function(c,y){if(!c)throw y instanceof Error?y:new Error(y)}(Boolean(l.appkey),"appkey must be initial"),this.config=w({},l)}return g.prototype.onUserAction=function(l,d){this.preReport(l,d,!1)},g.prototype.onDirectUserAction=function(l,d){this.preReport(l,d,!0)},g.prototype.preReport=function(l,d,c){l?this.strategy.isEventUpOnOff()&&(this.strategy.isBlackEvent(l)||this.strategy.isSampleEvent(l)||this.onReport(l,d,c)):this.errorReport.reportError("602"," no eventCode")},g.prototype.addAdditionalParams=function(l){for(var d=0,c=Object.keys(l);d<c.length;d++){var y=c[d];this.additionalParams[y]=l[y]}},g.prototype.setChannelId=function(l){this.commonInfo.channelID=String(l)},g.prototype.setOpenId=function(l){this.commonInfo.openid=String(l)},g.prototype.setUnionid=function(l){this.commonInfo.unid=String(l)},g.prototype.getDeviceId=function(){return this.commonInfo.deviceId},g.prototype.getCommonInfo=function(){return this.commonInfo},g.prototype.removeSendingId=function(l){try{var d=JSON.parse(this.storage.getItem(z)),c=d.indexOf(l);c!=-1&&(d.splice(c,1),this.storage.setItem(z,JSON.stringify(d)))}catch{}},g}(),P=function(){function g(l,d,c,y){this.requestParams={},this.network=y,this.requestParams.attaid="00400014144",this.requestParams.token="6478159937",this.requestParams.product_id=l.appkey,this.requestParams.platform=c,this.requestParams.uin=d.deviceId,this.requestParams.model="",this.requestParams.os=c,this.requestParams.app_version=l.appVersion,this.requestParams.sdk_version=d.sdkVersion,this.requestParams.error_stack="",this.uploadUrl=l.isOversea?"https://htrace.wetvinfo.com/kv":"https://h.trace.qq.com/kv"}return g.prototype.reportError=function(l,d){this.requestParams._dc=Math.random(),this.requestParams.error_msg=d,this.requestParams.error_code=l,this.network.get(this.uploadUrl,{params:this.requestParams}).catch(function(c){})},g}(),p=function(){function g(l,d,c,y,A){this.strategy={isEventUpOnOff:!0,httpsUploadUrl:"https://otheve.beacon.qq.com/analytics/v2_upload",requestInterval:30,blacklist:[],samplelist:[]},this.realSample={},this.appkey="",this.needQueryConfig=!0,this.appkey=d.appkey,this.storage=y,this.needQueryConfig=l;try{var F=JSON.parse(this.storage.getItem(j));F&&this.processData(F)}catch{}d.isOversea&&(this.strategy.httpsUploadUrl="https://svibeacon.onezapp.com/analytics/v2_upload"),!d.isOversea&&this.needRequestConfig()&&this.requestConfig(d.appVersion,c,A)}return g.prototype.requestConfig=function(l,d,c){var y=this;this.storage.setItem(q,Date.now().toString()),c.post("https://oth.str.beacon.qq.com/trpc.beacon.configserver.BeaconConfigService/QueryConfig",{platformId:typeof wx>"u"?"3":"4",mainAppKey:this.appkey,appVersion:l,sdkVersion:d.sdkVersion,osVersion:d.userAgent,model:"",packageName:"",params:{A3:d.deviceId}}).then(function(A){if(A.data.ret==0)try{var F=JSON.parse(A.data.beaconConfig);F&&(y.processData(F),y.storage.setItem(j,A.data.beaconConfig))}catch{}else y.processData(null),y.storage.setItem(j,"")}).catch(function(A){})},g.prototype.processData=function(l){var d,c,y,A,F;this.strategy.isEventUpOnOff=(d=l==null?void 0:l.isEventUpOnOff)!==null&&d!==void 0?d:this.strategy.isEventUpOnOff,this.strategy.httpsUploadUrl=(c=l==null?void 0:l.httpsUploadUrl)!==null&&c!==void 0?c:this.strategy.httpsUploadUrl,this.strategy.requestInterval=(y=l==null?void 0:l.requestInterval)!==null&&y!==void 0?y:this.strategy.requestInterval,this.strategy.blacklist=(A=l==null?void 0:l.blacklist)!==null&&A!==void 0?A:this.strategy.blacklist,this.strategy.samplelist=(F=l==null?void 0:l.samplelist)!==null&&F!==void 0?F:this.strategy.samplelist;for(var ee=0,he=this.strategy.samplelist;ee<he.length;ee++){var ve=he[ee].split(",");ve.length==2&&(this.realSample[ve[0]]=ve[1])}},g.prototype.needRequestConfig=function(){if(!this.needQueryConfig)return!1;var l=Number(this.storage.getItem(q));return Date.now()-l>60*this.strategy.requestInterval*1e3},g.prototype.getUploadUrl=function(){return this.strategy.httpsUploadUrl+"?appkey="+this.appkey},g.prototype.isBlackEvent=function(l){return this.strategy.blacklist.indexOf(l)!=-1},g.prototype.isEventUpOnOff=function(){return this.strategy.isEventUpOnOff},g.prototype.isSampleEvent=function(l){return!!Object.prototype.hasOwnProperty.call(this.realSample,l)&&this.realSample[l]<Math.floor(Math.random()*Math.floor(1e4))},g}(),N="session_storage_key",H=function(){function g(l,d,c){this.getSessionStackDepth=0,this.beacon=c,this.storage=l,this.duration=d,this.appkey=c.config.appkey}return g.prototype.getSession=function(){this.getSessionStackDepth+=1;var l=this.storage.getItem(N);if(!l)return this.createSession();var d="",c=0;try{var y=JSON.parse(l)||{sessionId:void 0,sessionStart:void 0};if(!y.sessionId||!y.sessionStart)return this.createSession();var A=Number(this.storage.getItem(L));if(Date.now()-A>this.duration)return this.createSession();d=y.sessionId,c=y.sessionStart,this.getSessionStackDepth=0}catch{}return{sessionId:d,sessionStart:c}},g.prototype.createSession=function(){var l=Date.now(),d={sessionId:this.appkey+"_"+l.toString(),sessionStart:l};this.storage.setItem(N,JSON.stringify(d)),this.storage.setItem(L,l.toString());var c="is_new_user",y=this.storage.getItem(c);return this.getSessionStackDepth<=1&&this.beacon.onDirectUserAction("rqd_applaunched",{A21:y?"N":"Y"}),this.storage.setItem(c,JSON.stringify(!1)),d},g}();function G(){var g=navigator.userAgent,l=g.indexOf("compatible")>-1&&g.indexOf("MSIE")>-1,d=g.indexOf("Edge")>-1&&!l,c=g.indexOf("Trident")>-1&&g.indexOf("rv:11.0")>-1;if(l){new RegExp("MSIE (\\d+\\.\\d+);").test(g);var y=parseFloat(RegExp.$1);return y==7?7:y==8?8:y==9?9:y==10?10:6}return d?-2:c?11:-1}function oe(g,l){var d,c;return(d="https://tun-cos-1258344701.file.myqcloud.com/fp.js",c===void 0&&(c=Date.now()+"-"+Math.random()),new Promise(function(y,A){if(document.getElementById(c))y(void 0);else{var F=document.getElementsByTagName("head")[0],ee=document.createElement("script");ee.onload=function(){return function(){ee.onload=null,y(void 0)}},ee.onerror=function(he){ee.onerror=null,F.removeChild(ee),A(he)},ee.src=d,ee.id=c,F.appendChild(ee)}})).then(function(){new Fingerprint().getQimei36(g,l)}).catch(function(y){}),""}var I=function(){return(I=Object.assign||function(l){for(var d,c=1,y=arguments.length;c<y;c++)for(var A in d=arguments[c])Object.prototype.hasOwnProperty.call(d,A)&&(l[A]=d[A]);return l}).apply(this,arguments)},V,Q=function(){function g(l,d){d===void 0&&(d={}),this.reportOptions={},this.config=l,this.reportOptions=d}return g.canUseDB=function(){return!!(window!=null&&window.indexedDB)},g.prototype.openDB=function(){var l=this;return new Promise(function(d,c){if(!g.canUseDB())return c({message:"当前不支持 indexeddb"});var y=l.config,A=y.name,F=y.version,ee=y.stores,he=indexedDB.open(A,F);he.onsuccess=function(){l.db=he.result,d(),I({result:1,func:"open",params:JSON.stringify(l.config)},l.reportOptions)},he.onerror=function(ve){var ie,Pe;c(ve),I({result:0,func:"open",params:JSON.stringify(l.config),error_msg:(Pe=(ie=ve.target)===null||ie===void 0?void 0:ie.error)===null||Pe===void 0?void 0:Pe.message},l.reportOptions)},he.onupgradeneeded=function(){l.db=he.result;try{ee==null||ee.forEach(function(ve){l.createStore(ve)})}catch(ve){I({result:0,func:"open",params:JSON.stringify(l.config),error_msg:ve.message},l.reportOptions),c(ve)}}})},g.prototype.useStore=function(l){return this.storeName=l,this},g.prototype.deleteDB=function(){var l=this;return this.closeDB(),new Promise(function(d,c){var y=indexedDB.deleteDatabase(l.config.name);y.onsuccess=function(){return d()},y.onerror=c})},g.prototype.closeDB=function(){var l;(l=this.db)===null||l===void 0||l.close(),this.db=null},g.prototype.getStoreCount=function(){var l=this;return new Promise(function(d,c){var y=l.getStore("readonly").count();y.onsuccess=function(){return d(y.result)},y.onerror=c})},g.prototype.clearStore=function(){var l=this;return new Promise(function(d,c){var y=l.getStore("readwrite").clear();y.onsuccess=function(){return d()},y.onerror=c})},g.prototype.add=function(l,d){var c=this;return new Promise(function(y,A){var F=c.getStore("readwrite").add(l,d);F.onsuccess=function(){y(F.result)},F.onerror=A})},g.prototype.put=function(l,d){var c=this;return new Promise(function(y,A){var F=c.getStore("readwrite").put(l,d);F.onsuccess=function(){y(F.result)},F.onerror=A})},g.prototype.getStoreAllData=function(){var l=this;return new Promise(function(d,c){var y=l.getStore("readonly").openCursor(),A=[];y.onsuccess=function(){var F;if(!((F=y.result)===null||F===void 0)&&F.value){var ee=y.result.value;A.push(ee),y.result.continue()}else d(A)},y.onerror=c})},g.prototype.getDataRangeByIndex=function(l,d,c,y,A){var F=this;return new Promise(function(ee,he){var ve=F.getStore().index(l),ie=IDBKeyRange.bound(d,c,y,A),Pe=[],xe=ve.openCursor(ie);xe.onsuccess=function(){var Fe;!((Fe=xe==null?void 0:xe.result)===null||Fe===void 0)&&Fe.value?(Pe.push(xe==null?void 0:xe.result.value),xe==null||xe.result.continue()):ee(Pe)},xe.onerror=he})},g.prototype.removeDataByIndex=function(l,d,c,y,A){var F=this;return new Promise(function(ee,he){var ve=F.getStore("readwrite").index(l),ie=IDBKeyRange.bound(d,c,y,A),Pe=ve.openCursor(ie),xe=0;Pe.onsuccess=function(Fe){var Ne=Fe.target.result;Ne?(xe+=1,Ne.delete(),Ne.continue()):ee(xe)},Pe.onerror=he})},g.prototype.createStore=function(l){var d=l.name,c=l.indexes,y=c===void 0?[]:c,A=l.options;if(this.db){this.db.objectStoreNames.contains(d)&&this.db.deleteObjectStore(d);var F=this.db.createObjectStore(d,A);y.forEach(function(ee){F.createIndex(ee.indexName,ee.keyPath,ee.options)})}},g.prototype.getStore=function(l){var d;return l===void 0&&(l="readonly"),(d=this.db)===null||d===void 0?void 0:d.transaction(this.storeName,l).objectStore(this.storeName)},g}(),W="event_table_v3",Z="eventId",se=function(){function g(l){this.isReady=!1,this.taskQueue=Promise.resolve(),this.db=new Q({name:"Beacon_"+l+"_V3",version:1,stores:[{name:W,options:{keyPath:Z},indexes:[{indexName:Z,keyPath:Z,options:{unique:!0}}]}]}),this.open()}return g.prototype.getCount=function(){var l=this;return this.readyExec(function(){return l.db.getStoreCount()})},g.prototype.setItem=function(l,d){var c=this;return this.readyExec(function(){return c.db.add({eventId:l,value:d})})},g.prototype.getItem=function(l){return B(this,void 0,void 0,function(){var d=this;return k(this,function(c){return[2,this.readyExec(function(){return d.db.getDataRangeByIndex(Z,l,l)})]})})},g.prototype.removeItem=function(l){var d=this;return this.readyExec(function(){return d.db.removeDataByIndex(Z,l,l)})},g.prototype.updateItem=function(l,d){var c=this;return this.readyExec(function(){return c.db.put({eventId:l,value:d})})},g.prototype.iterate=function(l){var d=this;return this.readyExec(function(){return d.db.getStoreAllData().then(function(c){c.forEach(function(y){l(y.value)})})})},g.prototype.open=function(){return B(this,void 0,void 0,function(){var l=this;return k(this,function(d){switch(d.label){case 0:return this.taskQueue=this.taskQueue.then(function(){return l.db.openDB()}),[4,this.taskQueue];case 1:return d.sent(),this.isReady=!0,this.db.useStore(W),[2]}})})},g.prototype.readyExec=function(l){return this.isReady?l():(this.taskQueue=this.taskQueue.then(function(){return l()}),this.taskQueue)},g}(),ce=function(){function g(l){this.keyObject={},this.storage=l}return g.prototype.getCount=function(){return this.storage.getStoreCount()},g.prototype.removeItem=function(l){this.storage.removeItem(l),delete this.keyObject[l]},g.prototype.setItem=function(l,d){var c=JSON.stringify(d);this.storage.setItem(l,c),this.keyObject[l]=d},g.prototype.iterate=function(l){for(var d=Object.keys(this.keyObject),c=0;c<d.length;c++){var y=this.storage.getItem(d[c]);l(JSON.parse(y))}},g}(),ue=function(){function g(l,d){var c=this;this.dbEventCount=0,G()>0||!window.indexedDB||/X5Lite/.test(navigator.userAgent)?(this.store=new ce(d),this.dbEventCount=this.store.getCount()):(this.store=new se(l),this.getCount().then(function(y){c.dbEventCount=y}).catch(function(y){}))}return g.prototype.getCount=function(){return B(this,void 0,void 0,function(){return k(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,this.store.getCount()];case 1:return[2,l.sent()];case 2:return l.sent(),[2,Promise.reject()];case 3:return[2]}})})},g.prototype.insertEvent=function(l,d){return B(this,void 0,void 0,function(){var c,y;return k(this,function(A){switch(A.label){case 0:if(this.dbEventCount>=1e4)return[2,Promise.reject()];c=U(l.mapValue),A.label=1;case 1:return A.trys.push([1,3,,4]),this.dbEventCount++,[4,this.store.setItem(c,l)];case 2:return[2,A.sent()];case 3:return y=A.sent(),d&&d(y,l),this.dbEventCount--,[2,Promise.reject()];case 4:return[2]}})})},g.prototype.getEvents=function(){return B(this,void 0,void 0,function(){var l;return k(this,function(d){switch(d.label){case 0:l=[],d.label=1;case 1:return d.trys.push([1,3,,4]),[4,this.store.iterate(function(c){l.push(c)})];case 2:return d.sent(),[2,Promise.all(l)];case 3:return d.sent(),[2,Promise.all(l)];case 4:return[2]}})})},g.prototype.removeEvent=function(l){return B(this,void 0,void 0,function(){var d;return k(this,function(c){switch(c.label){case 0:d=U(l.mapValue),c.label=1;case 1:return c.trys.push([1,3,,4]),this.dbEventCount--,[4,this.store.removeItem(d)];case 2:return[2,c.sent()];case 3:return c.sent(),this.dbEventCount++,[2,Promise.reject()];case 4:return[2]}})})},g}(),ne=function(){return(ne=Object.assign||function(l){for(var d,c=1,y=arguments.length;c<y;c++)for(var A in d=arguments[c])Object.prototype.hasOwnProperty.call(d,A)&&(l[A]=d[A]);return l}).apply(this,arguments)};function fe(g){try{return decodeURIComponent(g.replace(/\+/g," "))}catch{return null}}function le(g,l){var d=[null,void 0,"",NaN].includes(g);if(l.isSkipEmpty&&d)return null;var c=!l.isSkipEmpty&&d?"":g;try{return l.encode?encodeURIComponent(c):c}catch{return null}}function ye(g,l){l===void 0&&(l={encode:!0,isSkipEmpty:!1});var d=g.url,c=g.query,y=c===void 0?{}:c,A=g.hash,F=d.split("#"),ee=F[0],he=F[1],ve=he===void 0?"":he,ie=ee.split("?")[0],Pe=[],xe=le(A||ve,l),Fe=ne(ne({},function(Ne){var je=Ne.split("#"),Ke=je[0],Ve=je[1],Ge=Ve===void 0?"":Ve,He=Ke.split("?"),qe=He[0],Qe=He[1],it=Qe===void 0?"":Qe,Ze=fe(Ge),Xe=Object.create(null);return it.split("&").forEach(function(a){var h=a.split("="),E=h[0],K=h[1],M=K===void 0?"":K,Ie=fe(E),Ue=fe(M);Ie===null||Ue===null||Ie===""&&Ue===""||Xe[Ie]||(Xe[Ie]=Ue)}),{url:qe,query:Xe,hash:Ze}}(d).query),y);return Object.keys(Fe).forEach(function(Ne){var je=le(Ne,l),Ke=le(Fe[Ne],l);je!==null&&Ke!==null&&Pe.push(je+"="+Ke)}),ie+(Pe.length?"?"+Pe.join("&"):"")+(xe?"#"+xe:"")}function J(g,l){return new Promise(function(d,c){if(l&&document.querySelectorAll("script[data-tag="+l+"]").length)return d();var y=document.createElement("script"),A=ne({type:"text/javascript",charset:"utf-8"},g);Object.keys(A).forEach(function(F){return function(ee,he,ve){if(ee)return ve===void 0?ee.getAttribute(he):ee.setAttribute(he,ve)}(y,F,A[F])}),l&&(y.dataset.tag=l),y.onload=function(){return d()},y.onreadystatechange=function(){var F=y.readyState;["complete","loaded"].includes(F)&&(y.onreadystatechange=null,d())},y.onerror=c,document.body.appendChild(y)})}(function(g){g[g.equal=0]="equal",g[g.low=-1]="low",g[g.high=1]="high"})(V||(V={}));var re=function(){return(re=Object.assign||function(l){for(var d,c=1,y=arguments.length;c<y;c++)for(var A in d=arguments[c])Object.prototype.hasOwnProperty.call(d,A)&&(l[A]=d[A]);return l}).apply(this,arguments)};function pe(g,l,d,c){return new(d||(d=Promise))(function(y,A){function F(ve){try{he(c.next(ve))}catch(ie){A(ie)}}function ee(ve){try{he(c.throw(ve))}catch(ie){A(ie)}}function he(ve){var ie;ve.done?y(ve.value):(ie=ve.value,ie instanceof d?ie:new d(function(Pe){Pe(ie)})).then(F,ee)}he((c=c.apply(g,l||[])).next())})}function Ce(g,l){var d,c,y,A,F={label:0,sent:function(){if(1&y[0])throw y[1];return y[1]},trys:[],ops:[]};return A={next:ee(0),throw:ee(1),return:ee(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function ee(he){return function(ve){return function(ie){if(d)throw new TypeError("Generator is already executing.");for(;F;)try{if(d=1,c&&(y=2&ie[0]?c.return:ie[0]?c.throw||((y=c.return)&&y.call(c),0):c.next)&&!(y=y.call(c,ie[1])).done)return y;switch(c=0,y&&(ie=[2&ie[0],y.value]),ie[0]){case 0:case 1:y=ie;break;case 4:return F.label++,{value:ie[1],done:!1};case 5:F.label++,c=ie[1],ie=[0];continue;case 7:ie=F.ops.pop(),F.trys.pop();continue;default:if(!((y=(y=F.trys).length>0&&y[y.length-1])||ie[0]!==6&&ie[0]!==2)){F=0;continue}if(ie[0]===3&&(!y||ie[1]>y[0]&&ie[1]<y[3])){F.label=ie[1];break}if(ie[0]===6&&F.label<y[1]){F.label=y[1],y=ie;break}if(y&&F.label<y[2]){F.label=y[2],F.ops.push(ie);break}y[2]&&F.ops.pop(),F.trys.pop();continue}ie=l.call(g,F)}catch(Pe){ie=[6,Pe],c=0}finally{d=y=0}if(5&ie[0])throw ie[1];return{value:ie[0]?ie[1]:void 0,done:!0}}([he,ve])}}}var ge=function(){function g(){this.interceptors=[]}return g.prototype.use=function(l,d){return this.interceptors.push({resolved:l,rejected:d}),this.interceptors.length-1},g.prototype.traverse=function(l,d){d===void 0&&(d=!1);var c=Promise.resolve(l);return(d?Array.prototype.reduceRight:Array.prototype.reduce).call(this.interceptors,function(y,A){if(A){var F=A.resolved,ee=A.rejected;c=c.then(F,ee)}return y},""),c},g.prototype.eject=function(l){this.interceptors[l]&&(this.interceptors[l]=null)},g}(),me={defaults:{timeout:0,method:"GET",mode:"cors",redirect:"follow",credentials:"same-origin"},headers:{common:{Accept:"application/json, text/plain, */*"},POST:{"Content-Type":"application/x-www-form-urlencoded"},PUT:{"Content-Type":"application/x-www-form-urlencoded"},PATCH:{"Content-Type":"application/x-www-form-urlencoded"}},baseURL:"",polyfillUrl:"https://vm.gtimg.cn/comps/script/fetch.min.js",interceptors:{request:new ge,response:new ge}},Se=/^([a-z][a-z\d+\-.]*:)?\/\//i,ke=Object.prototype.toString;function we(g){return pe(this,void 0,void 0,function(){var l;return Ce(this,function(d){switch(d.label){case 0:if(window.fetch)return[2];d.label=1;case 1:return d.trys.push([1,3,,4]),[4,J({src:g})];case 2:return d.sent(),[3,4];case 3:throw l=d.sent(),new Error("加载 polyfill "+g+" 失败: "+l.message);case 4:return[2]}})})}function Be(g){return["Accept","Content-Type"].forEach(function(l){return d=l,void((c=g.headers)&&Object.keys(c).forEach(function(y){y!==d&&y.toUpperCase()===d.toUpperCase()&&(c[d]=c[y],delete c[y])}));var d,c}),function(l){if(ke.call(l)!=="[object Object]")return!1;var d=Object.getPrototypeOf(l);return d===null||d===Object.prototype}(g.body)&&(g.body=JSON.stringify(g.body),g.headers&&(g.headers["Content-Type"]="application/json;charset=utf-8")),g}function Ae(g){return pe(this,void 0,void 0,function(){var l,d,c,y,A,F,ee,he,ve,ie,Pe,xe,Fe,Ne,je,Ke,Ve;return Ce(this,function(Ge){switch(Ge.label){case 0:return l=me.baseURL,d=me.defaults,c=me.interceptors,[4,we(me.polyfillUrl)];case 1:return Ge.sent(),(y=re(re({},d),g)).headers||(y.headers=function(He){He===void 0&&(He="GET");var qe=me.headers[He]||{};return re(re({},me.headers.common),qe)}(y.method)),Be(y),[4,c.request.traverse(y,!0)];case 2:if((A=Ge.sent())instanceof Error)throw A;return A.url=function(He,qe){return!He||Se.test(qe)?qe:He.replace(/\/+$/,"")+"/"+qe.replace(/^\/+/,"")}(l,A.url),F=A.url,ee=A.timeout,he=A.params,ve=A.method,ie=["GET","DELETE","OPTIONS","HEAD"].includes(ve===void 0?"GET":ve)&&!!he,Pe=ie?ye({url:F,query:he}):F,xe=[],ee&&!A.signal&&(je=new Promise(function(He){Fe=setTimeout(function(){He(new Error("timeout"))},ee)}),xe.push(je),Ne=new AbortController,A.signal=Ne.signal),xe.push(fetch(Pe,A).catch(function(He){return He})),[4,Promise.race(xe)];case 3:return Ke=Ge.sent(),Fe&&clearTimeout(Fe),[4,c.response.traverse(Ke)];case 4:if((Ve=Ge.sent())instanceof Error)throw Ne==null||Ne.abort(),Ve;return[2,Ve]}})})}var Oe=function(){function g(l){me.interceptors.request.use(function(d){var c=d.url,y=d.method,A=d.body,F=A;if(l.onReportBeforeSend){var ee=l.onReportBeforeSend({url:c,method:y,data:A?JSON.parse(A):null});F=ee!=null&&ee.data?JSON.stringify(ee.data):null}return y!="GET"&&F?w(w({},d),{body:F}):d})}return g.prototype.get=function(l,d){return B(this,void 0,void 0,function(){var c,y;return k(this,function(A){switch(A.label){case 0:return[4,Ae(w({url:l},d))];case 1:return[4,(c=A.sent()).json()];case 2:return y=A.sent(),[2,Promise.resolve({data:y,status:c.status,statusText:c.statusText,headers:c.headers})]}})})},g.prototype.post=function(l,d,c){return B(this,void 0,void 0,function(){var y,A;return k(this,function(F){switch(F.label){case 0:return[4,Ae(w({url:l,body:d,method:"POST"},c))];case 1:return[4,(y=F.sent()).json()];case 2:return A=F.sent(),[2,Promise.resolve({data:A,status:y.status,statusText:y.statusText,headers:y.headers})]}})})},g}(),ae=function(){function g(l){this.appkey=l}return g.prototype.getItem=function(l){try{return window.localStorage.getItem(this.getStoreKey(l))}catch{return""}},g.prototype.removeItem=function(l){try{window.localStorage.removeItem(this.getStoreKey(l))}catch{}},g.prototype.setItem=function(l,d){try{window.localStorage.setItem(this.getStoreKey(l),d)}catch{}},g.prototype.setSessionItem=function(l,d){try{window.sessionStorage.setItem(this.getStoreKey(l),d)}catch{}},g.prototype.getSessionItem=function(l){try{return window.sessionStorage.getItem(this.getStoreKey(l))}catch{return""}},g.prototype.getStoreKey=function(l){return R+this.appkey+"_"+l},g.prototype.createDeviceId=function(){try{var l=window.localStorage.getItem(D);return l||(l=function(d){for(var c="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz0123456789",y="",A=0;A<d;A++)y+=c.charAt(Math.floor(Math.random()*c.length));return y}(32),window.localStorage.setItem(D,l)),l}catch{return""}},g.prototype.clear=function(){try{for(var l=window.localStorage.length,d=0;d<l;d++){var c=window.localStorage.key(d);(c==null?void 0:c.substr(0,9))==R&&window.localStorage.removeItem(c)}}catch{}},g.prototype.getStoreCount=function(){var l=0;try{l=window.localStorage.length}catch{}return l},g}(),O="logid_start",$="4.5.14-web";return function(g){function l(d){var c=g.call(this,d)||this;c.qimei36="",c.uselessCycleTaskNum=0,c.underWeakNet=!1,c.pauseSearching=!1,c.send=function(ee,he,ve){c.storage.setItem(L,Date.now().toString()),c.network.post(c.uploadUrl||c.strategy.getUploadUrl(),ee.data).then(function(ie){var Pe;((Pe=ie==null?void 0:ie.data)===null||Pe===void 0?void 0:Pe.result)==100?c.delayTime=1e3*ie.data.delayTime:c.delayTime=0,he&&he(ee.data),ee.data.events.forEach(function(xe){c.store.removeEvent(xe).then(function(){c.removeSendingId(U(xe.mapValue))})}),c.doCustomCycleTask()}).catch(function(ie){var Pe=ee.data.events;c.errorReport.reportError(ie.code?ie.code.toString():"600",ie.message),ve&&ve(ee.data);var xe=JSON.parse(c.storage.getItem(z));Pe.forEach(function(Fe){xe&&xe.indexOf(U(Fe))!=-1&&c.store.insertEvent(Fe,function(Ne,je){Ne&&c.errorReport.reportError("604","insertEvent fail!")}),c.removeSendingId(U(Fe))}),c.monitorUploadFailed()})};var y,A,F=G();return c.isUnderIE8=F>0&&F<8,c.isUnderIE8||(c.isUnderIE=F>0,d.needInitQimei&&oe(d.appkey,function(ee){c.qimei36=ee.q36}),c.network=new Oe(d),c.storage=new ae(d.appkey),c.initCommonInfo(d),c.store=new ue(d.appkey,c.storage),c.errorReport=new P(c.config,c.commonInfo,"web",c.network),c.strategy=new p(d.needQueryConfig==null||d.needQueryConfig,c.config,c.commonInfo,c.storage,c.network),c.logidStartTime=c.storage.getItem(O),c.logidStartTime||(c.logidStartTime=Date.now().toString(),c.storage.setItem(O,c.logidStartTime)),y=c.logidStartTime,A=Date.now()-Number.parseFloat(y),Math.floor(A/864e5)>=365&&c.storage.clear(),c.initSession(d),c.onDirectUserAction("rqd_js_init",{}),setTimeout(function(){return c.lifeCycle.emit("init")},0),c.initDelayTime=d.delay?d.delay:1e3,c.cycleTask(c.initDelayTime)),c}return function(d,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function y(){this.constructor=d}m(d,c),d.prototype=c===null?Object.create(c):(y.prototype=c.prototype,new y)}(l,g),l.prototype.initSession=function(d){var c=18e5;d.sessionDuration&&d.sessionDuration>3e4&&(c=d.sessionDuration),this.beaconSession=new H(this.storage,c,this)},l.prototype.initCommonInfo=function(d){var c=Number(this.storage.getItem(L));try{var y=JSON.parse(this.storage.getItem(z));(Date.now()-c>3e4||!y)&&this.storage.setItem(z,JSON.stringify([]))}catch{}d.uploadUrl&&(this.uploadUrl=d.uploadUrl+"?appkey="+d.appkey);var A=[window.screen.width,window.screen.height];window.devicePixelRatio&&A.push(window.devicePixelRatio),this.commonInfo={deviceId:this.storage.createDeviceId(),language:navigator&&navigator.language||"zh_CN",query:window.location.search,userAgent:navigator.userAgent,pixel:A.join("*"),channelID:d.channelID?String(d.channelID):"",openid:d.openid?String(d.openid):"",unid:d.unionid?String(d.unionid):"",sdkVersion:$},this.config.appVersion=d.versionCode?String(d.versionCode):"",this.config.strictMode=d.strictMode},l.prototype.cycleTask=function(d){var c=this;this.intervalID=window.setInterval(function(){c.pauseSearching||c.store.getEvents().then(function(y){y.length==0&&(c.pauseSearching=!0);var A=[],F=JSON.parse(c.storage.getItem(z));F||(F=[]),y&&y.forEach(function(ee){var he=U(ee.mapValue);F.indexOf(he)==-1&&(A.push(ee),F.push(he))}),A.length!=0&&(c.storage.setItem(z,JSON.stringify(F)),c._normalLogPipeline(c.assembleData(A)))}).catch(function(y){})},d)},l.prototype.onReport=function(d,c,y){var A=this;if(this.isUnderIE8)this.errorReport.reportError("601","UnderIE8");else{this.pauseSearching=!1;var F=this.generateData(d,c,y);if(y&&this.delayTime==0&&!this.underWeakNet)this._normalLogPipeline(this.assembleData(F));else{var ee=F.shift();ee&&this.store.insertEvent(ee,function(he){he&&A.errorReport.reportError("604","insertEvent fail!")}).catch(function(he){A._normalLogPipeline(A.assembleData(F))})}}},l.prototype.onSendBeacon=function(d,c){if(this.isUnderIE)this.errorReport.reportError("605","UnderIE");else{this.pauseSearching=!1;var y=this.assembleData(this.generateData(d,c,!0));typeof navigator.sendBeacon=="function"&&navigator.sendBeacon(this.uploadUrl||this.strategy.getUploadUrl(),JSON.stringify(y))}},l.prototype.generateData=function(d,c,y){var A=[],F="4.5.14-web_"+(y?"direct_log_id":"normal_log_id"),ee=Number(this.storage.getItem(F));return ee=ee||1,c=w(w({},c),{A99:y?"Y":"N",A100:ee.toString(),A72:$,A88:this.logidStartTime}),ee++,this.storage.setItem(F,ee.toString()),A.push({eventCode:d,eventTime:Date.now().toString(),mapValue:X(c,this.config.strictMode)}),A},l.prototype.assembleData=function(d){var c=this.beaconSession.getSession();return{appVersion:this.config.appVersion?de(this.config.appVersion):"",sdkId:"js",sdkVersion:$,mainAppKey:this.config.appkey,platformId:3,common:X(w(w({},this.additionalParams),{A2:this.commonInfo.deviceId,A8:this.commonInfo.openid,A12:this.commonInfo.language,A17:this.commonInfo.pixel,A23:this.commonInfo.channelID,A50:this.commonInfo.unid,A76:c.sessionId,A101:this.commonInfo.userAgent,A102:window.location.href,A104:document.referrer,A119:this.commonInfo.query,A153:this.qimei36}),!1),events:d}},l.prototype.monitorUploadFailed=function(){this.uselessCycleTaskNum++,this.uselessCycleTaskNum>=5&&(window.clearInterval(this.intervalID),this.cycleTask(6e4),this.underWeakNet=!0)},l.prototype.doCustomCycleTask=function(){this.uselessCycleTaskNum>=5&&(window.clearInterval(this.intervalID),this.cycleTask(this.initDelayTime)),this.uselessCycleTaskNum=0,this.underWeakNet=!1},l}(u)})},"./lib/crypto.js":function(o,i,t){(function(r){var e=t("./node_modules/@babel/runtime/helpers/typeof.js"),T=T||function(m,w){var B={},k=B.lib={},R=function(){},D=k.Base={extend:function(S){R.prototype=this;var u=new R;return S&&u.mixIn(S),u.hasOwnProperty("init")||(u.init=function(){u.$super.init.apply(this,arguments)}),u.init.prototype=u,u.$super=this,u},create:function(){var S=this.extend();return S.init.apply(S,arguments),S},init:function(){},mixIn:function(S){for(var u in S)S.hasOwnProperty(u)&&(this[u]=S[u]);S.hasOwnProperty("toString")&&(this.toString=S.toString)},clone:function(){return this.init.prototype.extend(this)}},L=k.WordArray=D.extend({init:function(S,u){S=this.words=S||[],this.sigBytes=u!=w?u:4*S.length},toString:function(S){return(S||j).stringify(this)},concat:function(S){var u=this.words,P=S.words,p=this.sigBytes;if(S=S.sigBytes,this.clamp(),p%4)for(var N=0;N<S;N++)u[p+N>>>2]|=(P[N>>>2]>>>24-8*(N%4)&255)<<24-8*((p+N)%4);else if(65535<P.length)for(N=0;N<S;N+=4)u[p+N>>>2]=P[N>>>2];else u.push.apply(u,P);return this.sigBytes+=S,this},clamp:function(){var S=this.words,u=this.sigBytes;S[u>>>2]&=4294967295<<32-8*(u%4),S.length=m.ceil(u/4)},clone:function(){var S=D.clone.call(this);return S.words=this.words.slice(0),S},random:function(S){for(var u=[],P=0;P<S;P+=4)u.push(4294967296*m.random()|0);return new L.init(u,S)}}),z=B.enc={},j=z.Hex={stringify:function(S){var u=S.words;S=S.sigBytes;for(var P=[],p=0;p<S;p++){var N=u[p>>>2]>>>24-8*(p%4)&255;P.push((N>>>4).toString(16)),P.push((N&15).toString(16))}return P.join("")},parse:function(S){for(var u=S.length,P=[],p=0;p<u;p+=2)P[p>>>3]|=parseInt(S.substr(p,2),16)<<24-4*(p%8);return new L.init(P,u/2)}},q=z.Latin1={stringify:function(S){var u=S.words;S=S.sigBytes;for(var P=[],p=0;p<S;p++)P.push(String.fromCharCode(u[p>>>2]>>>24-8*(p%4)&255));return P.join("")},parse:function(S){for(var u=S.length,P=[],p=0;p<u;p++)P[p>>>2]|=(S.charCodeAt(p)&255)<<24-8*(p%4);return new L.init(P,u)}},te=z.Utf8={stringify:function(S){try{return decodeURIComponent(escape(q.stringify(S)))}catch{throw Error("Malformed UTF-8 data")}},parse:function(S){return q.parse(unescape(encodeURIComponent(S)))}},X=k.BufferedBlockAlgorithm=D.extend({reset:function(){this._data=new L.init,this._nDataBytes=0},_append:function(S){typeof S=="string"&&(S=te.parse(S)),this._data.concat(S),this._nDataBytes+=S.sigBytes},_process:function(S){var u=this._data,P=u.words,p=u.sigBytes,N=this.blockSize,H=p/(4*N),H=S?m.ceil(H):m.max((H|0)-this._minBufferSize,0);if(S=H*N,p=m.min(4*S,p),S){for(var G=0;G<S;G+=N)this._doProcessBlock(P,G);G=P.splice(0,S),u.sigBytes-=p}return new L.init(G,p)},clone:function(){var S=D.clone.call(this);return S._data=this._data.clone(),S},_minBufferSize:0});k.Hasher=X.extend({cfg:D.extend(),init:function(S){this.cfg=this.cfg.extend(S),this.reset()},reset:function(){X.reset.call(this),this._doReset()},update:function(S){return this._append(S),this._process(),this},finalize:function(S){return S&&this._append(S),this._doFinalize()},blockSize:16,_createHelper:function(S){return function(u,P){return new S.init(P).finalize(u)}},_createHmacHelper:function(S){return function(u,P){return new de.HMAC.init(S,P).finalize(u)}}});var de=B.algo={};return B}(Math);(function(){var m=T,R=m.lib,w=R.WordArray,B=R.Hasher,k=[],R=m.algo.SHA1=B.extend({_doReset:function(){this._hash=new w.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(L,z){for(var j=this._hash.words,q=j[0],te=j[1],X=j[2],de=j[3],U=j[4],S=0;80>S;S++){if(16>S)k[S]=L[z+S]|0;else{var u=k[S-3]^k[S-8]^k[S-14]^k[S-16];k[S]=u<<1|u>>>31}u=(q<<5|q>>>27)+U+k[S],u=20>S?u+((te&X|~te&de)+1518500249):40>S?u+((te^X^de)+1859775393):60>S?u+((te&X|te&de|X&de)-1894007588):u+((te^X^de)-899497514),U=de,de=X,X=te<<30|te>>>2,te=q,q=u}j[0]=j[0]+q|0,j[1]=j[1]+te|0,j[2]=j[2]+X|0,j[3]=j[3]+de|0,j[4]=j[4]+U|0},_doFinalize:function(){var L=this._data,z=L.words,j=8*this._nDataBytes,q=8*L.sigBytes;return z[q>>>5]|=128<<24-q%32,z[(q+64>>>9<<4)+14]=Math.floor(j/4294967296),z[(q+64>>>9<<4)+15]=j,L.sigBytes=4*z.length,this._process(),this._hash},clone:function(){var L=B.clone.call(this);return L._hash=this._hash.clone(),L}});m.SHA1=B._createHelper(R),m.HmacSHA1=B._createHmacHelper(R)})(),function(){var m=T,w=m.enc.Utf8;m.algo.HMAC=m.lib.Base.extend({init:function(k,R){k=this._hasher=new k.init,typeof R=="string"&&(R=w.parse(R));var D=k.blockSize,L=4*D;R.sigBytes>L&&(R=k.finalize(R)),R.clamp();for(var z=this._oKey=R.clone(),j=this._iKey=R.clone(),q=z.words,te=j.words,X=0;X<D;X++)q[X]^=1549556828,te[X]^=909522486;z.sigBytes=j.sigBytes=L,this.reset()},reset:function(){var k=this._hasher;k.reset(),k.update(this._iKey)},update:function(k){return this._hasher.update(k),this},finalize:function(k){var R=this._hasher;return k=R.finalize(k),R.reset(),R.finalize(this._oKey.clone().concat(k))}})}(),function(){var m=T,w=m.lib,B=w.WordArray,k=m.enc;k.Base64={stringify:function(D){var L=D.words,z=D.sigBytes,j=this._map;D.clamp();for(var q=[],te=0;te<z;te+=3)for(var X=L[te>>>2]>>>24-te%4*8&255,de=L[te+1>>>2]>>>24-(te+1)%4*8&255,U=L[te+2>>>2]>>>24-(te+2)%4*8&255,S=X<<16|de<<8|U,u=0;u<4&&te+u*.75<z;u++)q.push(j.charAt(S>>>6*(3-u)&63));var P=j.charAt(64);if(P)for(;q.length%4;)q.push(P);return q.join("")},parse:function(D){var L=D.length,z=this._map,j=z.charAt(64);if(j){var q=D.indexOf(j);q!=-1&&(L=q)}for(var te=[],X=0,de=0;de<L;de++)if(de%4){var U=z.indexOf(D.charAt(de-1))<<de%4*2,S=z.indexOf(D.charAt(de))>>>6-de%4*2;te[X>>>2]|=(U|S)<<24-X%4*8,X++}return B.create(te,X)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e(r)==="object"?r.exports=T:window.CryptoJS=T}).call(this,t("./node_modules/webpack/buildin/module.js")(o))},"./lib/json2xml.js":function(o,i,t){var r=t("./node_modules/@babel/runtime/helpers/typeof.js"),e="a-zA-Z_À-ÖØ-öø-ÿͰ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿿、-퟿豈-﷏ﷰ-�",T="-.0-9·̀-ͯ‿⁀",m=new RegExp("^([^"+e+"])|^((x|X)(m|M)(l|L))|([^"+e+T+"])","g"),w=/[^\x09\x0A\x0D\x20-\xFF\x85\xA0-\uD7FF\uE000-\uFDCF\uFDE0-\uFFFD]/gm,B=function(z){var j=[];if(z instanceof Object)for(var q in z)z.hasOwnProperty(q)&&j.push(q);return j},k=function(z,j){var q=function(X,de,U,S,u){var P=j.indent!==void 0?j.indent:"	",p=j.prettyPrint?`
`+new Array(S).join(P):"";j.removeIllegalNameCharacters&&(X=X.replace(m,"_"));var N=[p,"<",X,U||""];return de&&de.length>0?(N.push(">"),N.push(de),u&&N.push(p),N.push("</"),N.push(X),N.push(">")):N.push("/>"),N.join("")};return function te(X,de,U){var S=r(X);switch((Array.isArray?Array.isArray(X):X instanceof Array)?S="array":X instanceof Date&&(S="date"),S){case"array":var u=[];return X.map(function(H){u.push(te(H,1,U+1))}),j.prettyPrint&&u.push(`
`),u.join("");case"date":return X.toJSON?X.toJSON():X+"";case"object":var P=[];for(var p in X)if(X.hasOwnProperty(p))if(X[p]instanceof Array)for(var N=0;N<X[p].length;N++)X[p].hasOwnProperty(N)&&P.push(q(p,te(X[p][N],0,U+1),null,U+1,B(X[p][N]).length));else P.push(q(p,te(X[p],0,U+1),null,U+1));return j.prettyPrint&&P.length>0&&P.push(`
`),P.join("");case"function":return X();default:return j.escape?D(X):""+X}}(z,0,0)},R=function(z){var j=['<?xml version="1.0" encoding="UTF-8"'];return z&&j.push(' standalone="yes"'),j.push("?>"),j.join("")};function D(L){return(""+L).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(w,"")}o.exports=function(L,z){if(z||(z={xmlHeader:{standalone:!0},prettyPrint:!0,indent:"  ",escape:!0}),typeof L=="string")try{L=JSON.parse(L.toString())}catch{return!1}var j="",q="";z&&(r(z)=="object"?(z.xmlHeader&&(j=R(!!z.xmlHeader.standalone)),typeof z.docType<"u"&&(q="<!DOCTYPE "+z.docType+">")):j=R()),z=z||{};var te=[j,z.prettyPrint&&q?`
`:"",q,k(L,z)];return te.join("").replace(/\n{2,}/g,`
`).replace(/\s+$/g,"")}},"./lib/md5.js":function(module,exports,__webpack_require__){(function(process,global,module){var __WEBPACK_AMD_DEFINE_RESULT__,_typeof=__webpack_require__("./node_modules/@babel/runtime/helpers/typeof.js");(function(){var ERROR="input is invalid type",WINDOW=(typeof window>"u"?"undefined":_typeof(window))==="object",root=WINDOW?window:{};root.JS_MD5_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&(typeof self>"u"?"undefined":_typeof(self))==="object",NODE_JS=!root.JS_MD5_NO_NODE_JS&&(typeof process>"u"?"undefined":_typeof(process))==="object"&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_MD5_NO_COMMON_JS&&_typeof(module)==="object"&&module.exports,AMD=__webpack_require__("./node_modules/webpack/buildin/amd-options.js"),ARRAY_BUFFER=!root.JS_MD5_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[128,32768,8388608,-2147483648],SHIFT=[0,8,16,24],OUTPUT_TYPES=["hex","array","digest","buffer","arrayBuffer","base64"],BASE64_ENCODE_CHAR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),blocks=[],buffer8;if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);buffer8=new Uint8Array(buffer),blocks=new Uint32Array(buffer)}(root.JS_MD5_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(o){return Object.prototype.toString.call(o)==="[object Array]"}),ARRAY_BUFFER&&(root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(o){return _typeof(o)==="object"&&o.buffer&&o.buffer.constructor===ArrayBuffer});var createOutputMethod=function(i){return function(t,r){return new Md5(!0).update(t,r)[i]()}},createMethod=function(){var i=createOutputMethod("hex");NODE_JS&&(i=nodeWrap(i)),i.getCtx=i.create=function(){return new Md5},i.update=function(e){return i.create().update(e)};for(var t=0;t<OUTPUT_TYPES.length;++t){var r=OUTPUT_TYPES[t];i[r]=createOutputMethod(r)}return i},nodeWrap=function nodeWrap(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function o(i){if(typeof i=="string")return crypto.createHash("md5").update(i,"utf8").digest("hex");if(i==null)throw ERROR;return i.constructor===ArrayBuffer&&(i=new Uint8Array(i)),Array.isArray(i)||ArrayBuffer.isView(i)||i.constructor===Buffer?crypto.createHash("md5").update(new Buffer(i)).digest("hex"):method(i)};return nodeMethod};function Md5(o){if(o)blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks,this.buffer8=buffer8;else if(ARRAY_BUFFER){var i=new ArrayBuffer(68);this.buffer8=new Uint8Array(i),this.blocks=new Uint32Array(i)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Md5.prototype.update=function(o,i){if(!this.finalized){for(var t,r=0,e,T=o.length,m=this.blocks,w=this.buffer8;r<T;){if(this.hashed&&(this.hashed=!1,m[0]=m[16],m[16]=m[1]=m[2]=m[3]=m[4]=m[5]=m[6]=m[7]=m[8]=m[9]=m[10]=m[11]=m[12]=m[13]=m[14]=m[15]=0),ARRAY_BUFFER)for(e=this.start;r<T&&e<64;++r)t=o.charCodeAt(r),i||t<128?w[e++]=t:t<2048?(w[e++]=192|t>>6,w[e++]=128|t&63):t<55296||t>=57344?(w[e++]=224|t>>12,w[e++]=128|t>>6&63,w[e++]=128|t&63):(t=65536+((t&1023)<<10|o.charCodeAt(++r)&1023),w[e++]=240|t>>18,w[e++]=128|t>>12&63,w[e++]=128|t>>6&63,w[e++]=128|t&63);else for(e=this.start;r<T&&e<64;++r)t=o.charCodeAt(r),i||t<128?m[e>>2]|=t<<SHIFT[e++&3]:t<2048?(m[e>>2]|=(192|t>>6)<<SHIFT[e++&3],m[e>>2]|=(128|t&63)<<SHIFT[e++&3]):t<55296||t>=57344?(m[e>>2]|=(224|t>>12)<<SHIFT[e++&3],m[e>>2]|=(128|t>>6&63)<<SHIFT[e++&3],m[e>>2]|=(128|t&63)<<SHIFT[e++&3]):(t=65536+((t&1023)<<10|o.charCodeAt(++r)&1023),m[e>>2]|=(240|t>>18)<<SHIFT[e++&3],m[e>>2]|=(128|t>>12&63)<<SHIFT[e++&3],m[e>>2]|=(128|t>>6&63)<<SHIFT[e++&3],m[e>>2]|=(128|t&63)<<SHIFT[e++&3]);this.lastByteIndex=e,this.bytes+=e-this.start,e>=64?(this.start=e-64,this.hash(),this.hashed=!0):this.start=e}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Md5.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var o=this.blocks,i=this.lastByteIndex;o[i>>2]|=EXTRA[i&3],i>=56&&(this.hashed||this.hash(),o[0]=o[16],o[16]=o[1]=o[2]=o[3]=o[4]=o[5]=o[6]=o[7]=o[8]=o[9]=o[10]=o[11]=o[12]=o[13]=o[14]=o[15]=0),o[14]=this.bytes<<3,o[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},Md5.prototype.hash=function(){var o,i,t,r,e,T,m=this.blocks;this.first?(o=m[0]-680876937,o=(o<<7|o>>>25)-271733879<<0,r=(-1732584194^o&2004318071)+m[1]-117830708,r=(r<<12|r>>>20)+o<<0,t=(-271733879^r&(o^-271733879))+m[2]-1126478375,t=(t<<17|t>>>15)+r<<0,i=(o^t&(r^o))+m[3]-1316259209,i=(i<<22|i>>>10)+t<<0):(o=this.h0,i=this.h1,t=this.h2,r=this.h3,o+=(r^i&(t^r))+m[0]-680876936,o=(o<<7|o>>>25)+i<<0,r+=(t^o&(i^t))+m[1]-389564586,r=(r<<12|r>>>20)+o<<0,t+=(i^r&(o^i))+m[2]+606105819,t=(t<<17|t>>>15)+r<<0,i+=(o^t&(r^o))+m[3]-1044525330,i=(i<<22|i>>>10)+t<<0),o+=(r^i&(t^r))+m[4]-176418897,o=(o<<7|o>>>25)+i<<0,r+=(t^o&(i^t))+m[5]+1200080426,r=(r<<12|r>>>20)+o<<0,t+=(i^r&(o^i))+m[6]-1473231341,t=(t<<17|t>>>15)+r<<0,i+=(o^t&(r^o))+m[7]-45705983,i=(i<<22|i>>>10)+t<<0,o+=(r^i&(t^r))+m[8]+1770035416,o=(o<<7|o>>>25)+i<<0,r+=(t^o&(i^t))+m[9]-1958414417,r=(r<<12|r>>>20)+o<<0,t+=(i^r&(o^i))+m[10]-42063,t=(t<<17|t>>>15)+r<<0,i+=(o^t&(r^o))+m[11]-1990404162,i=(i<<22|i>>>10)+t<<0,o+=(r^i&(t^r))+m[12]+1804603682,o=(o<<7|o>>>25)+i<<0,r+=(t^o&(i^t))+m[13]-40341101,r=(r<<12|r>>>20)+o<<0,t+=(i^r&(o^i))+m[14]-1502002290,t=(t<<17|t>>>15)+r<<0,i+=(o^t&(r^o))+m[15]+1236535329,i=(i<<22|i>>>10)+t<<0,o+=(t^r&(i^t))+m[1]-165796510,o=(o<<5|o>>>27)+i<<0,r+=(i^t&(o^i))+m[6]-1069501632,r=(r<<9|r>>>23)+o<<0,t+=(o^i&(r^o))+m[11]+643717713,t=(t<<14|t>>>18)+r<<0,i+=(r^o&(t^r))+m[0]-373897302,i=(i<<20|i>>>12)+t<<0,o+=(t^r&(i^t))+m[5]-701558691,o=(o<<5|o>>>27)+i<<0,r+=(i^t&(o^i))+m[10]+38016083,r=(r<<9|r>>>23)+o<<0,t+=(o^i&(r^o))+m[15]-660478335,t=(t<<14|t>>>18)+r<<0,i+=(r^o&(t^r))+m[4]-405537848,i=(i<<20|i>>>12)+t<<0,o+=(t^r&(i^t))+m[9]+568446438,o=(o<<5|o>>>27)+i<<0,r+=(i^t&(o^i))+m[14]-1019803690,r=(r<<9|r>>>23)+o<<0,t+=(o^i&(r^o))+m[3]-187363961,t=(t<<14|t>>>18)+r<<0,i+=(r^o&(t^r))+m[8]+1163531501,i=(i<<20|i>>>12)+t<<0,o+=(t^r&(i^t))+m[13]-1444681467,o=(o<<5|o>>>27)+i<<0,r+=(i^t&(o^i))+m[2]-51403784,r=(r<<9|r>>>23)+o<<0,t+=(o^i&(r^o))+m[7]+1735328473,t=(t<<14|t>>>18)+r<<0,i+=(r^o&(t^r))+m[12]-1926607734,i=(i<<20|i>>>12)+t<<0,e=i^t,o+=(e^r)+m[5]-378558,o=(o<<4|o>>>28)+i<<0,r+=(e^o)+m[8]-2022574463,r=(r<<11|r>>>21)+o<<0,T=r^o,t+=(T^i)+m[11]+1839030562,t=(t<<16|t>>>16)+r<<0,i+=(T^t)+m[14]-35309556,i=(i<<23|i>>>9)+t<<0,e=i^t,o+=(e^r)+m[1]-1530992060,o=(o<<4|o>>>28)+i<<0,r+=(e^o)+m[4]+1272893353,r=(r<<11|r>>>21)+o<<0,T=r^o,t+=(T^i)+m[7]-155497632,t=(t<<16|t>>>16)+r<<0,i+=(T^t)+m[10]-1094730640,i=(i<<23|i>>>9)+t<<0,e=i^t,o+=(e^r)+m[13]+681279174,o=(o<<4|o>>>28)+i<<0,r+=(e^o)+m[0]-358537222,r=(r<<11|r>>>21)+o<<0,T=r^o,t+=(T^i)+m[3]-722521979,t=(t<<16|t>>>16)+r<<0,i+=(T^t)+m[6]+76029189,i=(i<<23|i>>>9)+t<<0,e=i^t,o+=(e^r)+m[9]-640364487,o=(o<<4|o>>>28)+i<<0,r+=(e^o)+m[12]-421815835,r=(r<<11|r>>>21)+o<<0,T=r^o,t+=(T^i)+m[15]+530742520,t=(t<<16|t>>>16)+r<<0,i+=(T^t)+m[2]-995338651,i=(i<<23|i>>>9)+t<<0,o+=(t^(i|~r))+m[0]-198630844,o=(o<<6|o>>>26)+i<<0,r+=(i^(o|~t))+m[7]+1126891415,r=(r<<10|r>>>22)+o<<0,t+=(o^(r|~i))+m[14]-1416354905,t=(t<<15|t>>>17)+r<<0,i+=(r^(t|~o))+m[5]-57434055,i=(i<<21|i>>>11)+t<<0,o+=(t^(i|~r))+m[12]+1700485571,o=(o<<6|o>>>26)+i<<0,r+=(i^(o|~t))+m[3]-1894986606,r=(r<<10|r>>>22)+o<<0,t+=(o^(r|~i))+m[10]-1051523,t=(t<<15|t>>>17)+r<<0,i+=(r^(t|~o))+m[1]-2054922799,i=(i<<21|i>>>11)+t<<0,o+=(t^(i|~r))+m[8]+1873313359,o=(o<<6|o>>>26)+i<<0,r+=(i^(o|~t))+m[15]-30611744,r=(r<<10|r>>>22)+o<<0,t+=(o^(r|~i))+m[6]-1560198380,t=(t<<15|t>>>17)+r<<0,i+=(r^(t|~o))+m[13]+1309151649,i=(i<<21|i>>>11)+t<<0,o+=(t^(i|~r))+m[4]-145523070,o=(o<<6|o>>>26)+i<<0,r+=(i^(o|~t))+m[11]-1120210379,r=(r<<10|r>>>22)+o<<0,t+=(o^(r|~i))+m[2]+718787259,t=(t<<15|t>>>17)+r<<0,i+=(r^(t|~o))+m[9]-343485551,i=(i<<21|i>>>11)+t<<0,this.first?(this.h0=o+1732584193<<0,this.h1=i-271733879<<0,this.h2=t-1732584194<<0,this.h3=r+271733878<<0,this.first=!1):(this.h0=this.h0+o<<0,this.h1=this.h1+i<<0,this.h2=this.h2+t<<0,this.h3=this.h3+r<<0)},Md5.prototype.hex=function(){this.finalize();var o=this.h0,i=this.h1,t=this.h2,r=this.h3;return HEX_CHARS[o>>4&15]+HEX_CHARS[o&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[i&15]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[t&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[r&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]},Md5.prototype.toString=Md5.prototype.hex,Md5.prototype.digest=function(o){if(o==="hex")return this.hex();this.finalize();var i=this.h0,t=this.h1,r=this.h2,e=this.h3,T=[i&255,i>>8&255,i>>16&255,i>>24&255,t&255,t>>8&255,t>>16&255,t>>24&255,r&255,r>>8&255,r>>16&255,r>>24&255,e&255,e>>8&255,e>>16&255,e>>24&255];return T},Md5.prototype.array=Md5.prototype.digest,Md5.prototype.arrayBuffer=function(){this.finalize();var o=new ArrayBuffer(16),i=new Uint32Array(o);return i[0]=this.h0,i[1]=this.h1,i[2]=this.h2,i[3]=this.h3,o},Md5.prototype.buffer=Md5.prototype.arrayBuffer,Md5.prototype.base64=function(){for(var o,i,t,r="",e=this.array(),T=0;T<15;)o=e[T++],i=e[T++],t=e[T++],r+=BASE64_ENCODE_CHAR[o>>>2]+BASE64_ENCODE_CHAR[(o<<4|i>>>4)&63]+BASE64_ENCODE_CHAR[(i<<2|t>>>6)&63]+BASE64_ENCODE_CHAR[t&63];return o=e[T],r+=BASE64_ENCODE_CHAR[o>>>2]+BASE64_ENCODE_CHAR[o<<4&63]+"==",r};var exports=createMethod();COMMON_JS?module.exports=exports:(root.md5=exports,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module),__WEBPACK_AMD_DEFINE_RESULT__!==void 0&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))})()}).call(this,__webpack_require__("./node_modules/process/browser.js"),__webpack_require__("./node_modules/webpack/buildin/global.js"),__webpack_require__("./node_modules/webpack/buildin/module.js")(module))},"./lib/request.js":function(o,i,t){var r=t("./node_modules/@babel/runtime/helpers/typeof.js"),e=function(R){switch(r(R)){case"string":return R;case"boolean":return R?"true":"false";case"number":return isFinite(R)?R:"";default:return""}},T=function(R,D,L,z){return D=D||"&",L=L||"=",R===null&&(R=void 0),r(R)==="object"?Object.keys(R).map(function(j){var q=encodeURIComponent(e(j))+L;return Array.isArray(R[j])?R[j].map(function(te){return q+encodeURIComponent(e(te))}).join(D):q+encodeURIComponent(e(R[j]))}).filter(Boolean).join(D):z?encodeURIComponent(e(z))+L+encodeURIComponent(e(R)):""},m=function(R,D,L){var z={};return D.getAllResponseHeaders().trim().split(`
`).forEach(function(j){if(j){var q=j.indexOf(":"),te=j.substr(0,q).trim().toLowerCase(),X=j.substr(q+1).trim();z[te]=X}}),{error:R,statusCode:D.status,statusMessage:D.statusText,headers:z,body:L}},w=function(R,D){return!D&&D==="text"?R.responseText:R.response},B=function(R,D){var L=(R.method||"GET").toUpperCase(),z=R.url;if(R.qs){var j=T(R.qs);j&&(z+=(z.indexOf("?")===-1?"?":"&")+j)}var q=new XMLHttpRequest;if(q.open(L,z,!0),q.responseType=R.dataType||"text",R.xhrFields)for(var te in R.xhrFields)q[te]=R.xhrFields[te];var X=R.headers;if(X)for(var de in X)X.hasOwnProperty(de)&&de.toLowerCase()!=="content-length"&&de.toLowerCase()!=="user-agent"&&de.toLowerCase()!=="origin"&&de.toLowerCase()!=="host"&&q.setRequestHeader(de,X[de]);return R.onProgress&&q.upload&&(q.upload.onprogress=R.onProgress),R.onDownloadProgress&&(q.onprogress=R.onDownloadProgress),R.timeout&&(q.timeout=R.timeout),q.ontimeout=function(U){var S=new Error("timeout");D(m(S,q))},q.onload=function(){D(m(null,q,w(q,R.dataType)))},q.onerror=function(U){var S=w(q,R.dataType);if(S)D(m(null,q,S));else{var u=q.statusText;!u&&q.status===0&&(u=new Error("CORS blocked or network error")),D(m(u,q,S))}},q.send(R.body||""),q};o.exports=B},"./lib/xml2json.js":function(o,i,t){var r=t("./node_modules/@xmldom/xmldom/lib/index.js").DOMParser,e=function(){this.version="1.3.5";var m={mergeCDATA:!0,normalize:!0,stripElemPrefix:!0},w=new RegExp(/(?!xmlns)^.*:/);return this.grokType=function(B){return/^\s*$/.test(B)?null:/^(?:true|false)$/i.test(B)?B.toLowerCase()==="true":isFinite(B)?parseFloat(B):B},this.parseString=function(B,k){if(B){var R=this.stringToXML(B);return R.getElementsByTagName("parsererror").length?null:this.parseXML(R,k)}else return null},this.parseXML=function(B,k){for(var R in k)m[R]=k[R];var D={},L=0,z="",j=B.childNodes.length;if(j)for(var q,te,X,de=0;de<B.childNodes.length;de++)q=B.childNodes.item(de),q.nodeType===4?m.mergeCDATA&&(z+=q.nodeValue):q.nodeType===3?z+=q.nodeValue:q.nodeType===1&&(L===0&&(D={}),m.stripElemPrefix?te=q.nodeName.replace(w,""):te=q.nodeName,X=e.parseXML(q),D.hasOwnProperty(te)?(D[te].constructor!==Array&&(D[te]=[D[te]]),D[te].push(X)):(D[te]=X,L++));return Object.keys(D).length||(D=z||""),D},this.xmlToString=function(B){try{var k=B.xml?B.xml:new XMLSerializer().serializeToString(B);return k}catch{return null}},this.stringToXML=function(B){try{var k=null;if(window.DOMParser){var R=new r;return k=R.parseFromString(B,"text/xml"),k}else return k=new ActiveXObject("Microsoft.XMLDOM"),k.async=!1,k.loadXML(B),k}catch{return null}},this}.call({}),T=function(w){return e.parseString(w)};o.exports=T},"./node_modules/@babel/runtime/helpers/classCallCheck.js":function(o,i){function t(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}o.exports=t,o.exports.__esModule=!0,o.exports.default=o.exports},"./node_modules/@babel/runtime/helpers/createClass.js":function(o,i){function t(e,T){for(var m=0;m<T.length;m++){var w=T[m];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(e,w.key,w)}}function r(e,T,m){return T&&t(e.prototype,T),m&&t(e,m),Object.defineProperty(e,"prototype",{writable:!1}),e}o.exports=r,o.exports.__esModule=!0,o.exports.default=o.exports},"./node_modules/@babel/runtime/helpers/typeof.js":function(o,i){function t(r){return o.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o.exports.__esModule=!0,o.exports.default=o.exports,t(r)}o.exports=t,o.exports.__esModule=!0,o.exports.default=o.exports},"./node_modules/@xmldom/xmldom/lib/conventions.js":function(o,i,t){function r(B,k,R){if(R===void 0&&(R=Array.prototype),B&&typeof R.find=="function")return R.find.call(B,k);for(var D=0;D<B.length;D++)if(Object.prototype.hasOwnProperty.call(B,D)){var L=B[D];if(k.call(void 0,L,D,B))return L}}function e(B,k){return k===void 0&&(k=Object),k&&typeof k.freeze=="function"?k.freeze(B):B}function T(B,k){if(B===null||typeof B!="object")throw new TypeError("target is not an object");for(var R in k)Object.prototype.hasOwnProperty.call(k,R)&&(B[R]=k[R]);return B}var m=e({HTML:"text/html",isHTML:function(B){return B===m.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),w=e({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(B){return B===w.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});i.assign=T,i.find=r,i.freeze=e,i.MIME_TYPE=m,i.NAMESPACE=w},"./node_modules/@xmldom/xmldom/lib/dom-parser.js":function(o,i,t){var r=t("./node_modules/@xmldom/xmldom/lib/conventions.js"),e=t("./node_modules/@xmldom/xmldom/lib/dom.js"),T=t("./node_modules/@xmldom/xmldom/lib/entities.js"),m=t("./node_modules/@xmldom/xmldom/lib/sax.js"),w=e.DOMImplementation,B=r.NAMESPACE,k=m.ParseError,R=m.XMLReader;function D(U){return U.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function L(U){this.options=U||{locator:{}}}L.prototype.parseFromString=function(U,S){var u=this.options,P=new R,p=u.domBuilder||new j,N=u.errorHandler,H=u.locator,G=u.xmlns||{},oe=/\/x?html?$/.test(S),I=oe?T.HTML_ENTITIES:T.XML_ENTITIES;H&&p.setDocumentLocator(H),P.errorHandler=z(N,p,H),P.domBuilder=u.domBuilder||p,oe&&(G[""]=B.HTML),G.xml=G.xml||B.XML;var V=u.normalizeLineEndings||D;return U&&typeof U=="string"?P.parse(V(U),G,I):P.errorHandler.error("invalid doc source"),p.doc};function z(U,S,u){if(!U){if(S instanceof j)return S;U=S}var P={},p=U instanceof Function;u=u||{};function N(H){var G=U[H];!G&&p&&(G=U.length==2?function(oe){U(H,oe)}:U),P[H]=G&&function(oe){G("[xmldom "+H+"]	"+oe+te(u))}||function(){}}return N("warning"),N("error"),N("fatalError"),P}function j(){this.cdata=!1}function q(U,S){S.lineNumber=U.lineNumber,S.columnNumber=U.columnNumber}j.prototype={startDocument:function(){this.doc=new w().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(U,S,u,P){var p=this.doc,N=p.createElementNS(U,u||S),H=P.length;de(this,N),this.currentElement=N,this.locator&&q(this.locator,N);for(var G=0;G<H;G++){var U=P.getURI(G),oe=P.getValue(G),u=P.getQName(G),I=p.createAttributeNS(U,u);this.locator&&q(P.getLocator(G),I),I.value=I.nodeValue=oe,N.setAttributeNode(I)}},endElement:function(U,S,u){var P=this.currentElement;P.tagName,this.currentElement=P.parentNode},startPrefixMapping:function(U,S){},endPrefixMapping:function(U){},processingInstruction:function(U,S){var u=this.doc.createProcessingInstruction(U,S);this.locator&&q(this.locator,u),de(this,u)},ignorableWhitespace:function(U,S,u){},characters:function(U,S,u){if(U=X.apply(this,arguments),U){if(this.cdata)var P=this.doc.createCDATASection(U);else var P=this.doc.createTextNode(U);this.currentElement?this.currentElement.appendChild(P):/^\s*$/.test(U)&&this.doc.appendChild(P),this.locator&&q(this.locator,P)}},skippedEntity:function(U){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(U){(this.locator=U)&&(U.lineNumber=0)},comment:function(U,S,u){U=X.apply(this,arguments);var P=this.doc.createComment(U);this.locator&&q(this.locator,P),de(this,P)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(U,S,u){var P=this.doc.implementation;if(P&&P.createDocumentType){var p=P.createDocumentType(U,S,u);this.locator&&q(this.locator,p),de(this,p),this.doc.doctype=p}},warning:function(U){console.warn("[xmldom warning]	"+U,te(this.locator))},error:function(U){console.error("[xmldom error]	"+U,te(this.locator))},fatalError:function(U){throw new k(U,this.locator)}};function te(U){if(U)return`
@`+(U.systemId||"")+"#[line:"+U.lineNumber+",col:"+U.columnNumber+"]"}function X(U,S,u){return typeof U=="string"?U.substr(S,u):U.length>=S+u||S?new java.lang.String(U,S,u)+"":U}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(U){j.prototype[U]=function(){return null}});function de(U,S){U.currentElement?U.currentElement.appendChild(S):U.doc.appendChild(S)}i.__DOMHandler=j,i.normalizeLineEndings=D,i.DOMParser=L},"./node_modules/@xmldom/xmldom/lib/dom.js":function(o,i,t){var r=t("./node_modules/@xmldom/xmldom/lib/conventions.js"),e=r.find,T=r.NAMESPACE;function m(a){return a!==""}function w(a){return a?a.split(/[\t\n\f\r ]+/).filter(m):[]}function B(a,h){return a.hasOwnProperty(h)||(a[h]=!0),a}function k(a){if(!a)return[];var h=w(a);return Object.keys(h.reduce(B,{}))}function R(a){return function(h){return a&&a.indexOf(h)!==-1}}function D(a,h){for(var E in a)Object.prototype.hasOwnProperty.call(a,E)&&(h[E]=a[E])}function L(a,h){var E=a.prototype;if(!(E instanceof h)){let K=function(){};K.prototype=h.prototype,K=new K,D(E,K),a.prototype=E=K}E.constructor!=a&&(typeof a!="function"&&console.error("unknown Class:"+a),E.constructor=a)}var z={},j=z.ELEMENT_NODE=1,q=z.ATTRIBUTE_NODE=2,te=z.TEXT_NODE=3,X=z.CDATA_SECTION_NODE=4,de=z.ENTITY_REFERENCE_NODE=5,U=z.ENTITY_NODE=6,S=z.PROCESSING_INSTRUCTION_NODE=7,u=z.COMMENT_NODE=8,P=z.DOCUMENT_NODE=9,p=z.DOCUMENT_TYPE_NODE=10,N=z.DOCUMENT_FRAGMENT_NODE=11,H=z.NOTATION_NODE=12,G={},oe={};G.INDEX_SIZE_ERR=(oe[1]="Index size error",1),G.DOMSTRING_SIZE_ERR=(oe[2]="DOMString size error",2);var I=G.HIERARCHY_REQUEST_ERR=(oe[3]="Hierarchy request error",3);G.WRONG_DOCUMENT_ERR=(oe[4]="Wrong document",4),G.INVALID_CHARACTER_ERR=(oe[5]="Invalid character",5),G.NO_DATA_ALLOWED_ERR=(oe[6]="No data allowed",6),G.NO_MODIFICATION_ALLOWED_ERR=(oe[7]="No modification allowed",7);var V=G.NOT_FOUND_ERR=(oe[8]="Not found",8);G.NOT_SUPPORTED_ERR=(oe[9]="Not supported",9);var Q=G.INUSE_ATTRIBUTE_ERR=(oe[10]="Attribute in use",10);G.INVALID_STATE_ERR=(oe[11]="Invalid state",11),G.SYNTAX_ERR=(oe[12]="Syntax error",12),G.INVALID_MODIFICATION_ERR=(oe[13]="Invalid modification",13),G.NAMESPACE_ERR=(oe[14]="Invalid namespace",14),G.INVALID_ACCESS_ERR=(oe[15]="Invalid access",15);function W(a,h){if(h instanceof Error)var E=h;else E=this,Error.call(this,oe[a]),this.message=oe[a],Error.captureStackTrace&&Error.captureStackTrace(this,W);return E.code=a,h&&(this.message=this.message+": "+h),E}W.prototype=Error.prototype,D(G,W);function Z(){}Z.prototype={length:0,item:function(a){return this[a]||null},toString:function(a,h){for(var E=[],K=0;K<this.length;K++)Qe(this[K],E,a,h);return E.join("")},filter:function(a){return Array.prototype.filter.call(this,a)},indexOf:function(a){return Array.prototype.indexOf.call(this,a)}};function se(a,h){this._node=a,this._refresh=h,ce(this)}function ce(a){var h=a._node._inc||a._node.ownerDocument._inc;if(a._inc!=h){var E=a._refresh(a._node);Xe(a,"length",E.length),D(E,a),a._inc=h}}se.prototype.item=function(a){return ce(this),this[a]},L(se,Z);function ue(){}function ne(a,h){for(var E=a.length;E--;)if(a[E]===h)return E}function fe(a,h,E,K){if(K?h[ne(h,K)]=E:h[h.length++]=E,a){E.ownerElement=a;var M=a.ownerDocument;M&&(K&&me(M,a,K),ge(M,a,E))}}function le(a,h,E){var K=ne(h,E);if(K>=0){for(var M=h.length-1;K<M;)h[K]=h[++K];if(h.length=M,a){var Ie=a.ownerDocument;Ie&&(me(Ie,a,E),E.ownerElement=null)}}else throw new W(V,new Error(a.tagName+"@"+E))}ue.prototype={length:0,item:Z.prototype.item,getNamedItem:function(a){for(var h=this.length;h--;){var E=this[h];if(E.nodeName==a)return E}},setNamedItem:function(a){var h=a.ownerElement;if(h&&h!=this._ownerElement)throw new W(Q);var E=this.getNamedItem(a.nodeName);return fe(this._ownerElement,this,a,E),E},setNamedItemNS:function(a){var h=a.ownerElement,E;if(h&&h!=this._ownerElement)throw new W(Q);return E=this.getNamedItemNS(a.namespaceURI,a.localName),fe(this._ownerElement,this,a,E),E},removeNamedItem:function(a){var h=this.getNamedItem(a);return le(this._ownerElement,this,h),h},removeNamedItemNS:function(a,h){var E=this.getNamedItemNS(a,h);return le(this._ownerElement,this,E),E},getNamedItemNS:function(a,h){for(var E=this.length;E--;){var K=this[E];if(K.localName==h&&K.namespaceURI==a)return K}return null}};function ye(){}ye.prototype={hasFeature:function(a,h){return!0},createDocument:function(a,h,E){var K=new Ce;if(K.implementation=this,K.childNodes=new Z,K.doctype=E||null,E&&K.appendChild(E),h){var M=K.createElementNS(a,h);K.appendChild(M)}return K},createDocumentType:function(a,h,E){var K=new Pe;return K.name=a,K.nodeName=a,K.publicId=h||"",K.systemId=E||"",K}};function J(){}J.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(a,h){return c(this,a,h)},replaceChild:function(a,h){c(this,a,h,d),h&&this.removeChild(h)},removeChild:function(a){return ke(this,a)},appendChild:function(a){return this.insertBefore(a,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(a){return Ze(this.ownerDocument||this,this,a)},normalize:function(){for(var a=this.firstChild;a;){var h=a.nextSibling;h&&h.nodeType==te&&a.nodeType==te?(this.removeChild(h),a.appendData(h.data)):(a.normalize(),a=h)}},isSupported:function(a,h){return this.ownerDocument.implementation.hasFeature(a,h)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(a){for(var h=this;h;){var E=h._nsMap;if(E){for(var K in E)if(Object.prototype.hasOwnProperty.call(E,K)&&E[K]===a)return K}h=h.nodeType==q?h.ownerDocument:h.parentNode}return null},lookupNamespaceURI:function(a){for(var h=this;h;){var E=h._nsMap;if(E&&Object.prototype.hasOwnProperty.call(E,a))return E[a];h=h.nodeType==q?h.ownerDocument:h.parentNode}return null},isDefaultNamespace:function(a){var h=this.lookupPrefix(a);return h==null}};function re(a){return a=="<"&&"&lt;"||a==">"&&"&gt;"||a=="&"&&"&amp;"||a=='"'&&"&quot;"||"&#"+a.charCodeAt()+";"}D(z,J),D(z,J.prototype);function pe(a,h){if(h(a))return!0;if(a=a.firstChild)do if(pe(a,h))return!0;while(a=a.nextSibling)}function Ce(){this.ownerDocument=this}function ge(a,h,E){a&&a._inc++;var K=E.namespaceURI;K===T.XMLNS&&(h._nsMap[E.prefix?E.localName:""]=E.value)}function me(a,h,E,K){a&&a._inc++;var M=E.namespaceURI;M===T.XMLNS&&delete h._nsMap[E.prefix?E.localName:""]}function Se(a,h,E){if(a&&a._inc){a._inc++;var K=h.childNodes;if(E)K[K.length++]=E;else{for(var M=h.firstChild,Ie=0;M;)K[Ie++]=M,M=M.nextSibling;K.length=Ie,delete K[K.length]}}}function ke(a,h){var E=h.previousSibling,K=h.nextSibling;return E?E.nextSibling=K:a.firstChild=K,K?K.previousSibling=E:a.lastChild=E,h.parentNode=null,h.previousSibling=null,h.nextSibling=null,Se(a.ownerDocument,a),h}function we(a){return a&&(a.nodeType===J.DOCUMENT_NODE||a.nodeType===J.DOCUMENT_FRAGMENT_NODE||a.nodeType===J.ELEMENT_NODE)}function Be(a){return a&&(Oe(a)||ae(a)||Ae(a)||a.nodeType===J.DOCUMENT_FRAGMENT_NODE||a.nodeType===J.COMMENT_NODE||a.nodeType===J.PROCESSING_INSTRUCTION_NODE)}function Ae(a){return a&&a.nodeType===J.DOCUMENT_TYPE_NODE}function Oe(a){return a&&a.nodeType===J.ELEMENT_NODE}function ae(a){return a&&a.nodeType===J.TEXT_NODE}function O(a,h){var E=a.childNodes||[];if(e(E,Oe)||Ae(h))return!1;var K=e(E,Ae);return!(h&&K&&E.indexOf(K)>E.indexOf(h))}function $(a,h){var E=a.childNodes||[];function K(Ie){return Oe(Ie)&&Ie!==h}if(e(E,K))return!1;var M=e(E,Ae);return!(h&&M&&E.indexOf(M)>E.indexOf(h))}function g(a,h,E){if(!we(a))throw new W(I,"Unexpected parent node type "+a.nodeType);if(E&&E.parentNode!==a)throw new W(V,"child not in parent");if(!Be(h)||Ae(h)&&a.nodeType!==J.DOCUMENT_NODE)throw new W(I,"Unexpected node type "+h.nodeType+" for parent node type "+a.nodeType)}function l(a,h,E){var K=a.childNodes||[],M=h.childNodes||[];if(h.nodeType===J.DOCUMENT_FRAGMENT_NODE){var Ie=M.filter(Oe);if(Ie.length>1||e(M,ae))throw new W(I,"More than one element or text in fragment");if(Ie.length===1&&!O(a,E))throw new W(I,"Element in fragment can not be inserted before doctype")}if(Oe(h)&&!O(a,E))throw new W(I,"Only one element can be added and only after doctype");if(Ae(h)){if(e(K,Ae))throw new W(I,"Only one doctype is allowed");var Ue=e(K,Oe);if(E&&K.indexOf(Ue)<K.indexOf(E))throw new W(I,"Doctype can only be inserted before an element");if(!E&&Ue)throw new W(I,"Doctype can not be appended since element is present")}}function d(a,h,E){var K=a.childNodes||[],M=h.childNodes||[];if(h.nodeType===J.DOCUMENT_FRAGMENT_NODE){var Ie=M.filter(Oe);if(Ie.length>1||e(M,ae))throw new W(I,"More than one element or text in fragment");if(Ie.length===1&&!$(a,E))throw new W(I,"Element in fragment can not be inserted before doctype")}if(Oe(h)&&!$(a,E))throw new W(I,"Only one element can be added and only after doctype");if(Ae(h)){if(e(K,function(n){return Ae(n)&&n!==E}))throw new W(I,"Only one doctype is allowed");var Ue=e(K,Oe);if(E&&K.indexOf(Ue)<K.indexOf(E))throw new W(I,"Doctype can only be inserted before an element")}}function c(a,h,E,K){g(a,h,E),a.nodeType===J.DOCUMENT_NODE&&(K||l)(a,h,E);var M=h.parentNode;if(M&&M.removeChild(h),h.nodeType===N){var Ie=h.firstChild;if(Ie==null)return h;var Ue=h.lastChild}else Ie=Ue=h;var $e=E?E.previousSibling:a.lastChild;Ie.previousSibling=$e,Ue.nextSibling=E,$e?$e.nextSibling=Ie:a.firstChild=Ie,E==null?a.lastChild=Ue:E.previousSibling=Ue;do Ie.parentNode=a;while(Ie!==Ue&&(Ie=Ie.nextSibling));return Se(a.ownerDocument||a,a),h.nodeType==N&&(h.firstChild=h.lastChild=null),h}function y(a,h){return h.parentNode&&h.parentNode.removeChild(h),h.parentNode=a,h.previousSibling=a.lastChild,h.nextSibling=null,h.previousSibling?h.previousSibling.nextSibling=h:a.firstChild=h,a.lastChild=h,Se(a.ownerDocument,a,h),h}Ce.prototype={nodeName:"#document",nodeType:P,doctype:null,documentElement:null,_inc:1,insertBefore:function(a,h){if(a.nodeType==N){for(var E=a.firstChild;E;){var K=E.nextSibling;this.insertBefore(E,h),E=K}return a}return c(this,a,h),a.ownerDocument=this,this.documentElement===null&&a.nodeType===j&&(this.documentElement=a),a},removeChild:function(a){return this.documentElement==a&&(this.documentElement=null),ke(this,a)},replaceChild:function(a,h){c(this,a,h,d),a.ownerDocument=this,h&&this.removeChild(h),Oe(a)&&(this.documentElement=a)},importNode:function(a,h){return it(this,a,h)},getElementById:function(a){var h=null;return pe(this.documentElement,function(E){if(E.nodeType==j&&E.getAttribute("id")==a)return h=E,!0}),h},getElementsByClassName:function(a){var h=k(a);return new se(this,function(E){var K=[];return h.length>0&&pe(E.documentElement,function(M){if(M!==E&&M.nodeType===j){var Ie=M.getAttribute("class");if(Ie){var Ue=a===Ie;if(!Ue){var $e=k(Ie);Ue=h.every(R($e))}Ue&&K.push(M)}}}),K})},createElement:function(a){var h=new A;h.ownerDocument=this,h.nodeName=a,h.tagName=a,h.localName=a,h.childNodes=new Z;var E=h.attributes=new ue;return E._ownerElement=h,h},createDocumentFragment:function(){var a=new je;return a.ownerDocument=this,a.childNodes=new Z,a},createTextNode:function(a){var h=new he;return h.ownerDocument=this,h.appendData(a),h},createComment:function(a){var h=new ve;return h.ownerDocument=this,h.appendData(a),h},createCDATASection:function(a){var h=new ie;return h.ownerDocument=this,h.appendData(a),h},createProcessingInstruction:function(a,h){var E=new Ke;return E.ownerDocument=this,E.tagName=E.target=a,E.nodeValue=E.data=h,E},createAttribute:function(a){var h=new F;return h.ownerDocument=this,h.name=a,h.nodeName=a,h.localName=a,h.specified=!0,h},createEntityReference:function(a){var h=new Ne;return h.ownerDocument=this,h.nodeName=a,h},createElementNS:function(a,h){var E=new A,K=h.split(":"),M=E.attributes=new ue;return E.childNodes=new Z,E.ownerDocument=this,E.nodeName=h,E.tagName=h,E.namespaceURI=a,K.length==2?(E.prefix=K[0],E.localName=K[1]):E.localName=h,M._ownerElement=E,E},createAttributeNS:function(a,h){var E=new F,K=h.split(":");return E.ownerDocument=this,E.nodeName=h,E.name=h,E.namespaceURI=a,E.specified=!0,K.length==2?(E.prefix=K[0],E.localName=K[1]):E.localName=h,E}},L(Ce,J);function A(){this._nsMap={}}A.prototype={nodeType:j,hasAttribute:function(a){return this.getAttributeNode(a)!=null},getAttribute:function(a){var h=this.getAttributeNode(a);return h&&h.value||""},getAttributeNode:function(a){return this.attributes.getNamedItem(a)},setAttribute:function(a,h){var E=this.ownerDocument.createAttribute(a);E.value=E.nodeValue=""+h,this.setAttributeNode(E)},removeAttribute:function(a){var h=this.getAttributeNode(a);h&&this.removeAttributeNode(h)},appendChild:function(a){return a.nodeType===N?this.insertBefore(a,null):y(this,a)},setAttributeNode:function(a){return this.attributes.setNamedItem(a)},setAttributeNodeNS:function(a){return this.attributes.setNamedItemNS(a)},removeAttributeNode:function(a){return this.attributes.removeNamedItem(a.nodeName)},removeAttributeNS:function(a,h){var E=this.getAttributeNodeNS(a,h);E&&this.removeAttributeNode(E)},hasAttributeNS:function(a,h){return this.getAttributeNodeNS(a,h)!=null},getAttributeNS:function(a,h){var E=this.getAttributeNodeNS(a,h);return E&&E.value||""},setAttributeNS:function(a,h,E){var K=this.ownerDocument.createAttributeNS(a,h);K.value=K.nodeValue=""+E,this.setAttributeNode(K)},getAttributeNodeNS:function(a,h){return this.attributes.getNamedItemNS(a,h)},getElementsByTagName:function(a){return new se(this,function(h){var E=[];return pe(h,function(K){K!==h&&K.nodeType==j&&(a==="*"||K.tagName==a)&&E.push(K)}),E})},getElementsByTagNameNS:function(a,h){return new se(this,function(E){var K=[];return pe(E,function(M){M!==E&&M.nodeType===j&&(a==="*"||M.namespaceURI===a)&&(h==="*"||M.localName==h)&&K.push(M)}),K})}},Ce.prototype.getElementsByTagName=A.prototype.getElementsByTagName,Ce.prototype.getElementsByTagNameNS=A.prototype.getElementsByTagNameNS,L(A,J);function F(){}F.prototype.nodeType=q,L(F,J);function ee(){}ee.prototype={data:"",substringData:function(a,h){return this.data.substring(a,a+h)},appendData:function(a){a=this.data+a,this.nodeValue=this.data=a,this.length=a.length},insertData:function(a,h){this.replaceData(a,0,h)},appendChild:function(a){throw new Error(oe[I])},deleteData:function(a,h){this.replaceData(a,h,"")},replaceData:function(a,h,E){var K=this.data.substring(0,a),M=this.data.substring(a+h);E=K+E+M,this.nodeValue=this.data=E,this.length=E.length}},L(ee,J);function he(){}he.prototype={nodeName:"#text",nodeType:te,splitText:function(a){var h=this.data,E=h.substring(a);h=h.substring(0,a),this.data=this.nodeValue=h,this.length=h.length;var K=this.ownerDocument.createTextNode(E);return this.parentNode&&this.parentNode.insertBefore(K,this.nextSibling),K}},L(he,ee);function ve(){}ve.prototype={nodeName:"#comment",nodeType:u},L(ve,ee);function ie(){}ie.prototype={nodeName:"#cdata-section",nodeType:X},L(ie,ee);function Pe(){}Pe.prototype.nodeType=p,L(Pe,J);function xe(){}xe.prototype.nodeType=H,L(xe,J);function Fe(){}Fe.prototype.nodeType=U,L(Fe,J);function Ne(){}Ne.prototype.nodeType=de,L(Ne,J);function je(){}je.prototype.nodeName="#document-fragment",je.prototype.nodeType=N,L(je,J);function Ke(){}Ke.prototype.nodeType=S,L(Ke,J);function Ve(){}Ve.prototype.serializeToString=function(a,h,E){return Ge.call(a,h,E)},J.prototype.toString=Ge;function Ge(a,h){var E=[],K=this.nodeType==9&&this.documentElement||this,M=K.prefix,Ie=K.namespaceURI;if(Ie&&M==null){var M=K.lookupPrefix(Ie);if(M==null)var Ue=[{namespace:Ie,prefix:null}]}return Qe(this,E,a,h,Ue),E.join("")}function He(a,h,E){var K=a.prefix||"",M=a.namespaceURI;if(!M||K==="xml"&&M===T.XML||M===T.XMLNS)return!1;for(var Ie=E.length;Ie--;){var Ue=E[Ie];if(Ue.prefix===K)return Ue.namespace!==M}return!0}function qe(a,h,E){a.push(" ",h,'="',E.replace(/[<>&"\t\n\r]/g,re),'"')}function Qe(a,h,E,K,M){if(M||(M=[]),K)if(a=K(a),a){if(typeof a=="string"){h.push(a);return}}else return;switch(a.nodeType){case j:var Ie=a.attributes,Ue=Ie.length,Ee=a.firstChild,$e=a.tagName;E=T.isHTML(a.namespaceURI)||E;var n=$e;if(!E&&!a.prefix&&a.namespaceURI){for(var v,s=0;s<Ie.length;s++)if(Ie.item(s).name==="xmlns"){v=Ie.item(s).value;break}if(!v)for(var f=M.length-1;f>=0;f--){var b=M[f];if(b.prefix===""&&b.namespace===a.namespaceURI){v=b.namespace;break}}if(v!==a.namespaceURI)for(var f=M.length-1;f>=0;f--){var b=M[f];if(b.namespace===a.namespaceURI){b.prefix&&(n=b.prefix+":"+$e);break}}}h.push("<",n);for(var C=0;C<Ue;C++){var x=Ie.item(C);x.prefix=="xmlns"?M.push({prefix:x.localName,namespace:x.value}):x.nodeName=="xmlns"&&M.push({prefix:"",namespace:x.value})}for(var C=0;C<Ue;C++){var x=Ie.item(C);if(He(x,E,M)){var _=x.prefix||"",Y=x.namespaceURI;qe(h,_?"xmlns:"+_:"xmlns",Y),M.push({prefix:_,namespace:Y})}Qe(x,h,E,K,M)}if($e===n&&He(a,E,M)){var _=a.prefix||"",Y=a.namespaceURI;qe(h,_?"xmlns:"+_:"xmlns",Y),M.push({prefix:_,namespace:Y})}if(Ee||E&&!/^(?:meta|link|img|br|hr|input)$/i.test($e)){if(h.push(">"),E&&/^script$/i.test($e))for(;Ee;)Ee.data?h.push(Ee.data):Qe(Ee,h,E,K,M.slice()),Ee=Ee.nextSibling;else for(;Ee;)Qe(Ee,h,E,K,M.slice()),Ee=Ee.nextSibling;h.push("</",n,">")}else h.push("/>");return;case P:case N:for(var Ee=a.firstChild;Ee;)Qe(Ee,h,E,K,M.slice()),Ee=Ee.nextSibling;return;case q:return qe(h,a.name,a.value);case te:return h.push(a.data.replace(/[<&>]/g,re));case X:return h.push("<![CDATA[",a.data,"]]>");case u:return h.push("<!--",a.data,"-->");case p:var Te=a.publicId,be=a.systemId;if(h.push("<!DOCTYPE ",a.name),Te)h.push(" PUBLIC ",Te),be&&be!="."&&h.push(" ",be),h.push(">");else if(be&&be!=".")h.push(" SYSTEM ",be,">");else{var Re=a.internalSubset;Re&&h.push(" [",Re,"]"),h.push(">")}return;case S:return h.push("<?",a.target," ",a.data,"?>");case de:return h.push("&",a.nodeName,";");default:h.push("??",a.nodeName)}}function it(a,h,E){var K;switch(h.nodeType){case j:K=h.cloneNode(!1),K.ownerDocument=a;case N:break;case q:E=!0;break}if(K||(K=h.cloneNode(!1)),K.ownerDocument=a,K.parentNode=null,E)for(var M=h.firstChild;M;)K.appendChild(it(a,M,E)),M=M.nextSibling;return K}function Ze(a,h,E){var K=new h.constructor;for(var M in h)if(Object.prototype.hasOwnProperty.call(h,M)){var Ie=h[M];typeof Ie!="object"&&Ie!=K[M]&&(K[M]=Ie)}switch(h.childNodes&&(K.childNodes=new Z),K.ownerDocument=a,K.nodeType){case j:var Ue=h.attributes,$e=K.attributes=new ue,n=Ue.length;$e._ownerElement=K;for(var v=0;v<n;v++)K.setAttributeNode(Ze(a,Ue.item(v),!0));break;case q:E=!0}if(E)for(var s=h.firstChild;s;)K.appendChild(Ze(a,s,E)),s=s.nextSibling;return K}function Xe(a,h,E){a[h]=E}try{if(Object.defineProperty){let a=function(h){switch(h.nodeType){case j:case N:var E=[];for(h=h.firstChild;h;)h.nodeType!==7&&h.nodeType!==8&&E.push(a(h)),h=h.nextSibling;return E.join("");default:return h.nodeValue}};Object.defineProperty(se.prototype,"length",{get:function(){return ce(this),this.$$length}}),Object.defineProperty(J.prototype,"textContent",{get:function(){return a(this)},set:function(h){switch(this.nodeType){case j:case N:for(;this.firstChild;)this.removeChild(this.firstChild);(h||String(h))&&this.appendChild(this.ownerDocument.createTextNode(h));break;default:this.data=h,this.value=h,this.nodeValue=h}}}),Xe=function(h,E,K){h["$$"+E]=K}}}catch{}i.DocumentType=Pe,i.DOMException=W,i.DOMImplementation=ye,i.Element=A,i.Node=J,i.NodeList=Z,i.XMLSerializer=Ve},"./node_modules/@xmldom/xmldom/lib/entities.js":function(o,i,t){var r=t("./node_modules/@xmldom/xmldom/lib/conventions.js").freeze;i.XML_ENTITIES=r({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),i.HTML_ENTITIES=r({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",times:"×",divide:"÷",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",euro:"€",trade:"™",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦"}),i.entityMap=i.HTML_ENTITIES},"./node_modules/@xmldom/xmldom/lib/index.js":function(o,i,t){var r=t("./node_modules/@xmldom/xmldom/lib/dom.js");i.DOMImplementation=r.DOMImplementation,i.XMLSerializer=r.XMLSerializer,i.DOMParser=t("./node_modules/@xmldom/xmldom/lib/dom-parser.js").DOMParser},"./node_modules/@xmldom/xmldom/lib/sax.js":function(o,i,t){var r=t("./node_modules/@xmldom/xmldom/lib/conventions.js").NAMESPACE,e=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,T=new RegExp("[\\-\\.0-9"+e.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),m=new RegExp("^"+e.source+T.source+"*(?::"+e.source+T.source+"*)?$"),w=0,B=1,k=2,R=3,D=4,L=5,z=6,j=7;function q(I,V){this.message=I,this.locator=V,Error.captureStackTrace&&Error.captureStackTrace(this,q)}q.prototype=new Error,q.prototype.name=q.name;function te(){}te.prototype={parse:function(I,V,Q){var W=this.domBuilder;W.startDocument(),p(V,V={}),X(I,V,Q,W,this.errorHandler),W.endDocument()}};function X(I,V,Q,W,Z){function se(A){if(A>65535){A-=65536;var F=55296+(A>>10),ee=56320+(A&1023);return String.fromCharCode(F,ee)}else return String.fromCharCode(A)}function ce(A){var F=A.slice(1,-1);return Object.hasOwnProperty.call(Q,F)?Q[F]:F.charAt(0)==="#"?se(parseInt(F.substr(1).replace("x","0x"))):(Z.error("entity not found:"+A),A)}function ue(A){if(A>Ce){var F=I.substring(Ce,A).replace(/&#?\w+;/g,ce);J&&ne(Ce),W.characters(F,0,A-Ce),Ce=A}}function ne(A,F){for(;A>=le&&(F=ye.exec(I));)fe=F.index,le=fe+F[0].length,J.lineNumber++;J.columnNumber=A-fe+1}for(var fe=0,le=0,ye=/.*(?:\r\n?|\n)|.*$/g,J=W.locator,re=[{currentNSMap:V}],pe={},Ce=0;;){try{var ge=I.indexOf("<",Ce);if(ge<0){if(!I.substr(Ce).match(/^\s*$/)){var me=W.doc,Se=me.createTextNode(I.substr(Ce));me.appendChild(Se),W.currentElement=Se}return}switch(ge>Ce&&ue(ge),I.charAt(ge+1)){case"/":var g=I.indexOf(">",ge+3),ke=I.substring(ge+2,g).replace(/[ \t\n\r]+$/g,""),we=re.pop();g<0?(ke=I.substring(ge+2).replace(/[\s<].*/,""),Z.error("end tag name: "+ke+" is not complete:"+we.tagName),g=ge+1+ke.length):ke.match(/\s</)&&(ke=ke.replace(/[\s<].*/,""),Z.error("end tag name: "+ke+" maybe not complete"),g=ge+1+ke.length);var Be=we.localNSMap,Ae=we.tagName==ke,Oe=Ae||we.tagName&&we.tagName.toLowerCase()==ke.toLowerCase();if(Oe){if(W.endElement(we.uri,we.localName,ke),Be)for(var ae in Be)Object.prototype.hasOwnProperty.call(Be,ae)&&W.endPrefixMapping(ae);Ae||Z.fatalError("end tag name: "+ke+" is not match the current start tagName:"+we.tagName)}else re.push(we);g++;break;case"?":J&&ne(ge),g=H(I,ge,W);break;case"!":J&&ne(ge),g=N(I,ge,W,Z);break;default:J&&ne(ge);var O=new G,$=re[re.length-1].currentNSMap,g=U(I,ge,O,$,ce,Z),l=O.length;if(!O.closed&&P(I,g,O.tagName,pe)&&(O.closed=!0,Q.nbsp||Z.warning("unclosed xml attribute")),J&&l){for(var d=de(J,{}),c=0;c<l;c++){var y=O[c];ne(y.offset),y.locator=de(J,{})}W.locator=d,S(O,W,$)&&re.push(O),W.locator=J}else S(O,W,$)&&re.push(O);r.isHTML(O.uri)&&!O.closed?g=u(I,g,O.tagName,ce,W):g++}}catch(A){if(A instanceof q)throw A;Z.error("element parse error: "+A),g=-1}g>Ce?Ce=g:ue(Math.max(ge,Ce)+1)}}function de(I,V){return V.lineNumber=I.lineNumber,V.columnNumber=I.columnNumber,V}function U(I,V,Q,W,Z,se){function ce(J,re,pe){Q.attributeNames.hasOwnProperty(J)&&se.fatalError("Attribute "+J+" redefined"),Q.addValue(J,re.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,Z),pe)}for(var ue,ne,fe=++V,le=w;;){var ye=I.charAt(fe);switch(ye){case"=":if(le===B)ue=I.slice(V,fe),le=R;else if(le===k)le=R;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(le===R||le===B)if(le===B&&(se.warning('attribute value must after "="'),ue=I.slice(V,fe)),V=fe+1,fe=I.indexOf(ye,V),fe>0)ne=I.slice(V,fe),ce(ue,ne,V-1),le=L;else throw new Error("attribute value no end '"+ye+"' match");else if(le==D)ne=I.slice(V,fe),ce(ue,ne,V),se.warning('attribute "'+ue+'" missed start quot('+ye+")!!"),V=fe+1,le=L;else throw new Error('attribute value must after "="');break;case"/":switch(le){case w:Q.setTagName(I.slice(V,fe));case L:case z:case j:le=j,Q.closed=!0;case D:case B:case k:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return se.error("unexpected end of input"),le==w&&Q.setTagName(I.slice(V,fe)),fe;case">":switch(le){case w:Q.setTagName(I.slice(V,fe));case L:case z:case j:break;case D:case B:ne=I.slice(V,fe),ne.slice(-1)==="/"&&(Q.closed=!0,ne=ne.slice(0,-1));case k:le===k&&(ne=ue),le==D?(se.warning('attribute "'+ne+'" missed quot(")!'),ce(ue,ne,V)):((!r.isHTML(W[""])||!ne.match(/^(?:disabled|checked|selected)$/i))&&se.warning('attribute "'+ne+'" missed value!! "'+ne+'" instead!!'),ce(ne,ne,V));break;case R:throw new Error("attribute value missed!!")}return fe;case"":ye=" ";default:if(ye<=" ")switch(le){case w:Q.setTagName(I.slice(V,fe)),le=z;break;case B:ue=I.slice(V,fe),le=k;break;case D:var ne=I.slice(V,fe);se.warning('attribute "'+ne+'" missed quot(")!!'),ce(ue,ne,V);case L:le=z;break}else switch(le){case k:Q.tagName,(!r.isHTML(W[""])||!ue.match(/^(?:disabled|checked|selected)$/i))&&se.warning('attribute "'+ue+'" missed value!! "'+ue+'" instead2!!'),ce(ue,ue,V),V=fe,le=B;break;case L:se.warning('attribute space is required"'+ue+'"!!');case z:le=B,V=fe;break;case R:le=D,V=fe;break;case j:throw new Error("elements closed character '/' and '>' must be connected to")}}fe++}}function S(I,V,Q){for(var W=I.tagName,Z=null,ye=I.length;ye--;){var se=I[ye],ce=se.qName,ue=se.value,J=ce.indexOf(":");if(J>0)var ne=se.prefix=ce.slice(0,J),fe=ce.slice(J+1),le=ne==="xmlns"&&fe;else fe=ce,ne=null,le=ce==="xmlns"&&"";se.localName=fe,le!==!1&&(Z==null&&(Z={},p(Q,Q={})),Q[le]=Z[le]=ue,se.uri=r.XMLNS,V.startPrefixMapping(le,ue))}for(var ye=I.length;ye--;){se=I[ye];var ne=se.prefix;ne&&(ne==="xml"&&(se.uri=r.XML),ne!=="xmlns"&&(se.uri=Q[ne||""]))}var J=W.indexOf(":");J>0?(ne=I.prefix=W.slice(0,J),fe=I.localName=W.slice(J+1)):(ne=null,fe=I.localName=W);var re=I.uri=Q[ne||""];if(V.startElement(re,fe,W,I),I.closed){if(V.endElement(re,fe,W),Z)for(ne in Z)Object.prototype.hasOwnProperty.call(Z,ne)&&V.endPrefixMapping(ne)}else return I.currentNSMap=Q,I.localNSMap=Z,!0}function u(I,V,Q,W,Z){if(/^(?:script|textarea)$/i.test(Q)){var se=I.indexOf("</"+Q+">",V),ce=I.substring(V+1,se);if(/[&<]/.test(ce))return/^script$/i.test(Q)?(Z.characters(ce,0,ce.length),se):(ce=ce.replace(/&#?\w+;/g,W),Z.characters(ce,0,ce.length),se)}return V+1}function P(I,V,Q,W){var Z=W[Q];return Z==null&&(Z=I.lastIndexOf("</"+Q+">"),Z<V&&(Z=I.lastIndexOf("</"+Q)),W[Q]=Z),Z<V}function p(I,V){for(var Q in I)Object.prototype.hasOwnProperty.call(I,Q)&&(V[Q]=I[Q])}function N(I,V,Q,W){var Z=I.charAt(V+2);switch(Z){case"-":if(I.charAt(V+3)==="-"){var se=I.indexOf("-->",V+4);return se>V?(Q.comment(I,V+4,se-V-4),se+3):(W.error("Unclosed comment"),-1)}else return-1;default:if(I.substr(V+3,6)=="CDATA["){var se=I.indexOf("]]>",V+9);return Q.startCDATA(),Q.characters(I,V+9,se-V-9),Q.endCDATA(),se+3}var ce=oe(I,V),ue=ce.length;if(ue>1&&/!doctype/i.test(ce[0][0])){var ne=ce[1][0],fe=!1,le=!1;ue>3&&(/^public$/i.test(ce[2][0])?(fe=ce[3][0],le=ue>4&&ce[4][0]):/^system$/i.test(ce[2][0])&&(le=ce[3][0]));var ye=ce[ue-1];return Q.startDTD(ne,fe,le),Q.endDTD(),ye.index+ye[0].length}}return-1}function H(I,V,Q){var W=I.indexOf("?>",V);if(W){var Z=I.substring(V,W).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return Z?(Z[0].length,Q.processingInstruction(Z[1],Z[2]),W+2):-1}return-1}function G(){this.attributeNames={}}G.prototype={setTagName:function(I){if(!m.test(I))throw new Error("invalid tagName:"+I);this.tagName=I},addValue:function(I,V,Q){if(!m.test(I))throw new Error("invalid attribute:"+I);this.attributeNames[I]=this.length,this[this.length++]={qName:I,value:V,offset:Q}},length:0,getLocalName:function(I){return this[I].localName},getLocator:function(I){return this[I].locator},getQName:function(I){return this[I].qName},getURI:function(I){return this[I].uri},getValue:function(I){return this[I].value}};function oe(I,V){var Q,W=[],Z=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(Z.lastIndex=V,Z.exec(I);Q=Z.exec(I);)if(W.push(Q),Q[1])return W}i.XMLReader=te,i.ParseError=q},"./node_modules/process/browser.js":function(o,i){var t=o.exports={},r,e;function T(){throw new Error("setTimeout has not been defined")}function m(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?r=setTimeout:r=T}catch{r=T}try{typeof clearTimeout=="function"?e=clearTimeout:e=m}catch{e=m}})();function w(X){if(r===setTimeout)return setTimeout(X,0);if((r===T||!r)&&setTimeout)return r=setTimeout,setTimeout(X,0);try{return r(X,0)}catch{try{return r.call(null,X,0)}catch{return r.call(this,X,0)}}}function B(X){if(e===clearTimeout)return clearTimeout(X);if((e===m||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(X);try{return e(X)}catch{try{return e.call(null,X)}catch{return e.call(this,X)}}}var k=[],R=!1,D,L=-1;function z(){!R||!D||(R=!1,D.length?k=D.concat(k):L=-1,k.length&&j())}function j(){if(!R){var X=w(z);R=!0;for(var de=k.length;de;){for(D=k,k=[];++L<de;)D&&D[L].run();L=-1,de=k.length}D=null,R=!1,B(X)}}t.nextTick=function(X){var de=new Array(arguments.length-1);if(arguments.length>1)for(var U=1;U<arguments.length;U++)de[U-1]=arguments[U];k.push(new q(X,de)),k.length===1&&!R&&w(j)};function q(X,de){this.fun=X,this.array=de}q.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function te(){}t.on=te,t.addListener=te,t.once=te,t.off=te,t.removeListener=te,t.removeAllListeners=te,t.emit=te,t.prependListener=te,t.prependOnceListener=te,t.listeners=function(X){return[]},t.binding=function(X){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(X){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},"./node_modules/webpack/buildin/amd-options.js":function(o,i){(function(t){o.exports=t}).call(this,{})},"./node_modules/webpack/buildin/global.js":function(o,i){var t;t=function(){return this}();try{t=t||new Function("return this")()}catch{typeof window=="object"&&(t=window)}o.exports=t},"./node_modules/webpack/buildin/module.js":function(o,i){o.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},"./package.json":function(o){o.exports=JSON.parse('{"name":"cos-js-sdk-v5","version":"1.4.15","description":"JavaScript SDK for [腾讯云对象存储](https://cloud.tencent.com/product/cos)","main":"dist/cos-js-sdk-v5.js","types":"index.d.ts","scripts":{"server":"node server/sts.js","dev":"cross-env NODE_ENV=development webpack -w --mode=development","build":"cross-env NODE_ENV=production webpack --mode=production","cos-auth.min.js":"uglifyjs ./demo/common/cos-auth.js -o ./demo/common/cos-auth.min.js -c -m"},"repository":{"type":"git","url":"git+https://github.com/tencentyun/cos-js-sdk-v5.git"},"keywords":[],"author":"carsonxu","license":"ISC","bugs":{"url":"https://github.com/tencentyun/cos-js-sdk-v5/issues"},"homepage":"https://github.com/tencentyun/cos-js-sdk-v5#readme","dependencies":{"@xmldom/xmldom":"^0.8.6"},"devDependencies":{"@babel/core":"7.17.9","@babel/plugin-transform-runtime":"7.18.10","@babel/preset-env":"7.16.11","babel-loader":"8.2.5","body-parser":"^1.18.3","cross-env":"^5.2.0","express":"^4.16.4","qcloud-cos-sts":"^3.0.2","request":"^2.87.0","terser-webpack-plugin":"4.2.3","webpack":"4.46.0","webpack-cli":"4.10.0"}}')},"./src/advance.js":function(o,i,t){var r=t("./node_modules/@babel/runtime/helpers/typeof.js"),e=t("./src/session.js"),T=t("./src/async.js"),m=t("./src/event.js").EventProxy,w=t("./src/util.js"),B=t("./src/tracker.js");function k(p,N){var H=this,G=new m,oe=p.TaskId,I=p.Bucket,V=p.Region,Q=p.Key,W=p.Body,Z=p.ChunkSize||p.SliceSize||H.options.ChunkSize,se=p.AsyncLimit,ce=p.StorageClass,ue=p.ServerSideEncryption,ne,fe,le=p.onHashProgress,ye=p.tracker;ye&&ye.setParams({chunkSize:Z}),G.on("error",function(J){if(H._isRunningTask(oe))return J.UploadId=p.UploadData.UploadId||"",N(J)}),G.on("upload_complete",function(J){var re=w.extend({UploadId:p.UploadData.UploadId||""},J);N(null,re)}),G.on("upload_slice_complete",function(J){var re={};w.each(p.Headers,function(pe,Ce){var ge=Ce.toLowerCase();(ge.indexOf("x-cos-meta-")===0||ge==="pic-operations")&&(re[Ce]=pe)}),q.call(H,{Bucket:I,Region:V,Key:Q,UploadId:J.UploadId,SliceList:J.SliceList,Headers:re,tracker:ye},function(pe,Ce){if(H._isRunningTask(oe)){if(e.removeUsing(J.UploadId),pe)return fe(null,!0),G.emit("error",pe);e.removeUploadId.call(H,J.UploadId),fe({loaded:ne,total:ne},!0),G.emit("upload_complete",Ce)}})}),G.on("get_upload_data_finish",function(J){var re=e.getFileId(W,p.ChunkSize,I,Q);re&&e.saveUploadId.call(H,re,J.UploadId,H.options.UploadIdCacheLimit),e.setUsing(J.UploadId),fe(null,!0),z.call(H,{TaskId:oe,Bucket:I,Region:V,Key:Q,Body:W,FileSize:ne,SliceSize:Z,AsyncLimit:se,ServerSideEncryption:ue,UploadData:J,Headers:p.Headers,onProgress:fe,tracker:ye},function(pe,Ce){if(H._isRunningTask(oe)){if(pe)return fe(null,!0),G.emit("error",pe);G.emit("upload_slice_complete",Ce)}})}),G.on("get_file_size_finish",function(){if(fe=w.throttleOnProgress.call(H,ne,p.onProgress),p.UploadData.UploadId)G.emit("get_upload_data_finish",p.UploadData);else{var J=w.extend({TaskId:oe,Bucket:I,Region:V,Key:Q,Headers:p.Headers,StorageClass:ce,Body:W,FileSize:ne,SliceSize:Z,onHashProgress:le,tracker:ye},p);R.call(H,J,function(re,pe){if(H._isRunningTask(oe)){if(re)return G.emit("error",re);p.UploadData.UploadId=pe.UploadId,p.UploadData.PartList=pe.PartList,G.emit("get_upload_data_finish",p.UploadData)}})}}),ne=p.ContentLength,delete p.ContentLength,!p.Headers&&(p.Headers={}),w.each(p.Headers,function(J,re){re.toLowerCase()==="content-length"&&delete p.Headers[re]}),function(){for(var J=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,5120],re=1024*1024,pe=0;pe<J.length&&(re=J[pe]*1024*1024,!(ne/re<=H.options.MaxPartNumber));pe++);p.ChunkSize=p.SliceSize=Z=Math.max(Z,re)}(),ne===0?(p.Body="",p.ContentLength=0,p.SkipTask=!0,H.putObject(p,N)):G.emit("get_file_size_finish")}function R(p,N){var H=p.TaskId,G=p.Bucket,oe=p.Region,I=p.Key,V=p.StorageClass,Q=this,W={},Z=p.FileSize,se=p.SliceSize,ce=Math.ceil(Z/se),ue=0,ne=w.throttleOnProgress.call(Q,Z,p.onHashProgress),fe=function(re,pe){var Ce=se*(re-1),ge=Math.min(Ce+se,Z),me=ge-Ce;W[re]?pe(null,{PartNumber:re,ETag:W[re],Size:me}):w.fileSlice(p.Body,Ce,ge,!1,function(Se){w.getFileMd5(Se,function(ke,we){if(ke)return pe(w.error(ke));var Be='"'+we+'"';W[re]=Be,ue+=me,ne({loaded:ue,total:Z}),pe(null,{PartNumber:re,ETag:Be,Size:me})})})},le=function(re,pe){var Ce=re.length;if(Ce===0)return pe(null,!0);if(Ce>ce)return pe(null,!1);if(Ce>1){var ge=Math.max(re[0].Size,re[1].Size);if(ge!==se)return pe(null,!1)}var me=function Se(ke){if(ke<Ce){var we=re[ke];fe(we.PartNumber,function(Be,Ae){Ae&&Ae.ETag===we.ETag&&Ae.Size===we.Size?Se(ke+1):pe(null,!1)})}else pe(null,!0)};me(0)},ye=new m;ye.on("error",function(J){if(Q._isRunningTask(H))return N(J)}),ye.on("upload_id_available",function(J){var re={},pe=[];w.each(J.PartList,function(me){re[me.PartNumber]=me});for(var Ce=1;Ce<=ce;Ce++){var ge=re[Ce];ge?(ge.PartNumber=Ce,ge.Uploaded=!0):ge={PartNumber:Ce,ETag:null,Uploaded:!1},pe.push(ge)}J.PartList=pe,N(null,J)}),ye.on("no_available_upload_id",function(){if(Q._isRunningTask(H)){var J=w.extend({Bucket:G,Region:oe,Key:I,Query:w.clone(p.Query),StorageClass:V,Body:p.Body,calledBySdk:"sliceUploadFile",tracker:p.tracker},p),re=w.clone(p.Headers);delete re["x-cos-mime-limit"],J.Headers=re,Q.multipartInit(J,function(pe,Ce){if(Q._isRunningTask(H)){if(pe)return ye.emit("error",pe);var ge=Ce.UploadId;if(!ge)return N(w.error(new Error("no such upload id")));ye.emit("upload_id_available",{UploadId:ge,PartList:[]})}})}}),ye.on("has_and_check_upload_id",function(J){J=J.reverse(),T.eachLimit(J,1,function(re,pe){if(Q._isRunningTask(H)){if(e.using[re]){pe();return}L.call(Q,{Bucket:G,Region:oe,Key:I,UploadId:re,tracker:p.tracker},function(Ce,ge){if(Q._isRunningTask(H)){if(Ce)return e.removeUsing(re),ye.emit("error",Ce);var me=ge.PartList;me.forEach(function(Se){Se.PartNumber*=1,Se.Size*=1,Se.ETag=Se.ETag||""}),le(me,function(Se,ke){if(Q._isRunningTask(H)){if(Se)return ye.emit("error",Se);ke?pe({UploadId:re,PartList:me}):pe()}})}})}},function(re){Q._isRunningTask(H)&&(ne(null,!0),re&&re.UploadId?ye.emit("upload_id_available",re):ye.emit("no_available_upload_id"))})}),ye.on("seek_local_avail_upload_id",function(J){var re=e.getFileId(p.Body,p.ChunkSize,G,I),pe=e.getUploadIdList.call(Q,re);if(!re||!pe){ye.emit("has_and_check_upload_id",J);return}var Ce=function ge(me){if(me>=pe.length){ye.emit("has_and_check_upload_id",J);return}var Se=pe[me];if(!w.isInArray(J,Se)){e.removeUploadId.call(Q,Se),ge(me+1);return}if(e.using[Se]){ge(me+1);return}L.call(Q,{Bucket:G,Region:oe,Key:I,UploadId:Se,tracker:p.tracker},function(ke,we){Q._isRunningTask(H)&&(ke?(e.removeUploadId.call(Q,Se),ge(me+1)):ye.emit("upload_id_available",{UploadId:Se,PartList:we.PartList}))})};Ce(0)}),ye.on("get_remote_upload_id_list",function(){D.call(Q,{Bucket:G,Region:oe,Key:I,tracker:p.tracker},function(J,re){if(Q._isRunningTask(H)){if(J)return ye.emit("error",J);var pe=w.filter(re.UploadList,function(me){return me.Key===I&&(!V||me.StorageClass.toUpperCase()===V.toUpperCase())}).reverse().map(function(me){return me.UploadId||me.UploadID});if(pe.length)ye.emit("seek_local_avail_upload_id",pe);else{var Ce=e.getFileId(p.Body,p.ChunkSize,G,I),ge;Ce&&(ge=e.getUploadIdList.call(Q,Ce))&&w.each(ge,function(me){e.removeUploadId.call(Q,me)}),ye.emit("no_available_upload_id")}}})}),ye.emit("get_remote_upload_id_list")}function D(p,N){var H=this,G=[],oe={Bucket:p.Bucket,Region:p.Region,Prefix:p.Key,calledBySdk:p.calledBySdk||"sliceUploadFile",tracker:p.tracker},I=function V(){H.multipartList(oe,function(Q,W){if(Q)return N(Q);G.push.apply(G,W.Upload||[]),W.IsTruncated==="true"?(oe.KeyMarker=W.NextKeyMarker,oe.UploadIdMarker=W.NextUploadIdMarker,V()):N(null,{UploadList:G})})};I()}function L(p,N){var H=this,G=[],oe={Bucket:p.Bucket,Region:p.Region,Key:p.Key,UploadId:p.UploadId,calledBySdk:"sliceUploadFile",tracker:p.tracker},I=function V(){H.multipartListPart(oe,function(Q,W){if(Q)return N(Q);G.push.apply(G,W.Part||[]),W.IsTruncated==="true"?(oe.PartNumberMarker=W.NextPartNumberMarker,V()):N(null,{PartList:G})})};I()}function z(p,N){var H=this,G=p.TaskId,oe=p.Bucket,I=p.Region,V=p.Key,Q=p.UploadData,W=p.FileSize,Z=p.SliceSize,se=Math.min(p.AsyncLimit||H.options.ChunkParallelLimit||1,256),ce=p.Body,ue=Math.ceil(W/Z),ne=0,fe=p.ServerSideEncryption,le=p.Headers,ye=w.filter(Q.PartList,function(re){return re.Uploaded&&(ne+=re.PartNumber>=ue&&W%Z||Z),!re.Uploaded}),J=p.onProgress;T.eachLimit(ye,se,function(re,pe){if(H._isRunningTask(G)){var Ce=re.PartNumber,ge=Math.min(W,re.PartNumber*Z)-(re.PartNumber-1)*Z,me=0;j.call(H,{TaskId:G,Bucket:oe,Region:I,Key:V,SliceSize:Z,FileSize:W,PartNumber:Ce,ServerSideEncryption:fe,Body:ce,UploadData:Q,Headers:le,onProgress:function(ke){ne+=ke.loaded-me,me=ke.loaded,J({loaded:ne,total:W})},tracker:p.tracker},function(Se,ke){H._isRunningTask(G)&&(!Se&&!ke.ETag&&(Se='get ETag error, please add "ETag" to CORS ExposeHeader setting.( 获取ETag失败，请在CORS ExposeHeader设置中添加ETag，请参考文档：https://cloud.tencent.com/document/product/436/13318 )'),Se?ne-=me:(ne+=ge-me,re.ETag=ke.ETag),J({loaded:ne,total:W}),pe(Se||null,ke))})}},function(re){if(H._isRunningTask(G)){if(re)return N(re);N(null,{UploadId:Q.UploadId,SliceList:Q.PartList})}})}function j(p,N){var H=this,G=p.TaskId,oe=p.Bucket,I=p.Region,V=p.Key,Q=p.FileSize,W=p.Body,Z=p.PartNumber*1,se=p.SliceSize,ce=p.ServerSideEncryption,ue=p.UploadData,ne=p.Headers||{},fe=H.options.ChunkRetryTimes+1,le=se*(Z-1),ye=se,J=le+se;J>Q&&(J=Q,ye=J-le);var re=["x-cos-traffic-limit","x-cos-mime-limit"],pe={};w.each(ne,function(ge,me){re.indexOf(me)>-1&&(pe[me]=ge)});var Ce=ue.PartList[Z-1];T.retry(fe,function(ge){H._isRunningTask(G)&&w.fileSlice(W,le,J,!0,function(me){H.multipartUpload({TaskId:G,Bucket:oe,Region:I,Key:V,ContentLength:ye,PartNumber:Z,UploadId:ue.UploadId,ServerSideEncryption:ce,Body:me,Headers:pe,onProgress:p.onProgress,calledBySdk:"sliceUploadFile",tracker:p.tracker},function(Se,ke){if(H._isRunningTask(G))return Se?ge(Se):(Ce.Uploaded=!0,ge(null,ke))})})},function(ge,me){if(H._isRunningTask(G))return N(ge,me)})}function q(p,N){var H=p.Bucket,G=p.Region,oe=p.Key,I=p.UploadId,V=p.SliceList,Q=this,W=this.options.ChunkRetryTimes+1,Z=p.Headers,se=V.map(function(ce){return{PartNumber:ce.PartNumber,ETag:ce.ETag}});T.retry(W,function(ce){Q.multipartComplete({Bucket:H,Region:G,Key:oe,UploadId:I,Parts:se,Headers:Z,calledBySdk:"sliceUploadFile",tracker:p.tracker},ce)},function(ce,ue){N(ce,ue)})}function te(p,N){var H=p.Bucket,G=p.Region,oe=p.Key,I=p.UploadId,V=p.Level||"task",Q=p.AsyncLimit,W=this,Z=new m;if(Z.on("error",function(se){return N(se)}),Z.on("get_abort_array",function(se){X.call(W,{Bucket:H,Region:G,Key:oe,Headers:p.Headers,AsyncLimit:Q,AbortArray:se},N)}),V==="bucket")D.call(W,{Bucket:H,Region:G,calledBySdk:"abortUploadTask"},function(se,ce){if(se)return N(se);Z.emit("get_abort_array",ce.UploadList||[])});else if(V==="file"){if(!oe)return N(w.error(new Error("abort_upload_task_no_key")));D.call(W,{Bucket:H,Region:G,Key:oe,calledBySdk:"abortUploadTask"},function(se,ce){if(se)return N(se);Z.emit("get_abort_array",ce.UploadList||[])})}else if(V==="task"){if(!I)return N(w.error(new Error("abort_upload_task_no_id")));if(!oe)return N(w.error(new Error("abort_upload_task_no_key")));Z.emit("get_abort_array",[{Key:oe,UploadId:I}])}else return N(w.error(new Error("abort_unknown_level")))}function X(p,N){var H=p.Bucket,G=p.Region,oe=p.Key,I=p.AbortArray,V=p.AsyncLimit||1,Q=this,W=0,Z=new Array(I.length);T.eachLimit(I,V,function(se,ce){var ue=W;if(oe&&oe!==se.Key){Z[ue]={error:{KeyNotMatch:!0}},ce(null);return}var ne=se.UploadId||se.UploadID;Q.multipartAbort({Bucket:H,Region:G,Key:se.Key,Headers:p.Headers,UploadId:ne},function(fe){var le={Bucket:H,Region:G,Key:se.Key,UploadId:ne};Z[ue]={error:fe,task:le},ce(null)}),W++},function(se){if(se)return N(se);for(var ce=[],ue=[],ne=0,fe=Z.length;ne<fe;ne++){var le=Z[ne];le.task&&(le.error?ue.push(le.task):ce.push(le.task))}return N(null,{successList:ce,errorList:ue})})}function de(p,N){var H=this,G=p.SliceSize===void 0?H.options.SliceSize:p.SliceSize,oe=[],I=p.Body,V=I.size||I.length||0,Q={TaskId:""};if(H.options.EnableTracker){var W=H.options.UseAccelerate||typeof H.options.Domain=="string"&&H.options.Domain.includes("accelerate.");p.tracker=new B({bucket:p.Bucket,region:p.Region,apiName:"uploadFile",fileKey:p.Key,fileSize:V,accelerate:W,deepTracker:H.options.DeepTracker,customId:H.options.CustomId,delay:H.options.TrackerDelay})}w.each(p,function(fe,le){r(fe)!=="object"&&typeof fe!="function"&&(Q[le]=fe)});var Z=p.onTaskReady,se=function(le){Q.TaskId=le,Z&&Z(le)};p.onTaskReady=se;var ce=V>G?"sliceUploadFile":"putObject",ue=p.onFileFinish,ne=function(le,ye){p.tracker&&p.tracker.formatResult(le,ye),ue&&ue(le,ye,Q),N&&N(le,ye)};oe.push({api:ce,params:p,callback:ne}),H._addTasks(oe)}function U(p,N){var H=this,G=p.SliceSize===void 0?H.options.SliceSize:p.SliceSize,oe=0,I=0,V=w.throttleOnProgress.call(H,I,p.onProgress),Q=p.files.length,W=p.onFileFinish,Z=Array(Q),se=function(ne,fe,le){V(null,!0),W&&W(ne,fe,le),Z[le.Index]={options:le,error:ne,data:fe},--Q<=0&&N&&N(null,{files:Z})},ce=[];w.each(p.files,function(ue,ne){(function(){var fe=ue.Body,le=fe.size||fe.length||0,ye={Index:ne,TaskId:""};if(oe+=le,H.options.EnableTracker){var J=H.options.UseAccelerate||typeof H.options.Domain=="string"&&H.options.Domain.includes("accelerate.");ue.tracker=new B({bucket:ue.Bucket,region:ue.Region,apiName:"uploadFiles",fileKey:ue.Key,fileSize:le,accelerate:J,deepTracker:H.options.DeepTracker,customId:H.options.CustomId,delay:H.options.TrackerDelay})}w.each(ue,function(Be,Ae){r(Be)!=="object"&&typeof Be!="function"&&(ye[Ae]=Be)});var re=ue.onTaskReady,pe=function(Ae){ye.TaskId=Ae,re&&re(Ae)};ue.onTaskReady=pe;var Ce=0,ge=ue.onProgress,me=function(Ae){I=I-Ce+Ae.loaded,Ce=Ae.loaded,ge&&ge(Ae),V({loaded:I,total:oe})};ue.onProgress=me;var Se=le>G?"sliceUploadFile":"putObject",ke=ue.onFileFinish,we=function(Ae,Oe){ue.tracker&&ue.tracker.formatResult(Ae,Oe),ke&&ke(Ae,Oe),se&&se(Ae,Oe,ye)};ce.push({api:Se,params:ue,callback:we})})()}),H._addTasks(ce)}function S(p,N){var H=new m,G=this,oe=p.Bucket,I=p.Region,V=p.Key,Q=p.CopySource,W=w.getSourceParams.call(this,Q);if(!W){N(w.error(new Error("CopySource format error")));return}var Z=W.Bucket,se=W.Region,ce=decodeURIComponent(W.Key),ue=p.CopySliceSize===void 0?G.options.CopySliceSize:p.CopySliceSize;ue=Math.max(0,ue);var ne=p.CopyChunkSize||this.options.CopyChunkSize,fe=this.options.CopyChunkParallelLimit,le=this.options.ChunkRetryTimes+1,ye=0,J=0,re,pe,Ce={},ge={},me={};H.on("copy_slice_complete",function(Se){w.each(p.Headers,function(we,Be){Be.toLowerCase().indexOf("x-cos-meta-")});var ke=w.map(Se.PartList,function(we){return{PartNumber:we.PartNumber,ETag:we.ETag}});T.retry(le,function(we){G.multipartComplete({Bucket:oe,Region:I,Key:V,UploadId:Se.UploadId,Parts:ke,calledBySdk:"sliceCopyFile"},we)},function(we,Be){if(e.removeUsing(Se.UploadId),we)return pe(null,!0),N(we);e.removeUploadId(Se.UploadId),pe({loaded:re,total:re},!0),N(null,Be)})}),H.on("get_copy_data_finish",function(Se){var ke=e.getCopyFileId(Q,Ce,ne,oe,V);ke&&e.saveUploadId(ke,Se.UploadId,G.options.UploadIdCacheLimit),e.setUsing(Se.UploadId);var we=w.filter(Se.PartList,function(Be){return Be.Uploaded&&(J+=Be.PartNumber>=ye&&re%ne||ne),!Be.Uploaded});T.eachLimit(we,fe,function(Be,Ae){var Oe=Be.PartNumber,ae=Be.CopySourceRange,O=Be.end-Be.start;T.retry(le,function($){u.call(G,{Bucket:oe,Region:I,Key:V,CopySource:Q,UploadId:Se.UploadId,PartNumber:Oe,CopySourceRange:ae},$)},function($,g){if($)return Ae($);J+=O,pe({loaded:J,total:re}),Be.ETag=g.ETag,Ae($||null,g)})},function(Be){if(Be)return e.removeUsing(Se.UploadId),pe(null,!0),N(Be);H.emit("copy_slice_complete",Se)})}),H.on("get_chunk_size_finish",function(){var Se=function(){G.multipartInit({Bucket:oe,Region:I,Key:V,Headers:me},function(Oe,ae){if(Oe)return N(Oe);p.UploadId=ae.UploadId,H.emit("get_copy_data_finish",{UploadId:p.UploadId,PartList:p.PartList})})},ke=e.getCopyFileId(Q,Ce,ne,oe,V),we=e.getUploadIdList(ke);if(!ke||!we)return Se();var Be=function Ae(Oe){if(Oe>=we.length)return Se();var ae=we[Oe];if(e.using[ae])return Ae(Oe+1);L.call(G,{Bucket:oe,Region:I,Key:V,UploadId:ae},function(O,$){if(O)e.removeUploadId(ae),Ae(Oe+1);else{if(e.using[ae])return Ae(Oe+1);var g={},l=0;w.each($.PartList,function(d){var c=parseInt(d.Size),y=l+c-1;g[d.PartNumber+"|"+l+"|"+y]=d.ETag,l+=c}),w.each(p.PartList,function(d){var c=g[d.PartNumber+"|"+d.start+"|"+d.end];c&&(d.ETag=c,d.Uploaded=!0)}),H.emit("get_copy_data_finish",{UploadId:ae,PartList:p.PartList})}})};Be(0)}),H.on("get_file_size_finish",function(){if(function(){for(var ke=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,5120],we=1024*1024,Be=0;Be<ke.length&&(we=ke[Be]*1024*1024,!(re/we<=G.options.MaxPartNumber));Be++);p.ChunkSize=ne=Math.max(ne,we),ye=Math.ceil(re/ne);for(var Ae=[],Oe=1;Oe<=ye;Oe++){var ae=(Oe-1)*ne,O=Oe*ne<re?Oe*ne-1:re-1,$={PartNumber:Oe,start:ae,end:O,CopySourceRange:"bytes="+ae+"-"+O};Ae.push($)}p.PartList=Ae}(),p.Headers["x-cos-metadata-directive"]==="Replaced"?me=p.Headers:me=ge,me["x-cos-storage-class"]=p.Headers["x-cos-storage-class"]||ge["x-cos-storage-class"],me=w.clearKey(me),ge["x-cos-storage-class"]==="ARCHIVE"||ge["x-cos-storage-class"]==="DEEP_ARCHIVE"){var Se=ge["x-cos-restore"];if(!Se||Se==='ongoing-request="true"'){N(w.error(new Error("Unrestored archive object is not allowed to be copied")));return}}delete me["x-cos-copy-source"],delete me["x-cos-metadata-directive"],delete me["x-cos-copy-source-If-Modified-Since"],delete me["x-cos-copy-source-If-Unmodified-Since"],delete me["x-cos-copy-source-If-Match"],delete me["x-cos-copy-source-If-None-Match"],H.emit("get_chunk_size_finish")}),G.headObject({Bucket:Z,Region:se,Key:ce},function(Se,ke){if(Se){Se.statusCode&&Se.statusCode===404?N(w.error(Se,{ErrorStatus:ce+" Not Exist"})):N(Se);return}if(re=p.FileSize=ke.headers["content-length"],re===void 0||!re){N(w.error(new Error('get Content-Length error, please add "Content-Length" to CORS ExposeHeader setting.（ 获取Content-Length失败，请在CORS ExposeHeader设置中添加Content-Length，请参考文档：https://cloud.tencent.com/document/product/436/13318 ）')));return}if(pe=w.throttleOnProgress.call(G,re,p.onProgress),re<=ue)p.Headers["x-cos-metadata-directive"]||(p.Headers["x-cos-metadata-directive"]="Copy"),G.putObjectCopy(p,function(Be,Ae){if(Be)return pe(null,!0),N(Be);pe({loaded:re,total:re},!0),N(Be,Ae)});else{var we=ke.headers;Ce=we,ge={"Cache-Control":we["cache-control"],"Content-Disposition":we["content-disposition"],"Content-Encoding":we["content-encoding"],"Content-Type":we["content-type"],Expires:we.expires,"x-cos-storage-class":we["x-cos-storage-class"]},w.each(we,function(Be,Ae){var Oe="x-cos-meta-";Ae.indexOf(Oe)===0&&Ae.length>Oe.length&&(ge[Ae]=Be)}),H.emit("get_file_size_finish")}})}function u(p,N){var H=p.TaskId,G=p.Bucket,oe=p.Region,I=p.Key,V=p.CopySource,Q=p.UploadId,W=p.PartNumber*1,Z=p.CopySourceRange,se=this.options.ChunkRetryTimes+1,ce=this;T.retry(se,function(ue){ce.uploadPartCopy({TaskId:H,Bucket:G,Region:oe,Key:I,CopySource:V,UploadId:Q,PartNumber:W,CopySourceRange:Z},function(ne,fe){ue(ne||null,fe)})},function(ue,ne){return N(ue,ne)})}var P={sliceUploadFile:k,abortUploadTask:te,uploadFile:de,uploadFiles:U,sliceCopyFile:S};o.exports.init=function(p,N){N.transferToTaskMethod(P,"sliceUploadFile"),w.each(P,function(H,G){p.prototype[G]=w.apiWrapper(G,H)})}},"./src/async.js":function(o,i){var t=function(m,w,B,k){if(k=k||function(){},!m.length||w<=0)return k();var R=0,D=0,L=0;(function z(){if(R>=m.length)return k();for(;L<w&&D<m.length;)D+=1,L+=1,B(m[D-1],function(j){j?(k(j),k=function(){}):(R+=1,L-=1,R>=m.length?k():z())})})()},r=function(m,w,B){var k=function R(D){w(function(L,z){L&&D<m?R(D+1):B(L,z)})};m<1?B():k(1)},e={eachLimit:t,retry:r};o.exports=e},"./src/base.js":function(o,i,t){var r=t("./lib/request.js"),e=t("./src/util.js");function T(n,v){typeof n=="function"&&(v=n,n={});var s=this.options.Protocol||(e.isBrowser&&location.protocol==="http:"?"http:":"https:"),f=this.options.ServiceDomain,b=n.AppId||this.options.appId,C=n.Region;f?(f=f.replace(/\{\{AppId\}\}/ig,b||"").replace(/\{\{Region\}\}/ig,C||"").replace(/\{\{.*?\}\}/ig,""),/^[a-zA-Z]+:\/\//.test(f)||(f=s+"//"+f),f.slice(-1)==="/"&&(f=f.slice(0,-1))):C?f=s+"//cos."+C+".myqcloud.com":f=s+"//service.cos.myqcloud.com";var x="",_=C?"cos."+C+".myqcloud.com":"service.cos.myqcloud.com",Y=f.replace(/^https?:\/\/([^/]+)(\/.*)?$/,"$1");_===Y&&(x=_),M.call(this,{Action:"name/cos:GetService",url:f,method:"GET",headers:n.Headers,SignHost:x},function(Ee,Te){if(Ee)return v(Ee);var be=Te&&Te.ListAllMyBucketsResult&&Te.ListAllMyBucketsResult.Buckets&&Te.ListAllMyBucketsResult.Buckets.Bucket||[];be=e.isArray(be)?be:[be];var Re=Te&&Te.ListAllMyBucketsResult&&Te.ListAllMyBucketsResult.Owner||{};v(null,{Buckets:be,Owner:Re,statusCode:Te.statusCode,headers:Te.headers})})}function m(n,v){var s=this,f="";if(n.BucketAZConfig){var b={BucketAZConfig:n.BucketAZConfig};f=e.json2xml({CreateBucketConfiguration:b})}M.call(this,{Action:"name/cos:PutBucket",method:"PUT",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,body:f},function(C,x){if(C)return v(C);var _=a({protocol:s.options.Protocol,domain:s.options.Domain,bucket:n.Bucket,region:n.Region,isLocation:!0});v(null,{Location:_,statusCode:x.statusCode,headers:x.headers})})}function w(n,v){M.call(this,{Action:"name/cos:HeadBucket",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,method:"HEAD"},v)}function B(n,v){var s={};s.prefix=n.Prefix||"",s.delimiter=n.Delimiter,s.marker=n.Marker,s["max-keys"]=n.MaxKeys,s["encoding-type"]=n.EncodingType,M.call(this,{Action:"name/cos:GetBucket",ResourceKey:s.prefix,method:"GET",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,qs:s},function(f,b){if(f)return v(f);var C=b.ListBucketResult||{},x=C.Contents||[],_=C.CommonPrefixes||[];x=e.isArray(x)?x:[x],_=e.isArray(_)?_:[_];var Y=e.clone(C);e.extend(Y,{Contents:x,CommonPrefixes:_,statusCode:b.statusCode,headers:b.headers}),v(null,Y)})}function k(n,v){M.call(this,{Action:"name/cos:DeleteBucket",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,method:"DELETE"},function(s,f){if(s&&s.statusCode===204)return v(null,{statusCode:s.statusCode});if(s)return v(s);v(null,{statusCode:f.statusCode,headers:f.headers})})}function R(n,v){var s=n.Headers,f="";if(n.AccessControlPolicy){var b=e.clone(n.AccessControlPolicy||{}),C=b.Grants||b.Grant;C=e.isArray(C)?C:[C],delete b.Grant,delete b.Grants,b.AccessControlList={Grant:C},f=e.json2xml({AccessControlPolicy:b}),s["Content-Type"]="application/xml",s["Content-MD5"]=e.binaryBase64(e.md5(f))}e.each(s,function(x,_){_.indexOf("x-cos-grant-")===0&&(s[_]=Xe(s[_]))}),M.call(this,{Action:"name/cos:PutBucketACL",method:"PUT",Bucket:n.Bucket,Region:n.Region,headers:s,action:"acl",body:f},function(x,_){if(x)return v(x);v(null,{statusCode:_.statusCode,headers:_.headers})})}function D(n,v){M.call(this,{Action:"name/cos:GetBucketACL",method:"GET",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"acl"},function(s,f){if(s)return v(s);var b=f.AccessControlPolicy||{},C=b.Owner||{},x=b.AccessControlList.Grant||[];x=e.isArray(x)?x:[x];var _=Ze(b);f.headers&&f.headers["x-cos-acl"]&&(_.ACL=f.headers["x-cos-acl"]),_=e.extend(_,{Owner:C,Grants:x,statusCode:f.statusCode,headers:f.headers}),v(null,_)})}function L(n,v){var s=n.CORSConfiguration||{},f=s.CORSRules||n.CORSRules||[];f=e.clone(e.isArray(f)?f:[f]),e.each(f,function(_){e.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],function(Y){var Ee=Y+"s",Te=_[Ee]||_[Y]||[];delete _[Ee],_[Y]=e.isArray(Te)?Te:[Te]})});var b={CORSRule:f};n.ResponseVary&&(b.ResponseVary=n.ResponseVary);var C=e.json2xml({CORSConfiguration:b}),x=n.Headers;x["Content-Type"]="application/xml",x["Content-MD5"]=e.binaryBase64(e.md5(C)),M.call(this,{Action:"name/cos:PutBucketCORS",method:"PUT",Bucket:n.Bucket,Region:n.Region,body:C,action:"cors",headers:x},function(_,Y){if(_)return v(_);v(null,{statusCode:Y.statusCode,headers:Y.headers})})}function z(n,v){M.call(this,{Action:"name/cos:GetBucketCORS",method:"GET",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"cors"},function(s,f){if(s){if(s.statusCode===404&&s.error&&s.error.Code==="NoSuchCORSConfiguration"){var b={CORSRules:[],statusCode:s.statusCode};s.headers&&(b.headers=s.headers),v(null,b)}else v(s);return}var C=f.CORSConfiguration||{},x=C.CORSRules||C.CORSRule||[];x=e.clone(e.isArray(x)?x:[x]);var _=C.ResponseVary;e.each(x,function(Y){e.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],function(Ee){var Te=Ee+"s",be=Y[Te]||Y[Ee]||[];delete Y[Ee],Y[Te]=e.isArray(be)?be:[be]})}),v(null,{CORSRules:x,ResponseVary:_,statusCode:f.statusCode,headers:f.headers})})}function j(n,v){M.call(this,{Action:"name/cos:DeleteBucketCORS",method:"DELETE",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"cors"},function(s,f){if(s&&s.statusCode===204)return v(null,{statusCode:s.statusCode});if(s)return v(s);v(null,{statusCode:f.statusCode||s.statusCode,headers:f.headers})})}function q(n,v){M.call(this,{Action:"name/cos:GetBucketLocation",method:"GET",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"location"},v)}function te(n,v){var s=n.Policy;try{typeof s=="string"&&(s=JSON.parse(s))}catch{}if(!s||typeof s=="string")return v(e.error(new Error("Policy format error")));var f=JSON.stringify(s);s.version||(s.version="2.0");var b=n.Headers;b["Content-Type"]="application/json",b["Content-MD5"]=e.binaryBase64(e.md5(f)),M.call(this,{Action:"name/cos:PutBucketPolicy",method:"PUT",Bucket:n.Bucket,Region:n.Region,action:"policy",body:f,headers:b},function(C,x){if(C&&C.statusCode===204)return v(null,{statusCode:C.statusCode});if(C)return v(C);v(null,{statusCode:x.statusCode,headers:x.headers})})}function X(n,v){M.call(this,{Action:"name/cos:GetBucketPolicy",method:"GET",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"policy",rawBody:!0},function(s,f){if(s)return s.statusCode&&s.statusCode===403?v(e.error(s,{ErrorStatus:"Access Denied"})):s.statusCode&&s.statusCode===405?v(e.error(s,{ErrorStatus:"Method Not Allowed"})):s.statusCode&&s.statusCode===404?v(e.error(s,{ErrorStatus:"Policy Not Found"})):v(s);var b={};try{b=JSON.parse(f.body)}catch{}v(null,{Policy:b,statusCode:f.statusCode,headers:f.headers})})}function de(n,v){M.call(this,{Action:"name/cos:DeleteBucketPolicy",method:"DELETE",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"policy"},function(s,f){if(s&&s.statusCode===204)return v(null,{statusCode:s.statusCode});if(s)return v(s);v(null,{statusCode:f.statusCode||s.statusCode,headers:f.headers})})}function U(n,v){var s=n.Tagging||{},f=s.TagSet||s.Tags||n.Tags||[];f=e.clone(e.isArray(f)?f:[f]);var b=e.json2xml({Tagging:{TagSet:{Tag:f}}}),C=n.Headers;C["Content-Type"]="application/xml",C["Content-MD5"]=e.binaryBase64(e.md5(b)),M.call(this,{Action:"name/cos:PutBucketTagging",method:"PUT",Bucket:n.Bucket,Region:n.Region,body:b,action:"tagging",headers:C},function(x,_){if(x&&x.statusCode===204)return v(null,{statusCode:x.statusCode});if(x)return v(x);v(null,{statusCode:_.statusCode,headers:_.headers})})}function S(n,v){M.call(this,{Action:"name/cos:GetBucketTagging",method:"GET",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"tagging"},function(s,f){if(s){if(s.statusCode===404&&s.error&&(s.error==="Not Found"||s.error.Code==="NoSuchTagSet")){var b={Tags:[],statusCode:s.statusCode};s.headers&&(b.headers=s.headers),v(null,b)}else v(s);return}var C=[];try{C=f.Tagging.TagSet.Tag||[]}catch{}C=e.clone(e.isArray(C)?C:[C]),v(null,{Tags:C,statusCode:f.statusCode,headers:f.headers})})}function u(n,v){M.call(this,{Action:"name/cos:DeleteBucketTagging",method:"DELETE",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"tagging"},function(s,f){if(s&&s.statusCode===204)return v(null,{statusCode:s.statusCode});if(s)return v(s);v(null,{statusCode:f.statusCode,headers:f.headers})})}function P(n,v){var s=n.LifecycleConfiguration||{},f=s.Rules||n.Rules||[];f=e.clone(f);var b=e.json2xml({LifecycleConfiguration:{Rule:f}}),C=n.Headers;C["Content-Type"]="application/xml",C["Content-MD5"]=e.binaryBase64(e.md5(b)),M.call(this,{Action:"name/cos:PutBucketLifecycle",method:"PUT",Bucket:n.Bucket,Region:n.Region,body:b,action:"lifecycle",headers:C},function(x,_){if(x&&x.statusCode===204)return v(null,{statusCode:x.statusCode});if(x)return v(x);v(null,{statusCode:_.statusCode,headers:_.headers})})}function p(n,v){M.call(this,{Action:"name/cos:GetBucketLifecycle",method:"GET",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"lifecycle"},function(s,f){if(s){if(s.statusCode===404&&s.error&&s.error.Code==="NoSuchLifecycleConfiguration"){var b={Rules:[],statusCode:s.statusCode};s.headers&&(b.headers=s.headers),v(null,b)}else v(s);return}var C=[];try{C=f.LifecycleConfiguration.Rule||[]}catch{}C=e.clone(e.isArray(C)?C:[C]),v(null,{Rules:C,statusCode:f.statusCode,headers:f.headers})})}function N(n,v){M.call(this,{Action:"name/cos:DeleteBucketLifecycle",method:"DELETE",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"lifecycle"},function(s,f){if(s&&s.statusCode===204)return v(null,{statusCode:s.statusCode});if(s)return v(s);v(null,{statusCode:f.statusCode,headers:f.headers})})}function H(n,v){if(!n.VersioningConfiguration){v(e.error(new Error("missing param VersioningConfiguration")));return}var s=n.VersioningConfiguration||{},f=e.json2xml({VersioningConfiguration:s}),b=n.Headers;b["Content-Type"]="application/xml",b["Content-MD5"]=e.binaryBase64(e.md5(f)),M.call(this,{Action:"name/cos:PutBucketVersioning",method:"PUT",Bucket:n.Bucket,Region:n.Region,body:f,action:"versioning",headers:b},function(C,x){if(C&&C.statusCode===204)return v(null,{statusCode:C.statusCode});if(C)return v(C);v(null,{statusCode:x.statusCode,headers:x.headers})})}function G(n,v){M.call(this,{Action:"name/cos:GetBucketVersioning",method:"GET",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"versioning"},function(s,f){s||!f.VersioningConfiguration&&(f.VersioningConfiguration={}),v(s,f)})}function oe(n,v){var s=e.clone(n.ReplicationConfiguration),f=e.json2xml({ReplicationConfiguration:s});f=f.replace(/<(\/?)Rules>/ig,"<$1Rule>"),f=f.replace(/<(\/?)Tags>/ig,"<$1Tag>");var b=n.Headers;b["Content-Type"]="application/xml",b["Content-MD5"]=e.binaryBase64(e.md5(f)),M.call(this,{Action:"name/cos:PutBucketReplication",method:"PUT",Bucket:n.Bucket,Region:n.Region,body:f,action:"replication",headers:b},function(C,x){if(C&&C.statusCode===204)return v(null,{statusCode:C.statusCode});if(C)return v(C);v(null,{statusCode:x.statusCode,headers:x.headers})})}function I(n,v){M.call(this,{Action:"name/cos:GetBucketReplication",method:"GET",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"replication"},function(s,f){if(s){if(s.statusCode===404&&s.error&&(s.error==="Not Found"||s.error.Code==="ReplicationConfigurationnotFoundError")){var b={ReplicationConfiguration:{Rules:[]},statusCode:s.statusCode};s.headers&&(b.headers=s.headers),v(null,b)}else v(s);return}!f.ReplicationConfiguration&&(f.ReplicationConfiguration={}),f.ReplicationConfiguration.Rule&&(f.ReplicationConfiguration.Rules=e.makeArray(f.ReplicationConfiguration.Rule),delete f.ReplicationConfiguration.Rule),v(s,f)})}function V(n,v){M.call(this,{Action:"name/cos:DeleteBucketReplication",method:"DELETE",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"replication"},function(s,f){if(s&&s.statusCode===204)return v(null,{statusCode:s.statusCode});if(s)return v(s);v(null,{statusCode:f.statusCode,headers:f.headers})})}function Q(n,v){if(!n.WebsiteConfiguration){v(e.error(new Error("missing param WebsiteConfiguration")));return}var s=e.clone(n.WebsiteConfiguration||{}),f=s.RoutingRules||s.RoutingRule||[];f=e.isArray(f)?f:[f],delete s.RoutingRule,delete s.RoutingRules,f.length&&(s.RoutingRules={RoutingRule:f});var b=e.json2xml({WebsiteConfiguration:s}),C=n.Headers;C["Content-Type"]="application/xml",C["Content-MD5"]=e.binaryBase64(e.md5(b)),M.call(this,{Action:"name/cos:PutBucketWebsite",method:"PUT",Bucket:n.Bucket,Region:n.Region,body:b,action:"website",headers:C},function(x,_){if(x&&x.statusCode===204)return v(null,{statusCode:x.statusCode});if(x)return v(x);v(null,{statusCode:_.statusCode,headers:_.headers})})}function W(n,v){M.call(this,{Action:"name/cos:GetBucketWebsite",method:"GET",Bucket:n.Bucket,Region:n.Region,Key:n.Key,headers:n.Headers,action:"website"},function(s,f){if(s){if(s.statusCode===404&&s.error.Code==="NoSuchWebsiteConfiguration"){var b={WebsiteConfiguration:{},statusCode:s.statusCode};s.headers&&(b.headers=s.headers),v(null,b)}else v(s);return}var C=f.WebsiteConfiguration||{};if(C.RoutingRules){var x=e.clone(C.RoutingRules.RoutingRule||[]);x=e.makeArray(x),C.RoutingRules=x}v(null,{WebsiteConfiguration:C,statusCode:f.statusCode,headers:f.headers})})}function Z(n,v){M.call(this,{Action:"name/cos:DeleteBucketWebsite",method:"DELETE",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"website"},function(s,f){if(s&&s.statusCode===204)return v(null,{statusCode:s.statusCode});if(s)return v(s);v(null,{statusCode:f.statusCode,headers:f.headers})})}function se(n,v){if(!n.RefererConfiguration){v(e.error(new Error("missing param RefererConfiguration")));return}var s=e.clone(n.RefererConfiguration||{}),f=s.DomainList||{},b=f.Domains||f.Domain||[];b=e.isArray(b)?b:[b],b.length&&(s.DomainList={Domain:b});var C=e.json2xml({RefererConfiguration:s}),x=n.Headers;x["Content-Type"]="application/xml",x["Content-MD5"]=e.binaryBase64(e.md5(C)),M.call(this,{Action:"name/cos:PutBucketReferer",method:"PUT",Bucket:n.Bucket,Region:n.Region,body:C,action:"referer",headers:x},function(_,Y){if(_&&_.statusCode===204)return v(null,{statusCode:_.statusCode});if(_)return v(_);v(null,{statusCode:Y.statusCode,headers:Y.headers})})}function ce(n,v){M.call(this,{Action:"name/cos:GetBucketReferer",method:"GET",Bucket:n.Bucket,Region:n.Region,Key:n.Key,headers:n.Headers,action:"referer"},function(s,f){if(s){if(s.statusCode===404&&s.error.Code==="NoSuchRefererConfiguration"){var b={WebsiteConfiguration:{},statusCode:s.statusCode};s.headers&&(b.headers=s.headers),v(null,b)}else v(s);return}var C=f.RefererConfiguration||{};if(C.DomainList){var x=e.makeArray(C.DomainList.Domain||[]);C.DomainList={Domains:x}}v(null,{RefererConfiguration:C,statusCode:f.statusCode,headers:f.headers})})}function ue(n,v){var s=n.DomainConfiguration||{},f=s.DomainRule||n.DomainRule||[];f=e.clone(f);var b=e.json2xml({DomainConfiguration:{DomainRule:f}}),C=n.Headers;C["Content-Type"]="application/xml",C["Content-MD5"]=e.binaryBase64(e.md5(b)),M.call(this,{Action:"name/cos:PutBucketDomain",method:"PUT",Bucket:n.Bucket,Region:n.Region,body:b,action:"domain",headers:C},function(x,_){if(x&&x.statusCode===204)return v(null,{statusCode:x.statusCode});if(x)return v(x);v(null,{statusCode:_.statusCode,headers:_.headers})})}function ne(n,v){M.call(this,{Action:"name/cos:GetBucketDomain",method:"GET",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"domain"},function(s,f){if(s)return v(s);var b=[];try{b=f.DomainConfiguration.DomainRule||[]}catch{}b=e.clone(e.isArray(b)?b:[b]),v(null,{DomainRule:b,statusCode:f.statusCode,headers:f.headers})})}function fe(n,v){M.call(this,{Action:"name/cos:DeleteBucketDomain",method:"DELETE",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"domain"},function(s,f){if(s&&s.statusCode===204)return v(null,{statusCode:s.statusCode});if(s)return v(s);v(null,{statusCode:f.statusCode,headers:f.headers})})}function le(n,v){var s=n.OriginConfiguration||{},f=s.OriginRule||n.OriginRule||[];f=e.clone(f);var b=e.json2xml({OriginConfiguration:{OriginRule:f}}),C=n.Headers;C["Content-Type"]="application/xml",C["Content-MD5"]=e.binaryBase64(e.md5(b)),M.call(this,{Action:"name/cos:PutBucketOrigin",method:"PUT",Bucket:n.Bucket,Region:n.Region,body:b,action:"origin",headers:C},function(x,_){if(x&&x.statusCode===204)return v(null,{statusCode:x.statusCode});if(x)return v(x);v(null,{statusCode:_.statusCode,headers:_.headers})})}function ye(n,v){M.call(this,{Action:"name/cos:GetBucketOrigin",method:"GET",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"origin"},function(s,f){if(s)return v(s);var b=[];try{b=f.OriginConfiguration.OriginRule||[]}catch{}b=e.clone(e.isArray(b)?b:[b]),v(null,{OriginRule:b,statusCode:f.statusCode,headers:f.headers})})}function J(n,v){M.call(this,{Action:"name/cos:DeleteBucketOrigin",method:"DELETE",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"origin"},function(s,f){if(s&&s.statusCode===204)return v(null,{statusCode:s.statusCode});if(s)return v(s);v(null,{statusCode:f.statusCode,headers:f.headers})})}function re(n,v){var s=e.json2xml({BucketLoggingStatus:n.BucketLoggingStatus||""}),f=n.Headers;f["Content-Type"]="application/xml",f["Content-MD5"]=e.binaryBase64(e.md5(s)),M.call(this,{Action:"name/cos:PutBucketLogging",method:"PUT",Bucket:n.Bucket,Region:n.Region,body:s,action:"logging",headers:f},function(b,C){if(b&&b.statusCode===204)return v(null,{statusCode:b.statusCode});if(b)return v(b);v(null,{statusCode:C.statusCode,headers:C.headers})})}function pe(n,v){M.call(this,{Action:"name/cos:GetBucketLogging",method:"GET",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"logging"},function(s,f){if(s)return v(s);v(null,{BucketLoggingStatus:f.BucketLoggingStatus,statusCode:f.statusCode,headers:f.headers})})}function Ce(n,v){var s=e.clone(n.InventoryConfiguration);if(s.OptionalFields){var f=s.OptionalFields||[];s.OptionalFields={Field:f}}if(s.Destination&&s.Destination.COSBucketDestination&&s.Destination.COSBucketDestination.Encryption){var b=s.Destination.COSBucketDestination.Encryption;Object.keys(b).indexOf("SSECOS")>-1&&(b["SSE-COS"]=b.SSECOS,delete b.SSECOS)}var C=e.json2xml({InventoryConfiguration:s}),x=n.Headers;x["Content-Type"]="application/xml",x["Content-MD5"]=e.binaryBase64(e.md5(C)),M.call(this,{Action:"name/cos:PutBucketInventory",method:"PUT",Bucket:n.Bucket,Region:n.Region,body:C,action:"inventory",qs:{id:n.Id},headers:x},function(_,Y){if(_&&_.statusCode===204)return v(null,{statusCode:_.statusCode});if(_)return v(_);v(null,{statusCode:Y.statusCode,headers:Y.headers})})}function ge(n,v){M.call(this,{Action:"name/cos:GetBucketInventory",method:"GET",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"inventory",qs:{id:n.Id}},function(s,f){if(s)return v(s);var b=f.InventoryConfiguration;if(b&&b.OptionalFields&&b.OptionalFields.Field){var C=b.OptionalFields.Field;e.isArray(C)||(C=[C]),b.OptionalFields=C}if(b.Destination&&b.Destination.COSBucketDestination&&b.Destination.COSBucketDestination.Encryption){var x=b.Destination.COSBucketDestination.Encryption;Object.keys(x).indexOf("SSE-COS")>-1&&(x.SSECOS=x["SSE-COS"],delete x["SSE-COS"])}v(null,{InventoryConfiguration:b,statusCode:f.statusCode,headers:f.headers})})}function me(n,v){M.call(this,{Action:"name/cos:ListBucketInventory",method:"GET",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"inventory",qs:{"continuation-token":n.ContinuationToken}},function(s,f){if(s)return v(s);var b=f.ListInventoryConfigurationResult,C=b.InventoryConfiguration||[];C=e.isArray(C)?C:[C],delete b.InventoryConfiguration,e.each(C,function(x){if(x&&x.OptionalFields&&x.OptionalFields.Field){var _=x.OptionalFields.Field;e.isArray(_)||(_=[_]),x.OptionalFields=_}if(x.Destination&&x.Destination.COSBucketDestination&&x.Destination.COSBucketDestination.Encryption){var Y=x.Destination.COSBucketDestination.Encryption;Object.keys(Y).indexOf("SSE-COS")>-1&&(Y.SSECOS=Y["SSE-COS"],delete Y["SSE-COS"])}}),b.InventoryConfigurations=C,e.extend(b,{statusCode:f.statusCode,headers:f.headers}),v(null,b)})}function Se(n,v){M.call(this,{Action:"name/cos:DeleteBucketInventory",method:"DELETE",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"inventory",qs:{id:n.Id}},function(s,f){if(s&&s.statusCode===204)return v(null,{statusCode:s.statusCode});if(s)return v(s);v(null,{statusCode:f.statusCode,headers:f.headers})})}function ke(n,v){if(!n.AccelerateConfiguration){v(e.error(new Error("missing param AccelerateConfiguration")));return}var s={AccelerateConfiguration:n.AccelerateConfiguration||{}},f=e.json2xml(s),b={};b["Content-Type"]="application/xml",b["Content-MD5"]=e.binaryBase64(e.md5(f)),M.call(this,{Action:"name/cos:PutBucketAccelerate",method:"PUT",Bucket:n.Bucket,Region:n.Region,body:f,action:"accelerate",headers:b},function(C,x){if(C)return v(C);v(null,{statusCode:x.statusCode,headers:x.headers})})}function we(n,v){M.call(this,{Action:"name/cos:GetBucketAccelerate",method:"GET",Bucket:n.Bucket,Region:n.Region,action:"accelerate"},function(s,f){s||!f.AccelerateConfiguration&&(f.AccelerateConfiguration={}),v(s,f)})}function Be(n,v){var s=n.ServerSideEncryptionConfiguration||{},f=s.Rule||s.Rules||[],b=e.json2xml({ServerSideEncryptionConfiguration:{Rule:f}}),C=n.Headers;C["Content-Type"]="application/xml",C["Content-MD5"]=e.binaryBase64(e.md5(b)),M.call(this,{Action:"name/cos:PutBucketEncryption",method:"PUT",Bucket:n.Bucket,Region:n.Region,body:b,action:"encryption",headers:C},function(x,_){if(x&&x.statusCode===204)return v(null,{statusCode:x.statusCode});if(x)return v(x);v(null,{statusCode:_.statusCode,headers:_.headers})})}function Ae(n,v){M.call(this,{Action:"name/cos:GetBucketEncryption",method:"GET",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"encryption"},function(s,f){if(s){if(s.statusCode===404&&s.code==="NoSuchEncryptionConfiguration"){var b={EncryptionConfiguration:{Rules:[]},statusCode:s.statusCode};s.headers&&(b.headers=s.headers),v(null,b)}else v(s);return}var C=e.makeArray(f.EncryptionConfiguration&&f.EncryptionConfiguration.Rule||[]);f.EncryptionConfiguration={Rules:C},v(s,f)})}function Oe(n,v){M.call(this,{Action:"name/cos:DeleteBucketReplication",method:"DELETE",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"encryption"},function(s,f){if(s&&s.statusCode===204)return v(null,{statusCode:s.statusCode});if(s)return v(s);v(null,{statusCode:f.statusCode,headers:f.headers})})}function ae(n,v){M.call(this,{Action:"name/cos:HeadObject",method:"HEAD",Bucket:n.Bucket,Region:n.Region,Key:n.Key,VersionId:n.VersionId,headers:n.Headers},function(s,f){if(s){var b=s.statusCode;return n.Headers["If-Modified-Since"]&&b&&b===304?v(null,{NotModified:!0,statusCode:b}):v(s)}f.ETag=e.attr(f.headers,"etag",""),v(null,f)})}function O(n,v){var s={};s.prefix=n.Prefix||"",s.delimiter=n.Delimiter,s["key-marker"]=n.KeyMarker,s["version-id-marker"]=n.VersionIdMarker,s["max-keys"]=n.MaxKeys,s["encoding-type"]=n.EncodingType,M.call(this,{Action:"name/cos:GetBucketObjectVersions",ResourceKey:s.prefix,method:"GET",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,qs:s,action:"versions"},function(f,b){if(f)return v(f);var C=b.ListVersionsResult||{},x=C.DeleteMarker||[];x=e.isArray(x)?x:[x];var _=C.Version||[];_=e.isArray(_)?_:[_];var Y=e.clone(C);delete Y.DeleteMarker,delete Y.Version,e.extend(Y,{DeleteMarkers:x,Versions:_,statusCode:b.statusCode,headers:b.headers}),v(null,Y)})}function $(n,v){var s=n.Query||{},f=n.QueryString||"",b=e.throttleOnProgress.call(this,0,n.onProgress),C=n.tracker;C&&C.setParams({signStartTime:new Date().getTime()}),s["response-content-type"]=n.ResponseContentType,s["response-content-language"]=n.ResponseContentLanguage,s["response-expires"]=n.ResponseExpires,s["response-cache-control"]=n.ResponseCacheControl,s["response-content-disposition"]=n.ResponseContentDisposition,s["response-content-encoding"]=n.ResponseContentEncoding,M.call(this,{Action:"name/cos:GetObject",method:"GET",Bucket:n.Bucket,Region:n.Region,Key:n.Key,VersionId:n.VersionId,DataType:n.DataType,headers:n.Headers,qs:s,qsStr:f,rawBody:!0,onDownloadProgress:b,tracker:C},function(x,_){if(b(null,!0),x){var Y=x.statusCode;return n.Headers["If-Modified-Since"]&&Y&&Y===304?v(null,{NotModified:!0}):v(x)}v(null,{Body:_.body,ETag:e.attr(_.headers,"etag",""),statusCode:_.statusCode,headers:_.headers})})}function g(n,v){var s=this,f=n.ContentLength,b=e.throttleOnProgress.call(s,f,n.onProgress),C=n.Headers;!C["Cache-Control"]&&!C["cache-control"]&&(C["Cache-Control"]=""),!C["Content-Type"]&&!C["content-type"]&&(C["Content-Type"]=n.Body&&n.Body.type||"");var x=n.UploadAddMetaMd5||s.options.UploadAddMetaMd5||s.options.UploadCheckContentMd5,_=n.tracker;x&&_&&_.setParams({md5StartTime:new Date().getTime()}),e.getBodyMd5(x,n.Body,function(Y){Y&&(_&&_.setParams({md5EndTime:new Date().getTime()}),s.options.UploadCheckContentMd5&&(C["Content-MD5"]=e.binaryBase64(Y)),(n.UploadAddMetaMd5||s.options.UploadAddMetaMd5)&&(C["x-cos-meta-md5"]=Y)),n.ContentLength!==void 0&&(C["Content-Length"]=n.ContentLength),b(null,!0),M.call(s,{Action:"name/cos:PutObject",TaskId:n.TaskId,method:"PUT",Bucket:n.Bucket,Region:n.Region,Key:n.Key,headers:n.Headers,qs:n.Query,body:n.Body,onProgress:b,tracker:_},function(Ee,Te){if(Ee)return b(null,!0),v(Ee);b({loaded:f,total:f},!0);var be=a({ForcePathStyle:s.options.ForcePathStyle,protocol:s.options.Protocol,domain:s.options.Domain,bucket:n.Bucket,region:s.options.UseAccelerate?"accelerate":n.Region,object:n.Key});be=be.substr(be.indexOf("://")+3),Te.Location=be,Te.ETag=e.attr(Te.headers,"etag",""),v(null,Te)})},n.onHashProgress)}function l(n,v){M.call(this,{Action:"name/cos:DeleteObject",method:"DELETE",Bucket:n.Bucket,Region:n.Region,Key:n.Key,headers:n.Headers,VersionId:n.VersionId,action:n.Recursive?"recursive":""},function(s,f){if(s){var b=s.statusCode;return b&&b===404?v(null,{BucketNotFound:!0,statusCode:b}):v(s)}v(null,{statusCode:f.statusCode,headers:f.headers})})}function d(n,v){var s={};n.VersionId&&(s.versionId=n.VersionId),M.call(this,{Action:"name/cos:GetObjectACL",method:"GET",Bucket:n.Bucket,Region:n.Region,Key:n.Key,headers:n.Headers,qs:s,action:"acl"},function(f,b){if(f)return v(f);var C=b.AccessControlPolicy||{},x=C.Owner||{},_=C.AccessControlList&&C.AccessControlList.Grant||[];_=e.isArray(_)?_:[_];var Y=Ze(C);delete Y.GrantWrite,b.headers&&b.headers["x-cos-acl"]&&(Y.ACL=b.headers["x-cos-acl"]),Y=e.extend(Y,{Owner:x,Grants:_,statusCode:b.statusCode,headers:b.headers}),v(null,Y)})}function c(n,v){var s=n.Headers,f="";if(n.AccessControlPolicy){var b=e.clone(n.AccessControlPolicy||{}),C=b.Grants||b.Grant;C=e.isArray(C)?C:[C],delete b.Grant,delete b.Grants,b.AccessControlList={Grant:C},f=e.json2xml({AccessControlPolicy:b}),s["Content-Type"]="application/xml",s["Content-MD5"]=e.binaryBase64(e.md5(f))}e.each(s,function(x,_){_.indexOf("x-cos-grant-")===0&&(s[_]=Xe(s[_]))}),M.call(this,{Action:"name/cos:PutObjectACL",method:"PUT",Bucket:n.Bucket,Region:n.Region,Key:n.Key,action:"acl",headers:s,body:f},function(x,_){if(x)return v(x);v(null,{statusCode:_.statusCode,headers:_.headers})})}function y(n,v){var s=n.Headers;s.Origin=n.Origin,s["Access-Control-Request-Method"]=n.AccessControlRequestMethod,s["Access-Control-Request-Headers"]=n.AccessControlRequestHeaders,M.call(this,{Action:"name/cos:OptionsObject",method:"OPTIONS",Bucket:n.Bucket,Region:n.Region,Key:n.Key,headers:s},function(f,b){if(f)return f.statusCode&&f.statusCode===403?v(null,{OptionsForbidden:!0,statusCode:f.statusCode}):v(f);var C=b.headers||{};v(null,{AccessControlAllowOrigin:C["access-control-allow-origin"],AccessControlAllowMethods:C["access-control-allow-methods"],AccessControlAllowHeaders:C["access-control-allow-headers"],AccessControlExposeHeaders:C["access-control-expose-headers"],AccessControlMaxAge:C["access-control-max-age"],statusCode:b.statusCode,headers:b.headers})})}function A(n,v){var s=this,f=n.Headers;!f["Cache-Control"]&&!f["cache-control"]&&(f["Cache-Control"]="");var b=n.CopySource||"",C=e.getSourceParams.call(this,b);if(!C){v(e.error(new Error("CopySource format error")));return}var x=C.Bucket,_=C.Region,Y=decodeURIComponent(C.Key);M.call(this,{Scope:[{action:"name/cos:GetObject",bucket:x,region:_,prefix:Y},{action:"name/cos:PutObject",bucket:n.Bucket,region:n.Region,prefix:n.Key}],method:"PUT",Bucket:n.Bucket,Region:n.Region,Key:n.Key,VersionId:n.VersionId,headers:n.Headers},function(Ee,Te){if(Ee)return v(Ee);var be=e.clone(Te.CopyObjectResult||{}),Re=a({ForcePathStyle:s.options.ForcePathStyle,protocol:s.options.Protocol,domain:s.options.Domain,bucket:n.Bucket,region:n.Region,object:n.Key,isLocation:!0});e.extend(be,{Location:Re,statusCode:Te.statusCode,headers:Te.headers}),v(null,be)})}function F(n,v){var s=n.CopySource||"",f=e.getSourceParams.call(this,s);if(!f){v(e.error(new Error("CopySource format error")));return}var b=f.Bucket,C=f.Region,x=decodeURIComponent(f.Key);M.call(this,{Scope:[{action:"name/cos:GetObject",bucket:b,region:C,prefix:x},{action:"name/cos:PutObject",bucket:n.Bucket,region:n.Region,prefix:n.Key}],method:"PUT",Bucket:n.Bucket,Region:n.Region,Key:n.Key,VersionId:n.VersionId,qs:{partNumber:n.PartNumber,uploadId:n.UploadId},headers:n.Headers},function(_,Y){if(_)return v(_);var Ee=e.clone(Y.CopyPartResult||{});e.extend(Ee,{statusCode:Y.statusCode,headers:Y.headers}),v(null,Ee)})}function ee(n,v){var s=n.Objects||[],f=n.Quiet;s=e.isArray(s)?s:[s];var b=e.json2xml({Delete:{Object:s,Quiet:f||!1}}),C=n.Headers;C["Content-Type"]="application/xml",C["Content-MD5"]=e.binaryBase64(e.md5(b));var x=e.map(s,function(_){return{action:"name/cos:DeleteObject",bucket:n.Bucket,region:n.Region,prefix:_.Key}});M.call(this,{Scope:x,method:"POST",Bucket:n.Bucket,Region:n.Region,body:b,action:"delete",headers:C},function(_,Y){if(_)return v(_);var Ee=Y.DeleteResult||{},Te=Ee.Deleted||[],be=Ee.Error||[];Te=e.isArray(Te)?Te:[Te],be=e.isArray(be)?be:[be];var Re=e.clone(Ee);e.extend(Re,{Error:be,Deleted:Te,statusCode:Y.statusCode,headers:Y.headers}),v(null,Re)})}function he(n,v){var s=n.Headers;if(!n.RestoreRequest){v(e.error(new Error("missing param RestoreRequest")));return}var f=n.RestoreRequest||{},b=e.json2xml({RestoreRequest:f});s["Content-Type"]="application/xml",s["Content-MD5"]=e.binaryBase64(e.md5(b)),M.call(this,{Action:"name/cos:RestoreObject",method:"POST",Bucket:n.Bucket,Region:n.Region,Key:n.Key,VersionId:n.VersionId,body:b,action:"restore",headers:s},v)}function ve(n,v){var s=n.Tagging||{},f=s.TagSet||s.Tags||n.Tags||[];f=e.clone(e.isArray(f)?f:[f]);var b=e.json2xml({Tagging:{TagSet:{Tag:f}}}),C=n.Headers;C["Content-Type"]="application/xml",C["Content-MD5"]=e.binaryBase64(e.md5(b)),M.call(this,{Action:"name/cos:PutObjectTagging",method:"PUT",Bucket:n.Bucket,Key:n.Key,Region:n.Region,body:b,action:"tagging",headers:C,VersionId:n.VersionId},function(x,_){if(x&&x.statusCode===204)return v(null,{statusCode:x.statusCode});if(x)return v(x);v(null,{statusCode:_.statusCode,headers:_.headers})})}function ie(n,v){M.call(this,{Action:"name/cos:GetObjectTagging",method:"GET",Key:n.Key,Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"tagging",VersionId:n.VersionId},function(s,f){if(s){if(s.statusCode===404&&s.error&&(s.error==="Not Found"||s.error.Code==="NoSuchTagSet")){var b={Tags:[],statusCode:s.statusCode};s.headers&&(b.headers=s.headers),v(null,b)}else v(s);return}var C=[];try{C=f.Tagging.TagSet.Tag||[]}catch{}C=e.clone(e.isArray(C)?C:[C]),v(null,{Tags:C,statusCode:f.statusCode,headers:f.headers})})}function Pe(n,v){M.call(this,{Action:"name/cos:DeleteObjectTagging",method:"DELETE",Bucket:n.Bucket,Region:n.Region,Key:n.Key,headers:n.Headers,action:"tagging",VersionId:n.VersionId},function(s,f){if(s&&s.statusCode===204)return v(null,{statusCode:s.statusCode});if(s)return v(s);v(null,{statusCode:f.statusCode,headers:f.headers})})}function xe(n,v){var s=n.SelectType;if(!s)return v(e.error(new Error("missing param SelectType")));var f=n.SelectRequest||{},b=e.json2xml({SelectRequest:f}),C=n.Headers;C["Content-Type"]="application/xml",C["Content-MD5"]=e.binaryBase64(e.md5(b)),M.call(this,{Action:"name/cos:GetObject",method:"POST",Bucket:n.Bucket,Region:n.Region,Key:n.Key,headers:n.Headers,action:"select",qs:{"select-type":n.SelectType},VersionId:n.VersionId,body:b,DataType:"arraybuffer",rawBody:!0},function(x,_){if(x&&x.statusCode===204)return v(null,{statusCode:x.statusCode});if(x)return v(x);var Y=e.parseSelectPayload(_.body);v(null,{statusCode:_.statusCode,headers:_.headers,Body:Y.body,Payload:Y.payload})})}function Fe(n,v){var s=this,f=n.Headers,b=n.tracker;!f["Cache-Control"]&&!f["cache-control"]&&(f["Cache-Control"]=""),!f["Content-Type"]&&!f["content-type"]&&(f["Content-Type"]=n.Body&&n.Body.type||"");var C=n.Body&&(n.UploadAddMetaMd5||s.options.UploadAddMetaMd5);C&&b&&b.setParams({md5StartTime:new Date().getTime()}),e.getBodyMd5(C,n.Body,function(x){x&&(n.Headers["x-cos-meta-md5"]=x),C&&b&&b.setParams({md5EndTime:new Date().getTime()}),M.call(s,{Action:"name/cos:InitiateMultipartUpload",method:"POST",Bucket:n.Bucket,Region:n.Region,Key:n.Key,action:"uploads",headers:n.Headers,qs:n.Query,tracker:b},function(_,Y){if(_)return b&&b.parent&&b.parent.setParams({errorNode:"multipartInit"}),v(_);if(Y=e.clone(Y||{}),Y&&Y.InitiateMultipartUploadResult)return v(null,e.extend(Y.InitiateMultipartUploadResult,{statusCode:Y.statusCode,headers:Y.headers}));v(null,Y)})},n.onHashProgress)}function Ne(n,v){var s=this;e.getFileSize("multipartUpload",n,function(){var f=n.tracker,b=s.options.UploadCheckContentMd5;b&&f&&f.setParams({md5StartTime:new Date().getTime()}),e.getBodyMd5(b,n.Body,function(C){C&&(n.Headers["Content-MD5"]=e.binaryBase64(C)),b&&f&&f.setParams({md5EndTime:new Date().getTime()}),f&&f.setParams({partNumber:n.PartNumber}),M.call(s,{Action:"name/cos:UploadPart",TaskId:n.TaskId,method:"PUT",Bucket:n.Bucket,Region:n.Region,Key:n.Key,qs:{partNumber:n.PartNumber,uploadId:n.UploadId},headers:n.Headers,onProgress:n.onProgress,body:n.Body||null,tracker:f},function(x,_){if(x)return f&&f.parent&&f.parent.setParams({errorNode:"multipartUpload"}),v(x);v(null,{ETag:e.attr(_.headers,"etag",""),statusCode:_.statusCode,headers:_.headers})})})})}function je(n,v){for(var s=this,f=n.UploadId,b=n.Parts,C=n.tracker,x=0,_=b.length;x<_;x++)b[x].ETag&&b[x].ETag.indexOf('"')===0||(b[x].ETag='"'+b[x].ETag+'"');var Y=e.json2xml({CompleteMultipartUpload:{Part:b}});Y=Y.replace(/\n\s*/g,"");var Ee=n.Headers;Ee["Content-Type"]="application/xml",Ee["Content-MD5"]=e.binaryBase64(e.md5(Y)),M.call(this,{Action:"name/cos:CompleteMultipartUpload",method:"POST",Bucket:n.Bucket,Region:n.Region,Key:n.Key,qs:{uploadId:f},body:Y,headers:Ee,tracker:C},function(Te,be){if(Te)return C&&C.parent&&C.parent.setParams({errorNode:"multipartComplete"}),v(Te);var Re=a({ForcePathStyle:s.options.ForcePathStyle,protocol:s.options.Protocol,domain:s.options.Domain,bucket:n.Bucket,region:n.Region,object:n.Key,isLocation:!0}),Me=be.CompleteMultipartUploadResult||{};Me.ProcessResults&&Me&&Me.ProcessResults&&(Me.UploadResult={OriginalInfo:{Key:Me.Key,Location:Re,ETag:Me.ETag,ImageInfo:Me.ImageInfo},ProcessResults:Me.ProcessResults},delete Me.ImageInfo,delete Me.ProcessResults);var We=e.extend(Me,{Location:Re,statusCode:be.statusCode,headers:be.headers});v(null,We)})}function Ke(n,v){var s={};s.delimiter=n.Delimiter,s["encoding-type"]=n.EncodingType,s.prefix=n.Prefix||"",s["max-uploads"]=n.MaxUploads,s["key-marker"]=n.KeyMarker,s["upload-id-marker"]=n.UploadIdMarker,s=e.clearKey(s);var f=n.tracker;f&&f.setParams({signStartTime:new Date().getTime()}),M.call(this,{Action:"name/cos:ListMultipartUploads",ResourceKey:s.prefix,method:"GET",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,qs:s,action:"uploads",tracker:f},function(b,C){if(b)return f&&f.parent&&f.parent.setParams({errorNode:"multipartList"}),v(b);if(C&&C.ListMultipartUploadsResult){var x=C.ListMultipartUploadsResult.Upload||[];x=e.isArray(x)?x:[x],C.ListMultipartUploadsResult.Upload=x}var _=e.clone(C.ListMultipartUploadsResult||{});e.extend(_,{statusCode:C.statusCode,headers:C.headers}),v(null,_)})}function Ve(n,v){var s={},f=n.tracker;s.uploadId=n.UploadId,s["encoding-type"]=n.EncodingType,s["max-parts"]=n.MaxParts,s["part-number-marker"]=n.PartNumberMarker,M.call(this,{Action:"name/cos:ListParts",method:"GET",Bucket:n.Bucket,Region:n.Region,Key:n.Key,headers:n.Headers,qs:s},function(b,C){if(b)return f&&f.parent&&f.parent.setParams({errorNode:"multipartListPart"}),v(b);var x=C.ListPartsResult||{},_=x.Part||[];_=e.isArray(_)?_:[_],x.Part=_;var Y=e.clone(x);e.extend(Y,{statusCode:C.statusCode,headers:C.headers}),v(null,Y)})}function Ge(n,v){var s={};s.uploadId=n.UploadId,M.call(this,{Action:"name/cos:AbortMultipartUpload",method:"DELETE",Bucket:n.Bucket,Region:n.Region,Key:n.Key,headers:n.Headers,qs:s},function(f,b){if(f)return v(f);v(null,{statusCode:b.statusCode,headers:b.headers})})}function He(n,v){M.call(this,{method:n.Method,Bucket:n.Bucket,Region:n.Region,Key:n.Key,action:n.Action,headers:n.Headers,qs:n.Query,body:n.Body,Url:n.Url,rawBody:n.RawBody,DataType:n.DataType},function(s,f){if(s)return v(s);f&&f.body&&(f.Body=f.body,delete f.body),v(s,f)})}function qe(n,v){var s=n.Headers;!s["Cache-Control"]&&!s["cache-control"]&&(s["Cache-Control"]=""),!s["Content-Type"]&&!s["content-type"]&&(s["Content-Type"]=n.Body&&n.Body.type||""),M.call(this,{Action:"name/cos:AppendObject",method:"POST",Bucket:n.Bucket,Region:n.Region,action:"append",Key:n.Key,body:n.Body,qs:{position:n.Position},headers:n.Headers},function(f,b){if(f)return v(f);v(null,b)})}function Qe(n){var v=this;return e.getAuth({SecretId:n.SecretId||this.options.SecretId||"",SecretKey:n.SecretKey||this.options.SecretKey||"",Bucket:n.Bucket,Region:n.Region,Method:n.Method,Key:n.Key,Query:n.Query,Headers:n.Headers,Expires:n.Expires,UseRawKey:v.options.UseRawKey,SystemClockOffset:v.options.SystemClockOffset})}function it(n,v){var s=this,f=n.UseAccelerate===void 0?s.options.UseAccelerate:n.UseAccelerate,b=a({ForcePathStyle:s.options.ForcePathStyle,protocol:n.Protocol||s.options.Protocol,domain:n.Domain||s.options.Domain,bucket:n.Bucket,region:f?"accelerate":n.Region,object:n.Key}),C="";n.Query&&(C+=e.obj2str(n.Query)),n.QueryString&&(C+=(C?"&":"")+n.QueryString);var x=b;if(n.Sign!==void 0&&!n.Sign)return C&&(x+="?"+C),v(null,{Url:x}),x;var _=h.call(this,{Bucket:n.Bucket,Region:n.Region,UseAccelerate:n.UseAccelerate,Url:b}),Y=E.call(this,{Action:(n.Method||"").toUpperCase()==="PUT"?"name/cos:PutObject":"name/cos:GetObject",Bucket:n.Bucket||"",Region:n.Region||"",Method:n.Method||"get",Key:n.Key,Expires:n.Expires,Headers:n.Headers,Query:n.Query,SignHost:_,ForceSignHost:n.ForceSignHost===!1?!1:s.options.ForceSignHost},function(Ee,Te){if(v){if(Ee){v(Ee);return}var be=function(We){var tt=We.match(/q-url-param-list.*?(?=&)/g)[0],et="q-url-param-list="+encodeURIComponent(tt.replace(/q-url-param-list=/,"")).toLowerCase(),Je=new RegExp(tt,"g"),nt=We.replace(Je,et);return nt},Re=b;Re+="?"+(Te.Authorization.indexOf("q-signature")>-1?be(Te.Authorization):"sign="+encodeURIComponent(Te.Authorization)),Te.SecurityToken&&(Re+="&x-cos-security-token="+Te.SecurityToken),Te.ClientIP&&(Re+="&clientIP="+Te.ClientIP),Te.ClientUA&&(Re+="&clientUA="+Te.ClientUA),Te.Token&&(Re+="&token="+Te.Token),C&&(Re+="&"+C),setTimeout(function(){v(null,{Url:Re})})}});return Y?(x+="?"+Y.Authorization+(Y.SecurityToken?"&x-cos-security-token="+Y.SecurityToken:""),C&&(x+="&"+C)):C&&(x+="?"+C),x}function Ze(n){var v={GrantFullControl:[],GrantWrite:[],GrantRead:[],GrantReadAcp:[],GrantWriteAcp:[],ACL:""},s={FULL_CONTROL:"GrantFullControl",WRITE:"GrantWrite",READ:"GrantRead",READ_ACP:"GrantReadAcp",WRITE_ACP:"GrantWriteAcp"},f=n&&n.AccessControlList||{},b=f.Grant;b&&(b=e.isArray(b)?b:[b]);var C={READ:0,WRITE:0,FULL_CONTROL:0};return b&&b.length&&e.each(b,function(x){x.Grantee.ID==="qcs::cam::anyone:anyone"||x.Grantee.URI==="http://cam.qcloud.com/groups/global/AllUsers"?C[x.Permission]=1:x.Grantee.ID!==n.Owner.ID&&v[s[x.Permission]].push('id="'+x.Grantee.ID+'"')}),C.FULL_CONTROL||C.WRITE&&C.READ?v.ACL="public-read-write":C.READ?v.ACL="public-read":v.ACL="private",e.each(s,function(x){v[x]=Xe(v[x].join(","))}),v}function Xe(n){var v=n.split(","),s={},f,b;for(f=0;f<v.length;)b=v[f].trim(),s[b]?v.splice(f,1):(s[b]=!0,v[f]=b,f++);return v.join(",")}function a(n){var v=n.region||"",s=n.bucket||"",f=s.substr(0,s.lastIndexOf("-")),b=s.substr(s.lastIndexOf("-")+1),C=n.domain,x=n.object;typeof C=="function"&&(C=C({Bucket:s,Region:v})),["http","https"].includes(n.protocol)&&(n.protocol=n.protocol+":");var _=n.protocol||(e.isBrowser&&location.protocol==="http:"?"http:":"https:");C||(["cn-south","cn-south-2","cn-north","cn-east","cn-southwest","sg"].indexOf(v)>-1?C="{Region}.myqcloud.com":C="cos.{Region}.myqcloud.com",n.ForcePathStyle||(C="{Bucket}."+C)),C=C.replace(/\{\{AppId\}\}/ig,b).replace(/\{\{Bucket\}\}/ig,f).replace(/\{\{Region\}\}/ig,v).replace(/\{\{.*?\}\}/ig,""),C=C.replace(/\{AppId\}/ig,b).replace(/\{BucketName\}/ig,f).replace(/\{Bucket\}/ig,s).replace(/\{Region\}/ig,v).replace(/\{.*?\}/ig,""),/^[a-zA-Z]+:\/\//.test(C)||(C=_+"//"+C),C.slice(-1)==="/"&&(C=C.slice(0,-1));var Y=C;return n.ForcePathStyle&&(Y+="/"+s),Y+="/",x&&(Y+=e.camSafeUrlEncode(x).replace(/%2F/g,"/")),n.isLocation&&(Y=Y.replace(/^https?:\/\//,"")),Y}var h=function(v){if(!v.Bucket||!v.Region)return"";var s=v.UseAccelerate===void 0?this.options.UseAccelerate:v.UseAccelerate,f=v.Url||a({ForcePathStyle:this.options.ForcePathStyle,protocol:this.options.Protocol,domain:this.options.Domain,bucket:v.Bucket,region:s?"accelerate":v.Region}),b=f.replace(/^https?:\/\/([^/]+)(\/.*)?$/,"$1"),C=new RegExp("^([a-z\\d-]+-\\d+\\.)?(cos|cosv6|ci|pic)\\.([a-z\\d-]+)\\.myqcloud\\.com$");return C.test(b)?b:""};function E(n,v){var s=e.clone(n.Headers),f="";e.each(s,function(De,_e){(De===""||["content-type","cache-control","expires"].indexOf(_e.toLowerCase())>-1)&&delete s[_e],_e.toLowerCase()==="host"&&(f=De)});var b=n.ForceSignHost!==!1;!f&&n.SignHost&&b&&(s.Host=n.SignHost);var C=!1,x=function(_e,Le){C||(C=!0,Le&&Le.XCosSecurityToken&&!Le.SecurityToken&&(Le=e.clone(Le),Le.SecurityToken=Le.XCosSecurityToken,delete Le.XCosSecurityToken),v&&v(_e,Le))},_=this,Y=n.Bucket||"",Ee=n.Region||"",Te=n.Key||"";_.options.ForcePathStyle&&Y&&(Te=Y+"/"+Te);var be="/"+Te,Re={},Me=n.Scope;if(!Me){var We=n.Action||"",tt=n.ResourceKey||n.Key||"";Me=n.Scope||[{action:We,bucket:Y,region:Ee,prefix:tt}]}var et=e.md5(JSON.stringify(Me));_._StsCache=_._StsCache||[],function(){var De,_e;for(De=_._StsCache.length-1;De>=0;De--){_e=_._StsCache[De];var Le=Math.round(e.getSkewTime(_.options.SystemClockOffset)/1e3)+30;if(_e.StartTime&&Le<_e.StartTime||Le>=_e.ExpiredTime){_._StsCache.splice(De,1);continue}if(!_e.ScopeLimit||_e.ScopeLimit&&_e.ScopeKey===et){Re=_e;break}}}();var Je=function(){var _e="";Re.StartTime&&n.Expires?_e=Re.StartTime+";"+(Re.StartTime+n.Expires*1):Re.StartTime&&Re.ExpiredTime&&(_e=Re.StartTime+";"+Re.ExpiredTime);var Le=e.getAuth({SecretId:Re.TmpSecretId,SecretKey:Re.TmpSecretKey,Method:n.Method,Pathname:be,Query:n.Query,Headers:s,Expires:n.Expires,UseRawKey:_.options.UseRawKey,SystemClockOffset:_.options.SystemClockOffset,KeyTime:_e,ForceSignHost:b}),ze={Authorization:Le,SecurityToken:Re.SecurityToken||Re.XCosSecurityToken||"",Token:Re.Token||"",ClientIP:Re.ClientIP||"",ClientUA:Re.ClientUA||""};x(null,ze)},nt=function(_e){if(_e.Authorization){var Le=!1,ze=_e.Authorization;if(ze)if(ze.indexOf(" ")>-1)Le=!1;else if(ze.indexOf("q-sign-algorithm=")>-1&&ze.indexOf("q-ak=")>-1&&ze.indexOf("q-sign-time=")>-1&&ze.indexOf("q-key-time=")>-1&&ze.indexOf("q-url-param-list=")>-1)Le=!0;else try{ze=atob(ze),ze.indexOf("a=")>-1&&ze.indexOf("k=")>-1&&ze.indexOf("t=")>-1&&ze.indexOf("r=")>-1&&ze.indexOf("b=")>-1&&(Le=!0)}catch{}if(!Le)return e.error(new Error("getAuthorization callback params format error"))}else{if(!_e.TmpSecretId)return e.error(new Error('getAuthorization callback params missing "TmpSecretId"'));if(!_e.TmpSecretKey)return e.error(new Error('getAuthorization callback params missing "TmpSecretKey"'));if(!_e.SecurityToken&&!_e.XCosSecurityToken)return e.error(new Error('getAuthorization callback params missing "SecurityToken"'));if(!_e.ExpiredTime)return e.error(new Error('getAuthorization callback params missing "ExpiredTime"'));if(_e.ExpiredTime&&_e.ExpiredTime.toString().length!==10)return e.error(new Error('getAuthorization callback params "ExpiredTime" should be 10 digits'));if(_e.StartTime&&_e.StartTime.toString().length!==10)return e.error(new Error('getAuthorization callback params "StartTime" should be 10 StartTime'))}return!1};if(Re.ExpiredTime&&Re.ExpiredTime-e.getSkewTime(_.options.SystemClockOffset)/1e3>60)Je();else if(_.options.getAuthorization)_.options.getAuthorization.call(_,{Bucket:Y,Region:Ee,Method:n.Method,Key:Te,Pathname:be,Query:n.Query,Headers:s,Scope:Me,SystemClockOffset:_.options.SystemClockOffset,ForceSignHost:b},function(De){typeof De=="string"&&(De={Authorization:De});var _e=nt(De);if(_e)return x(_e);De.Authorization?x(null,De):(Re=De||{},Re.Scope=Me,Re.ScopeKey=et,_._StsCache.push(Re),Je())});else if(_.options.getSTS)_.options.getSTS.call(_,{Bucket:Y,Region:Ee},function(De){Re=De||{},Re.Scope=Me,Re.ScopeKey=et,Re.TmpSecretId||(Re.TmpSecretId=Re.SecretId),Re.TmpSecretKey||(Re.TmpSecretKey=Re.SecretKey);var _e=nt(Re);if(_e)return x(_e);_._StsCache.push(Re),Je()});else return function(){var De=e.getAuth({SecretId:n.SecretId||_.options.SecretId,SecretKey:n.SecretKey||_.options.SecretKey,Method:n.Method,Pathname:be,Query:n.Query,Headers:s,Expires:n.Expires,UseRawKey:_.options.UseRawKey,SystemClockOffset:_.options.SystemClockOffset,ForceSignHost:b}),_e={Authorization:De,SecurityToken:_.options.SecurityToken||_.options.XCosSecurityToken};return x(null,_e),_e}();return""}function K(n){var v=!1,s=!1,f=n.headers&&(n.headers.date||n.headers.Date)||n.error&&n.error.ServerTime;try{var b=n.error.Code,C=n.error.Message;(b==="RequestTimeTooSkewed"||b==="AccessDenied"&&C==="Request has expired")&&(s=!0)}catch{}if(n)if(s&&f){var x=Date.parse(f);this.options.CorrectClockSkew&&Math.abs(e.getSkewTime(this.options.SystemClockOffset)-x)>=3e4&&(console.error("error: Local time is too skewed."),this.options.SystemClockOffset=x-Date.now(),v=!0)}else Math.floor(n.statusCode/100)===5&&(v=!0);return v}function M(n,v){var s=this;!n.headers&&(n.headers={}),!n.qs&&(n.qs={}),n.VersionId&&(n.qs.versionId=n.VersionId),n.qs=e.clearKey(n.qs),n.headers&&(n.headers=e.clearKey(n.headers)),n.qs&&(n.qs=e.clearKey(n.qs));var f=e.clone(n.qs);n.action&&(f[n.action]="");var b=n.url||n.Url,C=n.SignHost||h.call(this,{Bucket:n.Bucket,Region:n.Region,Url:b}),x=n.tracker,_=function Y(Ee){var Te=s.options.SystemClockOffset;x&&x.setParams({signStartTime:new Date().getTime(),retryTimes:Ee-1}),E.call(s,{Bucket:n.Bucket||"",Region:n.Region||"",Method:n.method,Key:n.Key,Query:f,Headers:n.headers,SignHost:C,Action:n.Action,ResourceKey:n.ResourceKey,Scope:n.Scope,ForceSignHost:s.options.ForceSignHost},function(be,Re){if(be){v(be);return}x&&x.setParams({signEndTime:new Date().getTime(),httpStartTime:new Date().getTime()}),n.AuthData=Re,Ie.call(s,n,function(Me,We){x&&x.setParams({httpEndTime:new Date().getTime()}),Me&&Ee<2&&(Te!==s.options.SystemClockOffset||K.call(s,Me))?(n.headers&&(delete n.headers.Authorization,delete n.headers.token,delete n.headers.clientIP,delete n.headers.clientUA,n.headers["x-cos-security-token"]&&delete n.headers["x-cos-security-token"],n.headers["x-ci-security-token"]&&delete n.headers["x-ci-security-token"]),Y(Ee+1)):v(Me,We)})})};_(1)}function Ie(n,v){var s=this,f=n.TaskId;if(!(f&&!s._isRunningTask(f))){var b=n.Bucket,C=n.Region,x=n.Key,_=n.method||"GET",Y=n.Url||n.url,Ee=n.body,Te=n.rawBody;s.options.UseAccelerate&&(C="accelerate"),Y=Y||a({ForcePathStyle:s.options.ForcePathStyle,protocol:s.options.Protocol,domain:s.options.Domain,bucket:b,region:C,object:x}),n.action&&(Y=Y+"?"+(e.isIOS_QQ?"".concat(n.action,"="):n.action)),n.qsStr&&(Y.indexOf("?")>-1?Y=Y+"&"+n.qsStr:Y=Y+"?"+n.qsStr);var be={method:_,url:Y,headers:n.headers,qs:n.qs,body:Ee},Re="x-cos-security-token";if(e.isCIHost(Y)&&(Re="x-ci-security-token"),be.headers.Authorization=n.AuthData.Authorization,n.AuthData.Token&&(be.headers.token=n.AuthData.Token),n.AuthData.ClientIP&&(be.headers.clientIP=n.AuthData.ClientIP),n.AuthData.ClientUA&&(be.headers.clientUA=n.AuthData.ClientUA),n.AuthData.SecurityToken&&(be.headers[Re]=n.AuthData.SecurityToken),be.headers&&(be.headers=e.clearKey(be.headers)),be=e.clearKey(be),n.onProgress&&typeof n.onProgress=="function"){var Me=Ee&&(Ee.size||Ee.length)||0;be.onProgress=function(De){if(!(f&&!s._isRunningTask(f))){var _e=De?De.loaded:0;n.onProgress({loaded:_e,total:Me})}}}n.onDownloadProgress&&(be.onDownloadProgress=n.onDownloadProgress),n.DataType&&(be.dataType=n.DataType),this.options.Timeout&&(be.timeout=this.options.Timeout),s.options.ForcePathStyle&&(be.pathStyle=s.options.ForcePathStyle),s.emit("before-send",be);var We=be.url.includes("accelerate."),tt=be.qs?Object.keys(be.qs).map(function(De){return"".concat(De,"=").concat(be.qs[De])}).join("&"):"",et=tt?be.url+"?"+tt:be.url;n.tracker&&n.tracker.setParams({reqUrl:et,accelerate:We?"Y":"N"}),n.tracker&&n.tracker.parent&&n.tracker.parent.setParams({reqUrl:et,accelerate:We?"Y":"N"});var Je=(s.options.Request||r)(be,function(De){if(!(De&&De.error==="abort")){var _e={options:be,error:De&&De.error,statusCode:De&&De.statusCode||0,statusMessage:De&&De.statusMessage||"",headers:De&&De.headers||{},body:De&&De.body};s.emit("after-receive",_e);var Le=_e.error,ze=_e.body,Ye={statusCode:_e.statusCode,statusMessage:_e.statusMessage,headers:_e.headers},dt,rt=function(ut,ct){if(f&&s.off("inner-kill-task",nt),!dt){dt=!0;var lt={};Ye&&Ye.statusCode&&(lt.statusCode=Ye.statusCode),Ye&&Ye.headers&&(lt.headers=Ye.headers),ut?(ut=e.extend(ut||{},lt),v(ut,null)):(ct=e.extend(ct||{},lt),v(null,ct)),Je=null}};if(Le)return rt(e.error(Le));var st=Ye.statusCode,ft=Math.floor(st/100)===2;if(Te&&ft)return rt(null,{body:ze});var ot;try{ot=ze&&ze.indexOf("<")>-1&&ze.indexOf(">")>-1&&e.xml2json(ze)||{}}catch{ot={}}var at=ot&&ot.Error;ft?rt(null,ot):at?rt(e.error(new Error(at.Message),{code:at.Code,error:at})):st?rt(e.error(new Error(Ye.statusMessage),{code:""+st})):st&&rt(e.error(new Error("statusCode error")))}}),nt=function De(_e){_e.TaskId===f&&(Je&&Je.abort&&Je.abort(),s.off("inner-kill-task",De))};f&&s.on("inner-kill-task",nt)}}var Ue={getService:T,putBucket:m,headBucket:w,getBucket:B,deleteBucket:k,putBucketAcl:R,getBucketAcl:D,putBucketCors:L,getBucketCors:z,deleteBucketCors:j,getBucketLocation:q,getBucketPolicy:X,putBucketPolicy:te,deleteBucketPolicy:de,putBucketTagging:U,getBucketTagging:S,deleteBucketTagging:u,putBucketLifecycle:P,getBucketLifecycle:p,deleteBucketLifecycle:N,putBucketVersioning:H,getBucketVersioning:G,putBucketReplication:oe,getBucketReplication:I,deleteBucketReplication:V,putBucketWebsite:Q,getBucketWebsite:W,deleteBucketWebsite:Z,putBucketReferer:se,getBucketReferer:ce,putBucketDomain:ue,getBucketDomain:ne,deleteBucketDomain:fe,putBucketOrigin:le,getBucketOrigin:ye,deleteBucketOrigin:J,putBucketLogging:re,getBucketLogging:pe,putBucketInventory:Ce,getBucketInventory:ge,listBucketInventory:me,deleteBucketInventory:Se,putBucketAccelerate:ke,getBucketAccelerate:we,putBucketEncryption:Be,getBucketEncryption:Ae,deleteBucketEncryption:Oe,getObject:$,headObject:ae,listObjectVersions:O,putObject:g,deleteObject:l,getObjectAcl:d,putObjectAcl:c,optionsObject:y,putObjectCopy:A,deleteMultipleObject:ee,restoreObject:he,putObjectTagging:ve,getObjectTagging:ie,deleteObjectTagging:Pe,selectObjectContent:xe,appendObject:qe,uploadPartCopy:F,multipartInit:Fe,multipartUpload:Ne,multipartComplete:je,multipartList:Ke,multipartListPart:Ve,multipartAbort:Ge,request:He,getObjectUrl:it,getAuth:Qe};function $e(n,v,s){e.each(["Cors","Acl"],function(f){if(n.slice(-f.length)===f){var b=n.slice(0,-f.length)+f.toUpperCase(),C=e.apiWrapper(n,v),x=!1;s[b]=function(){!x&&console.warn("warning: cos."+b+" has been deprecated. Please Use cos."+n+" instead."),x=!0,C.apply(this,arguments)}}})}o.exports.init=function(n,v){v.transferToTaskMethod(Ue,"putObject"),e.each(Ue,function(s,f){n.prototype[f]=e.apiWrapper(f,s),$e(f,s,n.prototype)})}},"./src/cos.js":function(o,i,t){var r=t("./src/util.js"),e=t("./src/event.js"),T=t("./src/task.js"),m=t("./src/base.js"),w=t("./src/advance.js"),B=t("./package.json"),k={AppId:"",SecretId:"",SecretKey:"",SecurityToken:"",ChunkRetryTimes:2,FileParallelLimit:3,ChunkParallelLimit:3,ChunkSize:1024*1024,SliceSize:1024*1024,CopyChunkParallelLimit:20,CopyChunkSize:1024*1024*10,CopySliceSize:1024*1024*10,MaxPartNumber:1e4,ProgressInterval:1e3,Domain:"",ServiceDomain:"",Protocol:"",CompatibilityMode:!1,ForcePathStyle:!1,UseRawKey:!1,Timeout:0,CorrectClockSkew:!0,SystemClockOffset:0,UploadCheckContentMd5:!1,UploadQueueSize:1e4,UploadAddMetaMd5:!1,UploadIdCacheLimit:50,UseAccelerate:!1,ForceSignHost:!0,EnableTracker:!1,DeepTracker:!1,TrackerDelay:5e3,CustomId:""},R=function(L){this.options=r.extend(r.clone(k),L||{}),this.options.FileParallelLimit=Math.max(1,this.options.FileParallelLimit),this.options.ChunkParallelLimit=Math.max(1,this.options.ChunkParallelLimit),this.options.ChunkRetryTimes=Math.max(0,this.options.ChunkRetryTimes),this.options.ChunkSize=Math.max(1024*1024,this.options.ChunkSize),this.options.CopyChunkParallelLimit=Math.max(1,this.options.CopyChunkParallelLimit),this.options.CopyChunkSize=Math.max(1024*1024,this.options.CopyChunkSize),this.options.CopySliceSize=Math.max(0,this.options.CopySliceSize),this.options.MaxPartNumber=Math.max(1024,Math.min(1e4,this.options.MaxPartNumber)),this.options.Timeout=Math.max(0,this.options.Timeout),this.options.AppId&&console.warn('warning: AppId has been deprecated, Please put it at the end of parameter Bucket(E.g: "test-1250000000").'),this.options.SecretId&&this.options.SecretId.indexOf(" ")>-1&&(console.error("error: SecretId格式错误，请检查"),console.error("error: SecretId format is incorrect. Please check")),this.options.SecretKey&&this.options.SecretKey.indexOf(" ")>-1&&(console.error("error: SecretKey格式错误，请检查"),console.error("error: SecretKey format is incorrect. Please check")),r.isNode()&&(console.warn("warning: cos-js-sdk-v5 不支持 nodejs 环境使用，请改用 cos-nodejs-sdk-v5，参考文档： https://cloud.tencent.com/document/product/436/8629"),console.warn("warning: cos-js-sdk-v5 does not support nodejs environment. Please use cos-nodejs-sdk-v5 instead. See: https://cloud.tencent.com/document/product/436/8629")),e.init(this),T.init(this)};m.init(R,T),w.init(R,T),R.util={md5:r.md5,xml2json:r.xml2json,json2xml:r.json2xml},R.getAuthorization=r.getAuth,R.version=B.version,o.exports=R},"./src/event.js":function(o,i){var t=function(T){var m={},w=function(k){return!m[k]&&(m[k]=[]),m[k]};T.on=function(B,k){B==="task-list-update"&&console.warn('warning: Event "'+B+'" has been deprecated. Please use "list-update" instead.'),w(B).push(k)},T.off=function(B,k){for(var R=w(B),D=R.length-1;D>=0;D--)k===R[D]&&R.splice(D,1)},T.emit=function(B,k){for(var R=w(B).map(function(L){return L}),D=0;D<R.length;D++)R[D](k)}},r=function(){t(this)};o.exports.init=t,o.exports.EventProxy=r},"./src/session.js":function(o,i,t){var r=t("./src/util.js"),e="cos_sdk_upload_cache",T=30*24*3600,m,w,B=function(){try{var j=JSON.parse(localStorage.getItem(e))}catch{}j||(j=[]),m=j},k=function(){try{m.length?localStorage.setItem(e,JSON.stringify(m)):localStorage.removeItem(e)}catch{}},R=function(){if(!m){B.call(this);for(var j=!1,q=Math.round(Date.now()/1e3),te=m.length-1;te>=0;te--){var X=m[te][2];(!X||X+T<q)&&(m.splice(te,1),j=!0)}j&&k()}},D=function(){w||(w=setTimeout(function(){k(),w=null},400))},L={using:{},setUsing:function(j){L.using[j]=!0},removeUsing:function(j){delete L.using[j]},getFileId:function(j,q,te,X){return j.name&&j.size&&j.lastModifiedDate&&q?r.md5([j.name,j.size,j.lastModifiedDate,q,te,X].join("::")):null},getCopyFileId:function(j,q,te,X,de){var U=q["content-length"],S=q.etag||"",u=q["last-modified"];return j&&te?r.md5([j,U,S,u,te,X,de].join("::")):null},getUploadIdList:function(j){if(!j)return null;R.call(this);for(var q=[],te=0;te<m.length;te++)m[te][0]===j&&q.push(m[te][1]);return q.length?q:null},saveUploadId:function(j,q,te){if(R.call(this),!!j){for(var X=m.length-1;X>=0;X--){var de=m[X];de[0]===j&&de[1]===q&&m.splice(X,1)}m.unshift([j,q,Math.round(Date.now()/1e3)]),m.length>te&&m.splice(te),D()}},removeUploadId:function(j){R.call(this),delete L.using[j];for(var q=m.length-1;q>=0;q--)m[q][1]===j&&m.splice(q,1);D()}};o.exports=L},"./src/task.js":function(o,i,t){var r=t("./src/session.js"),e=t("./src/util.js"),T={},m=function(k,R){T[R]=k[R],k[R]=function(D,L){D.SkipTask?T[R].call(this,D,L):this._addTask(R,D,L)}},w=function(k){var R=[],D={},L=0,z=0,j=function(u){var P={id:u.id,Bucket:u.Bucket,Region:u.Region,Key:u.Key,FilePath:u.FilePath,state:u.state,loaded:u.loaded,size:u.size,speed:u.speed,percent:u.percent,hashPercent:u.hashPercent,error:u.error};return u.FilePath&&(P.FilePath=u.FilePath),u._custom&&(P._custom=u._custom),P},q=function(){var S,u=function(){S=0,k.emit("task-list-update",{list:e.map(R,j)}),k.emit("list-update",{list:e.map(R,j)})};return function(){S||(S=setTimeout(u))}}(),te=function(){if(!(R.length<=k.options.UploadQueueSize)){for(var u=0;u<z&&u<R.length&&R.length>k.options.UploadQueueSize;){var P=R[u].state==="waiting"||R[u].state==="checking"||R[u].state==="uploading";!R[u]||!P?(D[R[u].id]&&delete D[R[u].id],R.splice(u,1),z--):u++}q()}},X=function S(){if(!(L>=k.options.FileParallelLimit)){for(;R[z]&&R[z].state!=="waiting";)z++;if(!(z>=R.length)){var u=R[z];z++,L++,u.state="checking",u.params.onTaskStart&&u.params.onTaskStart(j(u)),!u.params.UploadData&&(u.params.UploadData={});var P=e.formatParams(u.api,u.params);T[u.api].call(k,P,function(p,N){k._isRunningTask(u.id)&&((u.state==="checking"||u.state==="uploading")&&(u.state=p?"error":"success",p&&(u.error=p),L--,q(),S(),u.callback&&u.callback(p,N),u.state==="success"&&(u.params&&(delete u.params.UploadData,delete u.params.Body,delete u.params),delete u.callback)),te())}),q(),setTimeout(S)}}},de=function(u,P){var p=D[u];if(p){var N=p&&p.state==="waiting",H=p&&(p.state==="checking"||p.state==="uploading");if(P==="canceled"&&p.state!=="canceled"||P==="paused"&&N||P==="paused"&&H){if(P==="paused"&&p.params.Body&&typeof p.params.Body.pipe=="function"){console.error("stream not support pause");return}p.state=P,k.emit("inner-kill-task",{TaskId:u,toState:P});try{var G=p&&p.params&&p.params.UploadData.UploadId}catch{}P==="canceled"&&G&&r.removeUsing(G),q(),H&&(L--,X()),P==="canceled"&&(p.params&&(delete p.params.UploadData,delete p.params.Body,delete p.params),delete p.callback)}te()}};k._addTasks=function(S){e.each(S,function(u){k._addTask(u.api,u.params,u.callback,!0)}),q()};var U=!0;k._addTask=function(S,u,P,p){u=e.formatParams(S,u);var N=e.uuid();u.TaskId=N,u.onTaskReady&&u.onTaskReady(N),u.TaskReady&&(u.TaskReady(N),U&&console.warn('warning: Param "TaskReady" has been deprecated. Please use "onTaskReady" instead.'),U=!1);var H={params:u,callback:P,api:S,index:R.length,id:N,Bucket:u.Bucket,Region:u.Region,Key:u.Key,FilePath:u.FilePath||"",state:"waiting",loaded:0,size:0,speed:0,percent:0,hashPercent:0,error:null,_custom:u._custom},G=u.onHashProgress;u.onHashProgress=function(I){k._isRunningTask(H.id)&&(H.hashPercent=I.percent,G&&G(I),q())};var oe=u.onProgress;return u.onProgress=function(I){k._isRunningTask(H.id)&&(H.state==="checking"&&(H.state="uploading"),H.loaded=I.loaded,H.speed=I.speed,H.percent=I.percent,oe&&oe(I),q())},e.getFileSize(S,u,function(I,V){if(I)return P(e.error(I));D[N]=H,R.push(H),H.size=V,!p&&q(),X(),te()}),N},k._isRunningTask=function(S){var u=D[S];return!!(u&&(u.state==="checking"||u.state==="uploading"))},k.getTaskList=function(){return e.map(R,j)},k.cancelTask=function(S){de(S,"canceled")},k.pauseTask=function(S){de(S,"paused")},k.restartTask=function(S){var u=D[S];u&&(u.state==="paused"||u.state==="error")&&(u.state="waiting",q(),z=Math.min(z,u.index),X())},k.isUploadRunning=function(){return L||z<R.length}};o.exports.transferToTaskMethod=m,o.exports.init=w},"./src/tracker.js":function(o,i,t){var r=t("./node_modules/@babel/runtime/helpers/classCallCheck.js"),e=t("./node_modules/@babel/runtime/helpers/createClass.js"),T=t("./node_modules/@babel/runtime/helpers/typeof.js"),m=t("./package.json"),w=null,B=function(S){if(!w){var u=t("./lib/beacon.min.js");w=new u({appkey:"0AND0VEVB24UBGDU",versionCode:m.version,channelID:"js_sdk",openid:"openid",unionid:"unid",strictMode:!1,delay:S,sessionDuration:60*1e3})}return w},k={getUid:function(){var S=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return S()+S()+"-"+S()+"-"+S()+"-"+S()+"-"+S()+S()+S()},getNetType:function(){if((typeof navigator>"u"?"undefined":T(navigator))==="object"){var S=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return(S==null?void 0:S.type)||(S==null?void 0:S.effectiveType)||"unknown"}return"unknown"},getOsType:function(){if((typeof navigator>"u"?"undefined":T(navigator))!=="object")return"unknown os";var S=navigator.userAgent.toLowerCase(),u=/macintosh|mac os x/i.test(navigator.userAgent);return S.indexOf("win32")>=0||S.indexOf("wow32")>=0?"win32":S.indexOf("win64")>=0||S.indexOf("wow64")>=0?"win64":u?"mac":"unknown os"},isMobile:function(){var S=/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i;return!!((typeof navigator>"u"?"undefined":T(navigator))==="object"&&navigator.userAgent.match(S))},isAndroid:function(){var S=/(Android|Adr|Linux)/i;return!!((typeof navigator>"u"?"undefined":T(navigator))==="object"&&navigator.userAgent.match(S))},isIOS:function(){var S=/(iPhone|iPod|iPad|iOS)/i;return!!((typeof navigator>"u"?"undefined":T(navigator))==="object"&&navigator.userAgent.match(S))},isOtherMobile:function(){return isMobile&&!isAndroid&&!isIOS},getDeviceName:function(){if((typeof navigator>"u"?"undefined":T(navigator))!=="object")return"unknown device";var S=navigator.userAgent.toLowerCase();if(S.includes("app/tencent_wemeet"))return"tencent_wemeet";if(S.indexOf("maxthon")>=0){var u=S.match(/maxthon\/([\d.]+)/),P=u&&u[1]||"";return"傲游浏览器 ".concat(P).trim()}if(S.indexOf("qqbrowser")>=0){var p=S.match(/qqbrowser\/([\d.]+)/),N=p&&p[1]||"";return"QQ浏览器 ".concat(N).trim()}if(S.indexOf("se 2.x")>=0)return"搜狗浏览器";if(S.indexOf("wxwork")>=0)return"微信内置浏览器";if(S.indexOf("msie")>=0){var H=S.match(/msie ([\d.]+)/),G=H&&H[1]||"";return"IE ".concat(G).trim()}if(S.indexOf("firefox")>=0){var oe=S.match(/firefox\/([\d.]+)/),I=oe&&oe[1]||"";return"Firefox ".concat(I).trim()}if(S.indexOf("chrome")>=0){var V=S.match(/chrome\/([\d.]+)/),Q=V&&V[1]||"";return"Chrome ".concat(Q).trim()}if(S.indexOf("opera")>=0){var W=S.match(/opera.([\d.]+)/),Z=W&&W[1]||"";return"Opera ".concat(Z).trim()}if(S.indexOf("safari")>=0){var se=S.match(/version\/([\d.]+)/),ce=se&&se[1]||"";return"Safari ".concat(ce).trim()}if(S.indexOf("edge")>=0){var ue=S.match(/edge\/([\d.]+)/),ne=ue&&ue[1]||"";return"edge ".concat(ne).trim()}return S.substr(0,200)}},R={isMobile:k.isMobile(),isBrowser:!k.isMobile(),mobileOsType:k.isAndroid()?"android":k.isIOS?"ios":"other_mobile",pcOsType:k.getOsType()},D={deviceType:R.isMobile?"mobile":R.isBrowser?"browser":"unknown",devicePlatform:R.isMobile?R.mobileOsType:R.pcOsType,deviceName:k.getDeviceName()},L=["multipartInit","multipartUpload","multipartComplete","multipartList","multipartListPart","multipartAbort"],z=["putObject","postObject","appendObject","sliceUploadFile","uploadFile","uploadFiles"].concat(L),j=["getObject"];function q(U){return z.includes(U)?"cos_upload":j.includes(U)?"cos_download":"base_service"}function te(U){return U.replace(/([A-Z])/g,"_$1").toLowerCase()}function X(U){var S={},u=["tracePlatform","cossdkVersion","region","networkType","host","accelerate","requestPath","size","httpMd5","httpSign","httpFull","name","result","tookTime","errorNode","errorCode","errorMessage","errorRequestId","errorStatusCode","errorServiceName","errorType","traceId","bucket","appid","partNumber","retryTimes","reqUrl","customId","fullError","deviceType","devicePlatform","deviceName"],P=["tracePlatform","cossdkVersion","region","bucket","appid","networkType","host","accelerate","requestPath","partNumber","size","name","result","tookTime","errorRequestId","retryTimes","reqUrl","customId","deviceType","devicePlatform","deviceName"],p=U.result==="Success"?P:u;for(var N in U)if(p.includes(N)){var H=te(N);S[H]=U[N]}return S}var de=function(){function U(S){r(this,U);var u=S.parent,P=S.traceId,p=S.bucket,N=S.region,H=S.apiName,G=S.fileKey,oe=S.fileSize,I=S.accelerate,V=S.customId,Q=S.delay,W=S.deepTracker,Z=p&&p.substr(p.lastIndexOf("-")+1)||"";this.parent=u,this.deepTracker=W,this.delay=Q,this.params={cossdkVersion:m.version,region:N,networkType:"",host:"",accelerate:I?"Y":"N",requestPath:G||"",size:oe||-1,httpMd5:0,httpSign:0,httpFull:0,name:H||"",result:"",tookTime:0,errorNode:"",errorCode:"",errorMessage:"",errorRequestId:"",errorStatusCode:0,errorServiceName:"",tracePlatform:"cos-js-sdk-v5",traceId:P||k.getUid(),bucket:p,appid:Z,partNumber:0,retryTimes:0,reqUrl:"",customId:V||"",deviceType:D.deviceType,devicePlatform:D.devicePlatform,deviceName:D.deviceName,md5StartTime:0,md5EndTime:0,signStartTime:0,signEndTime:0,httpStartTime:0,httpEndTime:0,startTime:new Date().getTime(),endTime:0},this.beacon=B(Q)}return e(U,[{key:"formatResult",value:function(u,P){var p,N,H,G,oe,I,V=new Date().getTime(),Q=V-this.params.startTime,W=k.getNetType(),Z=u?(u==null?void 0:u.code)||(u==null||(p=u.error)===null||p===void 0?void 0:p.code)||(u==null||(N=u.error)===null||N===void 0?void 0:N.Code):"",se=u?(u==null?void 0:u.message)||(u==null||(H=u.error)===null||H===void 0?void 0:H.message)||(u==null||(G=u.error)===null||G===void 0?void 0:G.Message):"",ce=u?(u==null?void 0:u.resource)||(u==null||(oe=u.error)===null||oe===void 0?void 0:oe.resource)||(u==null||(I=u.error)===null||I===void 0?void 0:I.Resource):"",ue=u?u==null?void 0:u.statusCode:P.statusCode,ne=u?(u==null?void 0:u.headers)&&(u==null?void 0:u.headers["x-cos-request-id"]):(P==null?void 0:P.headers)&&(P==null?void 0:P.headers["x-cos-request-id"]),fe=u?ne?"Server":"Client":"";if(Object.assign(this.params,{tookTime:Q,networkType:W,httpMd5:this.params.md5EndTime-this.params.md5StartTime,httpSign:this.params.signEndTime-this.params.signStartTime,httpFull:this.params.httpEndTime-this.params.httpStartTime,result:u?"Fail":"Success",errorType:fe,errorCode:Z,errorStatusCode:ue,errorMessage:se,errorServiceName:ce,errorRequestId:ne}),u&&(!Z||!se)&&(this.params.fullError=u?JSON.stringify(u):""),this.params.name==="getObject"&&(this.params.size=P?P.headers&&P.headers["content-length"]:-1),this.params.reqUrl)try{var le=/^http(s)?:\/\/(.*?)\//.exec(this.params.reqUrl);this.params.host=le[2]}catch{this.params.host=this.params.reqUrl}this.sendEvents()}},{key:"setParams",value:function(u){Object.assign(this.params,u)}},{key:"sendEvents",value:function(){if(!(L.includes(this.params.name)&&!this.deepTracker)){var u=q(this.params.name),P=X(this.params);this.beacon||(this.beacon=B(this.delay||5e3)),this.delay===0?this.beacon&&this.beacon.onDirectUserAction(u,P):this.beacon&&this.beacon.onUserAction(u,P)}}},{key:"generateSubTracker",value:function(u){return Object.assign(u,{parent:this,deepTracker:this.deepTracker,traceId:this.params.traceId,bucket:this.params.bucket,region:this.params.region,fileKey:this.params.requestPath,customId:this.params.customId,delay:this.delay}),new U(u)}}]),U}();o.exports=de},"./src/util.js":function(o,i,t){(function(r){var e=t("./node_modules/@babel/runtime/helpers/typeof.js"),T=t("./lib/md5.js"),m=t("./lib/crypto.js"),w=t("./lib/xml2json.js"),B=t("./lib/json2xml.js"),k=t("./src/tracker.js");function R(ae){return encodeURIComponent(ae).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}function D(ae,O){var $=[];for(var g in ae)ae.hasOwnProperty(g)&&$.push(O?R(g).toLowerCase():g);return $.sort(function(l,d){return l=l.toLowerCase(),d=d.toLowerCase(),l===d?0:l>d?1:-1})}var L=function(O,$){var g,l,d,c=[],y=D(O);for(g=0;g<y.length;g++)l=y[g],d=O[l]===void 0||O[l]===null?"":""+O[l],l=$?R(l).toLowerCase():R(l),d=R(d)||"",c.push(l+"="+d);return c.join("&")},z=["cache-control","content-disposition","content-encoding","content-length","content-md5","expect","expires","host","if-match","if-modified-since","if-none-match","if-unmodified-since","origin","range","transfer-encoding"],j=function(O){var $={};for(var g in O){var l=g.toLowerCase();(l.indexOf("x-cos-")>-1||z.indexOf(l)>-1)&&($[g]=O[g])}return $},q=function(O){O=O||{};var $=O.SecretId,g=O.SecretKey,l=O.KeyTime,d=(O.method||O.Method||"get").toLowerCase(),c=I(O.Query||O.params||{}),y=j(I(O.Headers||O.headers||{})),A=O.Key||"",F;O.UseRawKey?F=O.Pathname||O.pathname||"/"+A:(F=O.Pathname||O.pathname||A,F.indexOf("/")!==0&&(F="/"+F));var ee=O.ForceSignHost!==!1;if(!y.Host&&!y.host&&O.Bucket&&O.Region&&ee&&(y.Host=O.Bucket+".cos."+O.Region+".myqcloud.com"),!$)throw new Error("missing param SecretId");if(!g)throw new Error("missing param SecretKey");var he=Math.round(ge(O.SystemClockOffset)/1e3)-1,ve=he,ie=O.Expires||O.expires;ie===void 0?ve+=900:ve+=ie*1||0;var Pe="sha1",xe=$,Fe=l||he+";"+ve,Ne=l||he+";"+ve,je=D(y,!0).join(";").toLowerCase(),Ke=D(c,!0).join(";").toLowerCase(),Ve=m.HmacSHA1(Ne,g).toString(),Ge=[d,F,Oe.obj2str(c,!0),Oe.obj2str(y,!0),""].join(`
`),He=["sha1",Fe,m.SHA1(Ge).toString(),""].join(`
`),qe=m.HmacSHA1(He,Ve).toString(),Qe=["q-sign-algorithm="+Pe,"q-ak="+xe,"q-sign-time="+Fe,"q-key-time="+Ne,"q-header-list="+je,"q-url-param-list="+Ke,"q-signature="+qe].join("&");return Qe},te=function(O,$,g){var l=$/8,d=O.slice(g,g+l);return new Uint8Array(d).reverse(),new{8:Uint8Array,16:Uint16Array,32:Uint32Array}[$](d)[0]},X=function(O,$,g,l){var d=O.slice($,g),c="";return new Uint8Array(d).forEach(function(y){c+=String.fromCharCode(y)}),l&&(c=decodeURIComponent(escape(c))),c},de=function(O){for(var $={},g=X(O),l={records:[]};O.byteLength;){var d=te(O,32,0),c=te(O,32,4),y=d-c-16,A=0,F;for(O=O.slice(12);A<c;){var ee=te(O,8,A),he=X(O,A+1,A+1+ee),ve=te(O,16,A+ee+2),ie=X(O,A+ee+4,A+ee+4+ve);$[he]=ie,A+=ee+4+ve}if($[":event-type"]==="Records")F=X(O,A,A+y,!0),l.records.push(F);else if($[":event-type"]==="Stats")F=X(O,A,A+y,!0),l.stats=Oe.xml2json(F).Stats;else if($[":event-type"]==="error"){var Pe=$[":error-code"],xe=$[":error-message"],Fe=new Error(xe);Fe.message=xe,Fe.name=Fe.code=Pe,l.error=Fe}O=O.slice(A+y+4)}return{payload:l.records.join(""),body:g}},U=function(O){var $=this.options.CopySourceParser;if($)return $(O);var g=O.match(/^([^.]+-\d+)\.cos(v6|-cdc|-cdz|-internal)?\.([^.]+)\.((myqcloud\.com)|(tencentcos\.cn))\/(.+)$/);return g?{Bucket:g[1],Region:g[3],Key:g[7]}:null},S=function(){},u=function(O){var $={};for(var g in O)O.hasOwnProperty(g)&&O[g]!==void 0&&O[g]!==null&&($[g]=O[g]);return $},P=function(O,$){var g,l=new FileReader;FileReader.prototype.readAsBinaryString?(g=FileReader.prototype.readAsBinaryString,l.onload=function(){$(this.result)}):FileReader.prototype.readAsArrayBuffer?g=function(c){var y="",A=new FileReader;A.onload=function(F){for(var ee=new Uint8Array(A.result),he=ee.byteLength,ve=0;ve<he;ve++)y+=String.fromCharCode(ee[ve]);$(y)},A.readAsArrayBuffer(c)}:console.error("FileReader not support readAsBinaryString"),g.call(l,O)},p=function(){var ae=function(g,l){g=g.split("."),l=l.split(".");for(var d=0;d<l.length;d++)if(g[d]!==l[d])return parseInt(g[d])>parseInt(l[d])?1:-1;return 0},O=function(g){if(!g)return!1;var l=(g.match(/Chrome\/([.\d]+)/)||[])[1],d=(g.match(/QBCore\/([.\d]+)/)||[])[1],c=(g.match(/QQBrowser\/([.\d]+)/)||[])[1],y=l&&ae(l,"53.0.2785.116")<0&&d&&ae(d,"3.53.991.400")<0&&c&&ae(c,"9.0.2524.400")<=0||!1;return y};return O(typeof navigator<"u"&&navigator.userAgent)}(),N=function(O,$,g,l,d){var c;if(O.slice?c=O.slice($,g):O.mozSlice?c=O.mozSlice($,g):O.webkitSlice&&(c=O.webkitSlice($,g)),l&&p){var y=new FileReader;y.onload=function(A){c=null,d(new Blob([y.result]))},y.readAsArrayBuffer(c)}else d(c)},H=function(O,$,g,l){g=g||S,O?typeof $=="string"?g(Oe.md5($,!0)):Blob&&$ instanceof Blob?Oe.getFileMd5($,function(d,c){g(c)},l):g():g()},G=1024*1024,oe=function(O,$,g){var l=O.size,d=0,c=T.getCtx(),y=function A(F){if(F>=l){var ee=c.digest("hex");$(null,ee);return}var he=Math.min(l,F+G);Oe.fileSlice(O,F,he,!1,function(ve){P(ve,function(ie){ve=null,c=c.update(ie,!0),d+=ie.length,ie=null,g&&g({loaded:d,total:l,percent:Math.round(d/l*1e4)/1e4}),A(F+G)})})};y(0)};function I(ae){return ue(ae,function(O){return e(O)==="object"&&O!==null?I(O):O})}function V(ae,O,$){return ae&&O in ae?ae[O]:$}function Q(ae,O){return ce(O,function($,g){ae[g]=O[g]}),ae}function W(ae){return ae instanceof Array}function Z(ae,O){for(var $=!1,g=0;g<ae.length;g++)if(O===ae[g]){$=!0;break}return $}function se(ae){return W(ae)?ae:[ae]}function ce(ae,O){for(var $ in ae)ae.hasOwnProperty($)&&O(ae[$],$)}function ue(ae,O){var $=W(ae)?[]:{};for(var g in ae)ae.hasOwnProperty(g)&&($[g]=O(ae[g],g));return $}function ne(ae,O){var $=W(ae),g=$?[]:{};for(var l in ae)ae.hasOwnProperty(l)&&O(ae[l],l)&&($?g.push(ae[l]):g[l]=ae[l]);return g}var fe=function(O){var $,g,l,d="";for($=0,g=O.length/2;$<g;$++)l=parseInt(O[$*2]+O[$*2+1],16),d+=String.fromCharCode(l);return btoa(d)},le=function(){var O=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return O()+O()+"-"+O()+"-"+O()+"-"+O()+"-"+O()+O()+O()},ye=function(O,$){var g=$.Bucket,l=$.Region,d=$.Key,c=this.options.Domain,y=!c||typeof c=="string"&&c.indexOf("{Bucket}")>-1,A=!c||typeof c=="string"&&c.indexOf("{Region}")>-1;if(O.indexOf("Bucket")>-1||O==="deleteMultipleObject"||O==="multipartList"||O==="listObjectVersions"){if(y&&!g)return"Bucket";if(A&&!l)return"Region"}else if(O.indexOf("Object")>-1||O.indexOf("multipart")>-1||O==="sliceUploadFile"||O==="abortUploadTask"){if(y&&!g)return"Bucket";if(A&&!l)return"Region";if(!d)return"Key"}return!1},J=function(O,$){if($=Q({},$),O!=="getAuth"&&O!=="getV4Auth"&&O!=="getObjectUrl"){var g=$.Headers||{};if($&&e($)==="object"){(function(){for(var d in $)$.hasOwnProperty(d)&&d.indexOf("x-cos-")>-1&&(g[d]=$[d])})();var l={"x-cos-mfa":"MFA","Content-MD5":"ContentMD5","Content-Length":"ContentLength","Content-Type":"ContentType",Expect:"Expect",Expires:"Expires","Cache-Control":"CacheControl","Content-Disposition":"ContentDisposition","Content-Encoding":"ContentEncoding",Range:"Range","If-Modified-Since":"IfModifiedSince","If-Unmodified-Since":"IfUnmodifiedSince","If-Match":"IfMatch","If-None-Match":"IfNoneMatch","x-cos-copy-source":"CopySource","x-cos-copy-source-Range":"CopySourceRange","x-cos-metadata-directive":"MetadataDirective","x-cos-copy-source-If-Modified-Since":"CopySourceIfModifiedSince","x-cos-copy-source-If-Unmodified-Since":"CopySourceIfUnmodifiedSince","x-cos-copy-source-If-Match":"CopySourceIfMatch","x-cos-copy-source-If-None-Match":"CopySourceIfNoneMatch","x-cos-acl":"ACL","x-cos-grant-read":"GrantRead","x-cos-grant-write":"GrantWrite","x-cos-grant-full-control":"GrantFullControl","x-cos-grant-read-acp":"GrantReadAcp","x-cos-grant-write-acp":"GrantWriteAcp","x-cos-storage-class":"StorageClass","x-cos-traffic-limit":"TrafficLimit","x-cos-mime-limit":"MimeLimit","x-cos-server-side-encryption-customer-algorithm":"SSECustomerAlgorithm","x-cos-server-side-encryption-customer-key":"SSECustomerKey","x-cos-server-side-encryption-customer-key-MD5":"SSECustomerKeyMD5","x-cos-server-side-encryption":"ServerSideEncryption","x-cos-server-side-encryption-cos-kms-key-id":"SSEKMSKeyId","x-cos-server-side-encryption-context":"SSEContext","Pic-Operations":"PicOperations"};Oe.each(l,function(d,c){$[d]!==void 0&&(g[c]=$[d])}),$.Headers=u(g)}}return $},re=function(O,$){return function(g,l){var d=this;typeof g=="function"&&(l=g,g={}),g=J(O,g);var c;if(d.options.EnableTracker)if(g.calledBySdk==="sliceUploadFile")c=g.tracker&&g.tracker.generateSubTracker({apiName:O});else if(["uploadFile","uploadFiles"].includes(O))c=null;else{var y=-1;g.Body&&(y=typeof g.Body=="string"?g.Body.length:g.Body.size||g.Body.byteLength||-1),c=new k({bucket:g.Bucket,region:g.Region,apiName:O,fileKey:g.Key,fileSize:y,deepTracker:d.options.DeepTracker,customId:d.options.CustomId,delay:d.options.TrackerDelay})}g.tracker=c;var A=function(xe){return xe&&xe.headers&&(xe.headers["x-cos-request-id"]&&(xe.RequestId=xe.headers["x-cos-request-id"]),xe.headers["x-ci-request-id"]&&(xe.RequestId=xe.headers["x-ci-request-id"]),xe.headers["x-cos-version-id"]&&(xe.VersionId=xe.headers["x-cos-version-id"]),xe.headers["x-cos-delete-marker"]&&(xe.DeleteMarker=xe.headers["x-cos-delete-marker"])),xe},F=function(xe,Fe){c&&c.formatResult(xe,Fe),l&&l(A(xe),A(Fe))},ee=function(){if(O!=="getService"&&O!=="abortUploadTask"){var xe=ye.call(d,O,g);if(xe)return"missing param "+xe;if(g.Region){if(d.options.CompatibilityMode){if(!/^([a-z\d-.]+)$/.test(g.Region))return"Region format error."}else{if(g.Region.indexOf("cos.")>-1)return'param Region should not be start with "cos."';if(!/^([a-z\d-]+)$/.test(g.Region))return"Region format error."}!d.options.CompatibilityMode&&g.Region.indexOf("-")===-1&&g.Region!=="yfb"&&g.Region!=="default"&&g.Region!=="accelerate"&&console.warn("warning: param Region format error, find help here: https://cloud.tencent.com/document/product/436/6224")}if(g.Bucket){if(!/^([a-z\d-]+)-(\d+)$/.test(g.Bucket))if(g.AppId)g.Bucket=g.Bucket+"-"+g.AppId;else if(d.options.AppId)g.Bucket=g.Bucket+"-"+d.options.AppId;else return'Bucket should format as "test-1250000000".';g.AppId&&(console.warn('warning: AppId has been deprecated, Please put it at the end of parameter Bucket(E.g Bucket:"test-1250000000" ).'),delete g.AppId)}!d.options.UseRawKey&&g.Key&&g.Key.substr(0,1)==="/"&&(g.Key=g.Key.substr(1))}},he=ee(),ve=["getAuth","getObjectUrl"].includes(O);if(typeof Promise=="function"&&!ve&&!l)return new Promise(function(Pe,xe){if(l=function(Ne,je){Ne?xe(Ne):Pe(je)},he)return F(Oe.error(new Error(he)));$.call(d,g,F)});if(he)return F(Oe.error(new Error(he)));var ie=$.call(d,g,F);if(ve)return ie}},pe=function(O,$){var g=this,l=0,d=0,c=Date.now(),y,A;function F(){if(A=0,$&&typeof $=="function"){y=Date.now();var ee=Math.max(0,Math.round((d-l)/((y-c)/1e3)*100)/100)||0,he;d===0&&O===0?he=1:he=Math.floor(d/O*100)/100||0,c=y,l=d;try{$({loaded:d,total:O,speed:ee,percent:he})}catch{}}}return function(ee,he){if(ee&&(d=ee.loaded,O=ee.total),he)clearTimeout(A),F();else{if(A)return;A=setTimeout(F,g.options.ProgressInterval)}}},Ce=function(O,$,g){var l;if(typeof $.Body=="string"?$.Body=new Blob([$.Body],{type:"text/plain"}):$.Body instanceof ArrayBuffer&&($.Body=new Blob([$.Body])),$.Body&&($.Body instanceof Blob||$.Body.toString()==="[object File]"||$.Body.toString()==="[object Blob]"))l=$.Body.size;else{g(Oe.error(new Error("params body format error, Only allow File|Blob|String.")));return}$.ContentLength=l,g(null,l)},ge=function(O){return Date.now()+(O||0)},me=function(O,$){var g=O;return O.message=O.message||null,typeof $=="string"?(O.error=$,O.message=$):e($)==="object"&&$!==null&&(Q(O,$),($.code||$.name)&&(O.code=$.code||$.name),$.message&&(O.message=$.message),$.stack&&(O.stack=$.stack)),typeof Object.defineProperty=="function"&&(Object.defineProperty(O,"name",{writable:!0,enumerable:!1}),Object.defineProperty(O,"message",{enumerable:!0})),O.name=$&&$.name||O.name||O.code||"Error",O.code||(O.code=O.name),O.error||(O.error=I(g)),O},Se=function(){return(typeof globalThis>"u"?"undefined":e(globalThis))==="object"&&(globalThis.constructor.name==="DedicatedWorkerGlobalScope"||globalThis.FileReaderSync)},ke=function(){return(typeof window>"u"?"undefined":e(window))!=="object"&&(typeof r>"u"?"undefined":e(r))==="object"&&!0&&!Se()},we=function(O){return/^https?:\/\/([^/]+\.)?ci\.[^/]+/.test(O)},Be=function(){if((typeof navigator>"u"?"undefined":e(navigator))!=="object")return!1;var ae=navigator.userAgent,O=!!ae.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);return O}(),Ae=function(){return(typeof navigator>"u"?"undefined":e(navigator))!=="object"?!1:/\sQQ/i.test(navigator.userAgent)}(),Oe={noop:S,formatParams:J,apiWrapper:re,xml2json:w,json2xml:B,md5:T,clearKey:u,fileSlice:N,getBodyMd5:H,getFileMd5:oe,binaryBase64:fe,extend:Q,isArray:W,isInArray:Z,makeArray:se,each:ce,map:ue,filter:ne,clone:I,attr:V,uuid:le,camSafeUrlEncode:R,throttleOnProgress:pe,getFileSize:Ce,getSkewTime:ge,error:me,obj2str:L,getAuth:q,parseSelectPayload:de,getSourceParams:U,isBrowser:!0,isNode:ke,isCIHost:we,isIOS_QQ:Be&&Ae};o.exports=Oe}).call(this,t("./node_modules/process/browser.js"))}})})})(cosJsSdkV5);const Cos=getDefaultExportFromCjs(cosJsSdkV5Exports),REQUEST_INFO={YM_HTML:{url:"/base/cos/temp-credential.do",header:()=>({tk:getCookie(USER_TOKEN_KEY)||""})},IN_MARKET:{url:"/mk-opt/cos/temp-credential.do",header:{mid:2}},IN_OPERATION:{url:"/mk-opt/cos/temp-credential.do",header:{mid:3}},IN_MAN_MOBILE:{url:"/mk-opt/cos/temp-credential.do",header:{mid:4}}},CONFIG={IMG_BUCKET:"adultvacc-1253522668",VIDEO_BUCKET:"adultvaccmovie-1253522668",REGION:"ap-guangzhou",COS_IMG_OBJ_KEY:"thematic pic/",COS_VIDEO_OBJ_KEY:"hospitalmovie/"},ROOT={IMG_URL:"img.scmttec.com",MOVIE_URL:"movie.scmttec.com"};function getProject(){const o={YM_HTML:/wx/,IN_MARKET:/market/,IN_OPERATION:/operat/,IN_MAN_MOBILE:/mzs/},i=window.location.hostname;for(const[t,r]of Object.entries(o)){const e=t;if(r.test(i))return e}return""}let cos;function uploadFile(o,i="img",t,r){return o.size?new Promise((e,T)=>{const{bucket:m,region:w,key:B}=getInfo(i);initCOS(!1).then(()=>{let k=String(o.name);k=k.substring(0,k.lastIndexOf("."))+"_"+uuid()+k.substring(k.lastIndexOf("."));const R=B+k;cos.uploadFile({Bucket:m,Region:w,Key:R,Body:o,SliceSize:1024*1024*5,onProgress:function(D){var j;const L=parseInt((D.percent*1e4).toString())/100+"%",z=parseInt((D.speed/1024/1024*100).toString())/100+"Mb/s";(j=t==null?void 0:t.progress)==null||j.call(t,{percent:L,speed:z,loaded:D.loaded,total:D.total})},...r}).then(D=>{var z;const L=replaceQcloudDomain(D.Location)||"";e({url:L,fileName:k}),(z=t==null?void 0:t.success)==null||z.call(t,{url:L,fileName:k})}).catch(D=>{var L;(L=t==null?void 0:t.error)==null||L.call(t,D),T(D)})}).catch(()=>{T("Initialization COS failed")})}):Promise.reject("未选择上传文件")}function removeFile(o,i="img",t,r){return new Promise((e,T)=>{const{bucket:m,region:w,key:B}=getInfo(i);initCOS(!1).then(()=>{cos.deleteObject({Bucket:m,Region:w,Key:B+o,...r}).then(k=>{var R;e(),(R=t==null?void 0:t.success)==null||R.call(t)}).catch(k=>{var R;T(k),(R=t==null?void 0:t.error)==null||R.call(t,k)})}).catch(()=>{T("Initialization COS failed")})})}function getInfo(o){return o==="img"?{bucket:CONFIG.IMG_BUCKET,region:CONFIG.REGION,key:CONFIG.COS_IMG_OBJ_KEY}:{bucket:CONFIG.VIDEO_BUCKET,region:CONFIG.REGION,key:CONFIG.COS_VIDEO_OBJ_KEY}}function replaceQcloudDomain(o){let i=o.toLowerCase();const t=CONFIG.VIDEO_BUCKET+".cos."+CONFIG.REGION+".myqcloud.com",r=CONFIG.IMG_BUCKET+".cos."+CONFIG.REGION+".myqcloud.com";o.indexOf(t)!=-1&&(i=o.replace(t,ROOT.MOVIE_URL)),o.indexOf(r)!=-1&&(i=o.replace(r,ROOT.IMG_URL));const e=/^(http|https):\/\//gi;return i.match(e)||(i="https://"+i),i}function initCOS(o){return cos&&!o?Promise.resolve():new Promise((i,t)=>{const r=getRequestConfig();if(!r){t("Can't find which project"),console.error("Can't find which project");return}cos=new Cos({getAuthorization(e,T){const m={method:"get",url:r.url,headers:{...r.header}};service(Object.assign({},m,r)).then(w=>{const B=w.data;T({TmpSecretId:B.tmpSecretId,TmpSecretKey:B.tmpSecretKey,SecurityToken:B.sessionToken,StartTime:B.startTime,ExpiredTime:B.expiredTime})}).catch(()=>{T("Error getting signature")})}}),i()})}function getRequestConfig(){const o=getProject(),i=REQUEST_INFO[o];if(i){const t=(()=>typeof i.header=="function"?i.header():i.header)();return{url:i.url,header:t}}else return null}function uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){var i=Math.random()*16|0,t=o=="x"?i:i&3|8;return t.toString(16)})}const _hoisted_1=["id"],_hoisted_2={key:0,class:"dz-message"},_hoisted_3=["id"],_hoisted_4={class:"dz-preview dz-file-preview"},_hoisted_5=createStaticVNode('<div class="dz-image" data-v-aa01c83b><img data-dz-thumbnail data-v-aa01c83b></div><div class="dz-details" data-v-aa01c83b><div class="dz-size" data-v-aa01c83b><span data-dz-size data-v-aa01c83b></span></div><div class="dz-filename" data-v-aa01c83b><span data-dz-name data-v-aa01c83b></span></div></div><div class="dz-progress" data-v-aa01c83b><span class="dz-upload" data-dz-uploadprogress data-v-aa01c83b></span></div><div class="dz-error-message" data-v-aa01c83b><span data-dz-errormessage data-v-aa01c83b></span></div><div class="dz-success-mark" data-v-aa01c83b><svg width="54" height="54" viewBox="0 0 54 54" fill="white" xmlns="http://www.w3.org/2000/svg" data-v-aa01c83b><path d="M10.2071 29.7929L14.2929 25.7071C14.6834 25.3166 15.3166 25.3166 15.7071 25.7071L21.2929 31.2929C21.6834 31.6834 22.3166 31.6834 22.7071 31.2929L38.2929 15.7071C38.6834 15.3166 39.3166 15.3166 39.7071 15.7071L43.7929 19.7929C44.1834 20.1834 44.1834 20.8166 43.7929 21.2071L22.7071 42.2929C22.3166 42.6834 21.6834 42.6834 21.2929 42.2929L10.2071 31.2071C9.81658 30.8166 9.81658 30.1834 10.2071 29.7929Z" data-v-aa01c83b></path></svg></div><div class="dz-error-mark" data-v-aa01c83b><svg width="54" height="54" viewBox="0 0 54 54" fill="white" xmlns="http://www.w3.org/2000/svg" data-v-aa01c83b><path d="M26.2929 20.2929L19.2071 13.2071C18.8166 12.8166 18.1834 12.8166 17.7929 13.2071L13.2071 17.7929C12.8166 18.1834 12.8166 18.8166 13.2071 19.2071L20.2929 26.2929C20.6834 26.6834 20.6834 27.3166 20.2929 27.7071L13.2071 34.7929C12.8166 35.1834 12.8166 35.8166 13.2071 36.2071L17.7929 40.7929C18.1834 41.1834 18.8166 41.1834 19.2071 40.7929L26.2929 33.7071C26.6834 33.3166 27.3166 33.3166 27.7071 33.7071L34.7929 40.7929C35.1834 41.1834 35.8166 41.1834 36.2071 40.7929L40.7929 36.2071C41.1834 35.8166 41.1834 35.1834 40.7929 34.7929L33.7071 27.7071C33.3166 27.3166 33.3166 26.6834 33.7071 26.2929L40.7929 19.2071C41.1834 18.8166 41.1834 18.1834 40.7929 17.7929L36.2071 13.2071C35.8166 12.8166 35.1834 12.8166 34.7929 13.2071L27.7071 20.2929C27.3166 20.6834 26.6834 20.6834 26.2929 20.2929Z" data-v-aa01c83b></path></svg></div>',6),_hoisted_11={key:0,class:"dz-remove dz-extra-button"},_sfc_main=defineComponent({__name:"index",props:{id:null,options:null,includeStyling:{type:Boolean,default:!0},destroyDropzone:{type:Boolean,default:!0},duplicateCheck:{type:Boolean,default:!1},useCustomSlot:{type:Boolean,default:!1},extraButton:null,cos:{type:Boolean,default:!0}},emits:["vdropzone-extra-button","vdropzone-thumbnail","vdropzone-duplicate-file","vdropzone-file-added","vdropzone-files-added","vdropzone-removed-file","vdropzone-success","vdropzone-success-multiple","vdropzone-error","vdropzone-error-multiple","vdropzone-sending","vdropzone-sending-multiple","vdropzone-complete","vdropzone-complete-multiple","vdropzone-canceled","vdropzone-canceled-multiple","vdropzone-max-files-reached","vdropzone-max-files-exceeded","vdropzone-processing","vdropzone-processing-multiple","vdropzone-upload-progress","vdropzone-total-upload-progress","vdropzone-reset","vdropzone-queue-complete","vdropzone-drop","vdropzone-drag-start","vdropzone-drag-end","vdropzone-drag-enter","vdropzone-drag-over","vdropzone-drag-leave","vdropzone-mounted","vdropzone-file-added-manually"],setup(o,{expose:i,emit:t}){const r=o;let e=null;const T=ref(null),m=computed(()=>{let u={previewTemplate:document.getElementById(r.id+"PreviewTemplate").innerHTML,thumbnailWidth:200,thumbnailHeight:200,dictDefaultMessage:"将文件拖到此处以上载",dictFallbackMessage:"您的浏览器不支持拖放文件上载。",dictFallbackText:"请使用下面的回退表单，像以前一样上载文件。",dictFileTooBig:"文件过大，请使用{{maxFilesize}}MB大小内的文件",dictInvalidFileType:"无法上载此类型的文件。",dictResponseError:"服务器响应了{{statusCode}}码。",dictCancelUpload:"取消上传",dictUploadCanceled:"上传已取消。",dictCancelUploadConfirmation:"确认是否要取消此上载？",dictRemoveFile:"删除文件",dictMaxFilesExceeded:"您不能再上载任何文件。",url:"Fill me",maxFilesize:1,addRemoveLinks:!0,filesizeBase:1024};return Object.keys(r.options).forEach(function(P){u[P]=r.options[P]}),r.cos&&(u.autoProcessQueue=!1),u});onMounted(()=>{T.value&&(e=new $3ed269f2f0fb224b$export$2e2bcd8739ae039(T.value,m.value),e.on("thumbnail",function(u,P){t("vdropzone-thumbnail",u,P)}),e.on("addedfile",function(u){if(r.duplicateCheck&&this.files.length){let p,N;for(p=0,N=this.files.length;p<N-1;p++)this.files[p].name===u.name&&this.files[p].size===u.size&&this.files[p].lastModified.toString()===u.lastModified.toString()&&(this.removeFile(u),t("vdropzone-duplicate-file",u))}const P=document.querySelectorAll(".dz-extra-button");for(const p of P)p.addEventListener("click",()=>{B(u)});t("vdropzone-file-added",u)}),e.on("addedfiles",function(u){if(r.cos)for(const P of u)P.status=$3ed269f2f0fb224b$export$2e2bcd8739ae039.UPLOADING,e.emit("processing",P),uploadFile(P,w(P),{progress:({loaded:p,total:N})=>{P.upload.progress=p/N,P.upload.total=N,P.upload.bytesSent=p,e.emit("uploadprogress",P,P.upload.progress,P.upload.bytesSent)}}).then(p=>{P.cos=p,P.status=$3ed269f2f0fb224b$export$2e2bcd8739ae039.SUCCESS,e.emit("success",P,null,null),e.emit("complete",P)}).catch(p=>{P.status=$3ed269f2f0fb224b$export$2e2bcd8739ae039.ERROR,e.emit("error",P,p,null),e.emit("complete",P)});t("vdropzone-files-added",u)}),e.on("removedfile",function(u){t("vdropzone-removed-file",u),u.manuallyAdded&&e.options.maxFiles!==null&&e.options.maxFiles++,r.cos&&u.status===$3ed269f2f0fb224b$export$2e2bcd8739ae039.SUCCESS&&(u.cos?removeFile(u.cos.fileName,w(u)):console.error("No cos information"))}),e.on("success",function(u,P){t("vdropzone-success",u,P)}),e.on("successmultiple",function(u){t("vdropzone-success-multiple",u)}),e.on("error",function(u,P){const p=u.previewElement,N=p.querySelector(".dz-error-message");p.addEventListener("mouseenter",()=>{N&&(N.setAttribute("style",""),setTimeout(()=>{N&&(N.style.opacity="0",N.style.pointerEvents="none")},1e3))}),p.addEventListener("mouseleave",()=>{N&&N.setAttribute("style","")}),t("vdropzone-error",u,P)}),e.on("errormultiple",function(u,P){t("vdropzone-error-multiple",u,P)}),e.on("sending",function(u,P,p){t("vdropzone-sending",u,P,p)}),e.on("sendingmultiple",function(u,P,p){t("vdropzone-sending-multiple",u,P,p)}),e.on("complete",function(u){t("vdropzone-complete",u)}),e.on("completemultiple",function(u){t("vdropzone-complete-multiple",u)}),e.on("canceled",function(u){t("vdropzone-canceled",u)}),e.on("canceledmultiple",function(u){t("vdropzone-canceled-multiple",u)}),e.on("maxfilesreached",function(u){t("vdropzone-max-files-reached",u)}),e.on("maxfilesexceeded",function(u){t("vdropzone-max-files-exceeded",u)}),e.on("processing",function(u){t("vdropzone-processing",u)}),e.on("processingmultiple",function(u){t("vdropzone-processing-multiple",u)}),e.on("uploadprogress",function(u,P,p){t("vdropzone-upload-progress",u,P,p)}),e.on("totaluploadprogress",function(u,P,p){t("vdropzone-total-upload-progress",u,P,p)}),e.on("reset",function(){t("vdropzone-reset")}),e.on("queuecomplete",function(){t("vdropzone-queue-complete")}),e.on("drop",function(u){t("vdropzone-drop",u)}),e.on("dragstart",function(u){t("vdropzone-drag-start",u)}),e.on("dragend",function(u){t("vdropzone-drag-end",u)}),e.on("dragenter",function(u){t("vdropzone-drag-enter",u)}),e.on("dragover",function(u){t("vdropzone-drag-over",u)}),e.on("dragleave",function(u){t("vdropzone-drag-leave",u)}),t("vdropzone-mounted"))}),onBeforeUnmount(()=>{r.destroyDropzone&&e&&e.destroy()});function w(u){const P=["png","jpeg","jpg","webp","gif"],p=u.name.slice(u.name.lastIndexOf(".")+1).toLocaleLowerCase();let N="img";return P.includes(p)?N="img":N="vedio",N}function B(u){t("vdropzone-extra-button",u)}function k(u,P){u.manuallyAdded=!0;let p=new FileReader;if(u.accepted=!0,p.readAsDataURL(u),p.onload=function(N){let H=N.target.result;u.dataURL=H},e.emit("addedfile",u),e.options.createImageThumbnails&&P&&u.size<=e.options.maxThumbnailFilesize*1024*1024){e.emit("thumbnail",u,P);const N=u.previewElement.querySelectorAll("[data-dz-thumbnail]");for(let H=0;H<N.length;H++)N[H].style.width=m.value.thumbnailWidth+"px",N[H].style.height=m.value.thumbnailHeight+"px",N[H].style["object-fit"]="contain"}e.emit("complete",u),e.options.maxFiles&&e.options.maxFiles--,e.files.push(u),t("vdropzone-file-added-manually",u)}function R(u,P){e.options[u]=P}function D(u){e.removeAllFiles(u)}function L(){e.processQueue(),e.on("success",function(){e.options.autoProcessQueue=!0}),e.on("queuecomplete",function(){e.options.autoProcessQueue=!1})}function z(){return e.disable()}function j(){return e.enable()}function q(u){e.removeFile(u)}function te(){return e.getAcceptedFiles()}function X(){return e.getRejectedFiles()}function de(){return e.getQueuedFiles()}function U(){return e.getUploadingFiles()}function S(){return e}return i({removeAllFiles:D,setOption:R,manuallyAddFile:k,removeFile:q,processQueue:L,getAcceptedFiles:te,getRejectedFiles:X,getQueuedFiles:de,getUploadingFiles:U,disable:z,enable:j,getDropzoneInstance:S}),(u,P)=>(openBlock(),createElementBlock("div",null,[createBaseVNode("div",{id:o.id,ref_key:"dropzoneElement",ref:T,class:normalizeClass({"vue-dropzone dropzone":o.includeStyling})},[o.useCustomSlot?(openBlock(),createElementBlock("div",_hoisted_2,[renderSlot(u.$slots,"default",{},()=>[createTextVNode("将文件拖到此处以上载")],!0)])):createCommentVNode("",!0)],10,_hoisted_1),createBaseVNode("div",{id:o.id+"PreviewTemplate",class:"previewTemplate"},[createBaseVNode("div",_hoisted_4,[_hoisted_5,o.extraButton?(openBlock(),createElementBlock("div",_hoisted_11,toDisplayString(o.extraButton),1)):createCommentVNode("",!0)])],8,_hoisted_3)]))}}),index_vue_vue_type_style_index_0_scoped_aa01c83b_lang="",index=_export_sfc(_sfc_main,[["__scopeId","data-v-aa01c83b"]]);export{index as default};
